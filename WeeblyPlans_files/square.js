
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="810e8bd3-b1e8-5347-aa42-86cebcf61b5f")}catch(e){}}();
(()=>{"use strict";var e={9386:(e,t,r)=>{var n=r(6357),i=r(215),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a function")}},5292:(e,t,r)=>{var n=r(6653),i=r(215),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a constructor")}},2834:(e,t,r)=>{var n=r(6357),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw new o("Can't set "+i(e)+" as a prototype")}},5845:(e,t,r)=>{var n=r(3683),i=r(2104),o=r(8449).f,s=n("unscopables"),a=Array.prototype;void 0===a[s]&&o(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},7157:(e,t,r)=>{var n=r(4775).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},2135:(e,t,r)=>{var n=r(5161),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new i("Incorrect invocation")}},151:(e,t,r)=>{var n=r(1634),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not an object")}},1651:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},2372:(e,t,r)=>{var n=r(4543);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},8180:(e,t,r)=>{var n,i,o,s=r(1651),a=r(5180),c=r(4523),u=r(6357),l=r(1634),d=r(5889),h=r(7611),p=r(215),f=r(6587),g=r(9704),v=r(3642),m=r(5161),y=r(7763),E=r(7943),_=r(3683),b=r(6048),I=r(4317),S=I.enforce,O=I.get,w=c.Int8Array,C=w&&w.prototype,A=c.Uint8ClampedArray,T=A&&A.prototype,P=w&&y(w),N=C&&y(C),R=Object.prototype,D=c.TypeError,L=_("toStringTag"),x=b("TYPED_ARRAY_TAG"),k="TypedArrayConstructor",M=s&&!!E&&"Opera"!==h(c.opera),j=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},H={BigInt64Array:8,BigUint64Array:8},B=function(e){var t=y(e);if(l(t)){var r=O(t);return r&&d(r,k)?r[k]:B(t)}},F=function(e){if(!l(e))return!1;var t=h(e);return d(U,t)||d(H,t)};for(n in U)(o=(i=c[n])&&i.prototype)?S(o)[k]=i:M=!1;for(n in H)(o=(i=c[n])&&i.prototype)&&(S(o)[k]=i);if((!M||!u(P)||P===Function.prototype)&&(P=function(){throw new D("Incorrect invocation")},M))for(n in U)c[n]&&E(c[n],P);if((!M||!N||N===R)&&(N=P.prototype,M))for(n in U)c[n]&&E(c[n].prototype,N);if(M&&y(T)!==N&&E(T,N),a&&!d(N,L))for(n in j=!0,v(N,L,{configurable:!0,get:function(){return l(this)?this[x]:void 0}}),U)c[n]&&f(c[n],x,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:j&&x,aTypedArray:function(e){if(F(e))return e;throw new D("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!E||m(P,e)))return e;throw new D(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(a){if(r)for(var i in U){var o=c[i];if(o&&d(o.prototype,e))try{delete o.prototype[e]}catch(r){try{o.prototype[e]=t}catch(e){}}}N[e]&&!r||g(N,e,r?t:M&&C[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,i;if(a){if(E){if(r)for(n in U)if((i=c[n])&&d(i,e))try{delete i[e]}catch(e){}if(P[e]&&!r)return;try{return g(P,e,r?t:M&&P[e]||t)}catch(e){}}for(n in U)!(i=c[n])||i[e]&&!r||g(i,e,t)}},getTypedArrayConstructor:B,isView:function(e){if(!l(e))return!1;var t=h(e);return"DataView"===t||d(U,t)||d(H,t)},isTypedArray:F,TypedArray:P,TypedArrayPrototype:N}},6330:(e,t,r)=>{var n=r(4523),i=r(1008),o=r(5180),s=r(1651),a=r(94),c=r(6587),u=r(3642),l=r(6519),d=r(4543),h=r(2135),p=r(4827),f=r(5966),g=r(192),v=r(721),m=r(5498),y=r(7763),E=r(7943),_=r(9712).f,b=r(4453),I=r(231),S=r(6143),O=r(4317),w=a.PROPER,C=a.CONFIGURABLE,A="ArrayBuffer",T="DataView",P="prototype",N="Wrong index",R=O.getterFor(A),D=O.getterFor(T),L=O.set,x=n[A],k=x,M=k&&k[P],j=n[T],U=j&&j[P],H=Object.prototype,B=n.Array,F=n.RangeError,q=i(b),V=i([].reverse),G=m.pack,z=m.unpack,$=function(e){return[255&e]},W=function(e){return[255&e,e>>8&255]},Y=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},K=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},X=function(e){return G(v(e),23,4)},J=function(e){return G(e,52,8)},Z=function(e,t,r){u(e[P],t,{configurable:!0,get:function(){return r(this)[t]}})},Q=function(e,t,r,n){var i=D(e),o=g(r),s=!!n;if(o+t>i.byteLength)throw new F(N);var a=i.bytes,c=o+i.byteOffset,u=I(a,c,c+t);return s?u:V(u)},ee=function(e,t,r,n,i,o){var s=D(e),a=g(r),c=n(+i),u=!!o;if(a+t>s.byteLength)throw new F(N);for(var l=s.bytes,d=a+s.byteOffset,h=0;h<t;h++)l[d+h]=c[u?h:t-h-1]};if(s){var te=w&&x.name!==A;if(d((function(){x(1)}))&&d((function(){new x(-1)}))&&!d((function(){return new x,new x(1.5),new x(NaN),1!==x.length||te&&!C})))te&&C&&c(x,"name",A);else{(k=function(e){return h(this,M),new x(g(e))})[P]=M;for(var re,ne=_(x),ie=0;ne.length>ie;)(re=ne[ie++])in k||c(k,re,x[re]);M.constructor=k}E&&y(U)!==H&&E(U,H);var oe=new j(new k(2)),se=i(U.setInt8);oe.setInt8(0,2147483648),oe.setInt8(1,2147483649),!oe.getInt8(0)&&oe.getInt8(1)||l(U,{setInt8:function(e,t){se(this,e,t<<24>>24)},setUint8:function(e,t){se(this,e,t<<24>>24)}},{unsafe:!0})}else M=(k=function(e){h(this,M);var t=g(e);L(this,{type:A,bytes:q(B(t),0),byteLength:t}),o||(this.byteLength=t,this.detached=!1)})[P],U=(j=function(e,t,r){h(this,U),h(e,M);var n=R(e),i=n.byteLength,s=p(t);if(s<0||s>i)throw new F("Wrong offset");if(s+(r=void 0===r?i-s:f(r))>i)throw new F("Wrong length");L(this,{type:T,buffer:e,byteLength:r,byteOffset:s,bytes:n.bytes}),o||(this.buffer=e,this.byteLength=r,this.byteOffset=s)})[P],o&&(Z(k,"byteLength",R),Z(j,"buffer",D),Z(j,"byteLength",D),Z(j,"byteOffset",D)),l(U,{getInt8:function(e){return Q(this,1,e)[0]<<24>>24},getUint8:function(e){return Q(this,1,e)[0]},getInt16:function(e){var t=Q(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Q(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return K(Q(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return K(Q(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return z(Q(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return z(Q(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){ee(this,1,e,$,t)},setUint8:function(e,t){ee(this,1,e,$,t)},setInt16:function(e,t){ee(this,2,e,W,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){ee(this,2,e,W,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){ee(this,4,e,Y,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){ee(this,4,e,Y,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){ee(this,4,e,X,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){ee(this,8,e,J,t,arguments.length>2&&arguments[2])}});S(k,A),S(j,T),e.exports={ArrayBuffer:k,DataView:j}},4453:(e,t,r)=>{var n=r(581),i=r(7418),o=r(5526);e.exports=function(e){for(var t=n(this),r=o(t),s=arguments.length,a=i(s>1?arguments[1]:void 0,r),c=s>2?arguments[2]:void 0,u=void 0===c?r:i(c,r);u>a;)t[a++]=e;return t}},3371:(e,t,r)=>{var n=r(2077).forEach,i=r(4486)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},2753:(e,t,r)=>{var n=r(853),i=r(7418),o=r(5526),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c),l=i(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},2077:(e,t,r)=>{var n=r(1232),i=r(1008),o=r(191),s=r(581),a=r(5526),c=r(797),u=i([].push),l=function(e){var t=1===e,r=2===e,i=3===e,l=4===e,d=6===e,h=7===e,p=5===e||d;return function(f,g,v,m){for(var y,E,_=s(f),b=o(_),I=n(g,v),S=a(b),O=0,w=m||c,C=t?w(f,S):r||h?w(f,0):void 0;S>O;O++)if((p||O in b)&&(E=I(y=b[O],O,_),e))if(t)C[O]=E;else if(E)switch(e){case 3:return!0;case 5:return y;case 6:return O;case 2:u(C,y)}else switch(e){case 4:return!1;case 7:u(C,y)}return d?-1:i||l?l:C}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},4486:(e,t,r)=>{var n=r(4543);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},7262:(e,t,r)=>{var n=r(9386),i=r(581),o=r(191),s=r(5526),a=TypeError,c=function(e){return function(t,r,c,u){n(r);var l=i(t),d=o(l),h=s(l),p=e?h-1:0,f=e?-1:1;if(c<2)for(;;){if(p in d){u=d[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw new a("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in d&&(u=r(u,d[p],p,l));return u}};e.exports={left:c(!1),right:c(!0)}},231:(e,t,r)=>{var n=r(7418),i=r(5526),o=r(9904),s=Array,a=Math.max;e.exports=function(e,t,r){for(var c=i(e),u=n(t,c),l=n(void 0===r?c:r,c),d=s(a(l-u,0)),h=0;u<l;u++,h++)o(d,h,e[u]);return d.length=h,d}},9136:(e,t,r)=>{var n=r(1008);e.exports=n([].slice)},4568:(e,t,r)=>{var n=r(231),i=Math.floor,o=function(e,t){var r=e.length,c=i(r/2);return r<8?s(e,t):a(e,o(n(e,0,c),t),o(n(e,c),t),t)},s=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},a=function(e,t,r,n){for(var i=t.length,o=r.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?n(t[s],r[a])<=0?t[s++]:r[a++]:s<i?t[s++]:r[a++];return e};e.exports=o},9929:(e,t,r)=>{var n=r(6872),i=r(6653),o=r(1634),s=r(3683)("species"),a=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===a||n(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},797:(e,t,r)=>{var n=r(9929);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},668:(e,t,r)=>{var n=r(3683)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!i)return!1}catch(e){return!1}var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},6032:(e,t,r)=>{var n=r(1008),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},7611:(e,t,r)=>{var n=r(3644),i=r(6357),o=r(6032),s=r(3683)("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?o(t):"Object"===(n=o(t))&&i(t.callee)?"Arguments":n}},8137:(e,t,r)=>{var n=r(1008),i=r(6519),o=r(8907).getWeakData,s=r(2135),a=r(151),c=r(3445),u=r(1634),l=r(3308),d=r(2077),h=r(5889),p=r(4317),f=p.set,g=p.getterFor,v=d.find,m=d.findIndex,y=n([].splice),E=0,_=function(e){return e.frozen||(e.frozen=new b)},b=function(){this.entries=[]},I=function(e,t){return v(e.entries,(function(e){return e[0]===t}))};b.prototype={get:function(e){var t=I(this,e);if(t)return t[1]},has:function(e){return!!I(this,e)},set:function(e,t){var r=I(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=m(this.entries,(function(t){return t[0]===e}));return~t&&y(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var d=e((function(e,i){s(e,p),f(e,{type:t,id:E++,frozen:void 0}),c(i)||l(i,e[n],{that:e,AS_ENTRIES:r})})),p=d.prototype,v=g(t),m=function(e,t,r){var n=v(e),i=o(a(t),!0);return!0===i?_(n).set(t,r):i[n.id]=r,e};return i(p,{delete:function(e){var t=v(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).delete(e):r&&h(r,t.id)&&delete r[t.id]},has:function(e){var t=v(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).has(e):r&&h(r,t.id)}}),i(p,r?{get:function(e){var t=v(this);if(u(e)){var r=o(e);return!0===r?_(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return m(this,e,t)}}:{add:function(e){return m(this,e,!0)}}),d}}},196:(e,t,r)=>{var n=r(6566),i=r(4523),o=r(1008),s=r(4396),a=r(9704),c=r(8907),u=r(3308),l=r(2135),d=r(6357),h=r(3445),p=r(1634),f=r(4543),g=r(668),v=r(6143),m=r(3103);e.exports=function(e,t,r){var y=-1!==e.indexOf("Map"),E=-1!==e.indexOf("Weak"),_=y?"set":"add",b=i[e],I=b&&b.prototype,S=b,O={},w=function(e){var t=o(I[e]);a(I,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return E&&!p(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(s(e,!d(b)||!(E||I.forEach&&!f((function(){(new b).entries().next()})))))S=r.getConstructor(t,e,y,_),c.enable();else if(s(e,!0)){var C=new S,A=C[_](E?{}:-0,1)!==C,T=f((function(){C.has(1)})),P=g((function(e){new b(e)})),N=!E&&f((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));P||((S=t((function(e,t){l(e,I);var r=m(new b,e,S);return h(t)||u(t,r[_],{that:r,AS_ENTRIES:y}),r}))).prototype=I,I.constructor=S),(T||N)&&(w("delete"),w("has"),y&&w("get")),(N||A)&&w(_),E&&I.clear&&delete I.clear}return O[e]=S,n({global:!0,constructor:!0,forced:S!==b},O),v(S,e),E||r.setStrong(S,e,y),S}},812:(e,t,r)=>{var n=r(5889),i=r(7527),o=r(9763),s=r(8449);e.exports=function(e,t,r){for(var a=i(t),c=s.f,u=o.f,l=0;l<a.length;l++){var d=a[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},6412:(e,t,r)=>{var n=r(3683)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},99:(e,t,r)=>{var n=r(4543);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},5025:e=>{e.exports=function(e,t){return{value:e,done:t}}},6587:(e,t,r)=>{var n=r(5180),i=r(8449),o=r(6372);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},6372:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},9904:(e,t,r)=>{var n=r(9833),i=r(8449),o=r(6372);e.exports=function(e,t,r){var s=n(t);s in e?i.f(e,s,o(0,r)):e[s]=r}},3642:(e,t,r)=>{var n=r(27),i=r(8449);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},9704:(e,t,r)=>{var n=r(6357),i=r(8449),o=r(27),s=r(2969);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&o(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},6519:(e,t,r)=>{var n=r(9704);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},2969:(e,t,r)=>{var n=r(4523),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},5180:(e,t,r)=>{var n=r(4543);e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2155:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},2679:(e,t,r)=>{var n=r(4523),i=r(1634),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},792:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},832:(e,t,r)=>{var n=r(2679)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},4290:(e,t,r)=>{var n=r(4848).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},2530:(e,t,r)=>{var n=r(4848);e.exports=/MSIE|Trident/.test(n)},2224:(e,t,r)=>{var n=r(4523),i=r(6032);e.exports="process"===i(n.process)},4848:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},2844:(e,t,r)=>{var n,i,o=r(4523),s=r(4848),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},664:(e,t,r)=>{var n=r(4848).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},8471:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6566:(e,t,r)=>{var n=r(4523),i=r(9763).f,o=r(6587),s=r(9704),a=r(2969),c=r(812),u=r(4396);e.exports=function(e,t){var r,l,d,h,p,f=e.target,g=e.global,v=e.stat;if(r=g?n:v?n[f]||a(f,{}):(n[f]||{}).prototype)for(l in t){if(h=t[l],d=e.dontCallGetSet?(p=i(r,l))&&p.value:r[l],!u(g?l:f+(v?".":"#")+l,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),s(r,l,h,e)}}},4543:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},1644:(e,t,r)=>{r(3831);var n=r(1316),i=r(9704),o=r(8779),s=r(4543),a=r(3683),c=r(6587),u=a("species"),l=RegExp.prototype;e.exports=function(e,t,r,d){var h=a(e),p=!s((function(){var t={};return t[h]=function(){return 7},7!==""[e](t)})),f=p&&!s((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!p||!f||r){var g=n(/./[h]),v=t(h,""[e],(function(e,t,r,i,s){var a=n(e),c=t.exec;return c===o||c===l.exec?p&&!s?{done:!0,value:g(t,r,i)}:{done:!0,value:a(r,t,i)}:{done:!1}}));i(String.prototype,e,v[0]),i(l,h,v[1])}d&&c(l[h],"sham",!0)}},5240:(e,t,r)=>{var n=r(4543);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},1881:(e,t,r)=>{var n=r(9944),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(o):function(){return s.apply(o,arguments)})},1232:(e,t,r)=>{var n=r(1316),i=r(9386),o=r(9944),s=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},9944:(e,t,r)=>{var n=r(4543);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},2957:(e,t,r)=>{var n=r(9944),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},94:(e,t,r)=>{var n=r(5180),i=r(5889),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},2946:(e,t,r)=>{var n=r(1008),i=r(9386);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},1316:(e,t,r)=>{var n=r(6032),i=r(1008);e.exports=function(e){if("Function"===n(e))return i(e)}},1008:(e,t,r)=>{var n=r(9944),i=Function.prototype,o=i.call,s=n&&i.bind.bind(o,o);e.exports=n?s:function(e){return function(){return o.apply(e,arguments)}}},7735:(e,t,r)=>{var n=r(4523),i=r(6357);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},787:(e,t,r)=>{var n=r(7611),i=r(6046),o=r(3445),s=r(7869),a=r(3683)("iterator");e.exports=function(e){if(!o(e))return i(e,a)||i(e,"@@iterator")||s[n(e)]}},6417:(e,t,r)=>{var n=r(2957),i=r(9386),o=r(151),s=r(215),a=r(787),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(i(r))return o(n(r,e));throw new c(s(e)+" is not iterable")}},6046:(e,t,r)=>{var n=r(9386),i=r(3445);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},9070:(e,t,r)=>{var n=r(1008),i=r(581),o=Math.floor,s=n("".charAt),a=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,h){var p=r+e.length,f=n.length,g=l;return void 0!==d&&(d=i(d),g=u),a(h,g,(function(i,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,p);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return i;if(l>f){var h=o(l/10);return 0===h?i:h<=f?void 0===n[h-1]?s(a,1):n[h-1]+s(a,1):i}u=n[l-1]}return void 0===u?"":u}))}},4523:function(e,t,r){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},5889:(e,t,r)=>{var n=r(1008),i=r(581),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},5525:e=>{e.exports={}},2093:(e,t,r)=>{var n=r(7735);e.exports=n("document","documentElement")},9053:(e,t,r)=>{var n=r(5180),i=r(4543),o=r(2679);e.exports=!n&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},5498:e=>{var t=Array,r=Math.abs,n=Math.pow,i=Math.floor,o=Math.log,s=Math.LN2;e.exports={pack:function(e,a,c){var u,l,d,h=t(c),p=8*c-a-1,f=(1<<p)-1,g=f>>1,v=23===a?n(2,-24)-n(2,-77):0,m=e<0||0===e&&1/e<0?1:0,y=0;for((e=r(e))!=e||e===1/0?(l=e!=e?1:0,u=f):(u=i(o(e)/s),e*(d=n(2,-u))<1&&(u--,d*=2),(e+=u+g>=1?v/d:v*n(2,1-g))*d>=2&&(u++,d/=2),u+g>=f?(l=0,u=f):u+g>=1?(l=(e*d-1)*n(2,a),u+=g):(l=e*n(2,g-1)*n(2,a),u=0));a>=8;)h[y++]=255&l,l/=256,a-=8;for(u=u<<a|l,p+=a;p>0;)h[y++]=255&u,u/=256,p-=8;return h[--y]|=128*m,h},unpack:function(e,t){var r,i=e.length,o=8*i-t-1,s=(1<<o)-1,a=s>>1,c=o-7,u=i-1,l=e[u--],d=127&l;for(l>>=7;c>0;)d=256*d+e[u--],c-=8;for(r=d&(1<<-c)-1,d>>=-c,c+=t;c>0;)r=256*r+e[u--],c-=8;if(0===d)d=1-a;else{if(d===s)return r?NaN:l?-1/0:1/0;r+=n(2,t),d-=a}return(l?-1:1)*r*n(2,d-t)}}},191:(e,t,r)=>{var n=r(1008),i=r(4543),o=r(6032),s=Object,a=n("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?a(e,""):s(e)}:s},3103:(e,t,r)=>{var n=r(6357),i=r(1634),o=r(7943);e.exports=function(e,t,r){var s,a;return o&&n(s=t.constructor)&&s!==r&&i(a=s.prototype)&&a!==r.prototype&&o(e,a),e}},6842:(e,t,r)=>{var n=r(1008),i=r(6357),o=r(3965),s=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},8907:(e,t,r)=>{var n=r(6566),i=r(1008),o=r(5525),s=r(1634),a=r(5889),c=r(8449).f,u=r(9712),l=r(3834),d=r(3452),h=r(6048),p=r(5240),f=!1,g=h("meta"),v=0,m=function(e){c(e,g,{value:{objectID:"O"+v++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},f=!0;var e=u.f,t=i([].splice),r={};r[g]=1,e(r).length&&(u.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===g){t(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,g)){if(!d(e))return"F";if(!t)return"E";m(e)}return e[g].objectID},getWeakData:function(e,t){if(!a(e,g)){if(!d(e))return!0;if(!t)return!1;m(e)}return e[g].weakData},onFreeze:function(e){return p&&f&&d(e)&&!a(e,g)&&m(e),e}};o[g]=!0},4317:(e,t,r)=>{var n,i,o,s=r(158),a=r(4523),c=r(1634),u=r(6587),l=r(5889),d=r(3965),h=r(9847),p=r(5525),f="Object already initialized",g=a.TypeError,v=a.WeakMap;if(s||d.state){var m=d.state||(d.state=new v);m.get=m.get,m.has=m.has,m.set=m.set,n=function(e,t){if(m.has(e))throw new g(f);return t.facade=e,m.set(e,t),t},i=function(e){return m.get(e)||{}},o=function(e){return m.has(e)}}else{var y=h("state");p[y]=!0,n=function(e,t){if(l(e,y))throw new g(f);return t.facade=e,u(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return r}}}},5745:(e,t,r)=>{var n=r(3683),i=r(7869),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},6872:(e,t,r)=>{var n=r(6032);e.exports=Array.isArray||function(e){return"Array"===n(e)}},5319:(e,t,r)=>{var n=r(7611);e.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},6357:(e,t,r)=>{var n=r(2155),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},6653:(e,t,r)=>{var n=r(1008),i=r(4543),o=r(6357),s=r(7611),a=r(7735),c=r(6842),u=function(){},l=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.test(u),g=function(e){if(!o(e))return!1;try{return d(u,l,e),!0}catch(e){return!1}},v=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(e){return!0}};v.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?v:g},4396:(e,t,r)=>{var n=r(4543),i=r(6357),o=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r===l||r!==u&&(i(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},1463:(e,t,r)=>{var n=r(1634),i=Math.floor;e.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&i(e)===e}},3445:e=>{e.exports=function(e){return null==e}},1634:(e,t,r)=>{var n=r(6357),i=r(2155),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===o}:function(e){return"object"==typeof e?null!==e:n(e)}},7051:e=>{e.exports=!1},2388:(e,t,r)=>{var n=r(1634),i=r(6032),o=r(3683)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"===i(e))}},2357:(e,t,r)=>{var n=r(7735),i=r(6357),o=r(5161),s=r(2496),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,a(e))}},3308:(e,t,r)=>{var n=r(1232),i=r(2957),o=r(151),s=r(215),a=r(5745),c=r(5526),u=r(5161),l=r(6417),d=r(787),h=r(2675),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,r){var v,m,y,E,_,b,I,S=r&&r.that,O=!(!r||!r.AS_ENTRIES),w=!(!r||!r.IS_RECORD),C=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),T=n(t,S),P=function(e){return v&&h(v,"normal",e),new f(!0,e)},N=function(e){return O?(o(e),A?T(e[0],e[1],P):T(e[0],e[1])):A?T(e,P):T(e)};if(w)v=e.iterator;else if(C)v=e;else{if(!(m=d(e)))throw new p(s(e)+" is not iterable");if(a(m)){for(y=0,E=c(e);E>y;y++)if((_=N(e[y]))&&u(g,_))return _;return new f(!1)}v=l(e,m)}for(b=w?e.next:v.next;!(I=i(b,v)).done;){try{_=N(I.value)}catch(e){h(v,"throw",e)}if("object"==typeof _&&_&&u(g,_))return _}return new f(!1)}},2675:(e,t,r)=>{var n=r(2957),i=r(151),o=r(6046);e.exports=function(e,t,r){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return i(s),r}},714:(e,t,r)=>{var n=r(793).IteratorPrototype,i=r(2104),o=r(6372),s=r(6143),a=r(7869),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=i(n,{next:o(+!u,r)}),s(e,l,!1,!0),a[l]=c,e}},3952:(e,t,r)=>{var n=r(6566),i=r(2957),o=r(7051),s=r(94),a=r(6357),c=r(714),u=r(7763),l=r(7943),d=r(6143),h=r(6587),p=r(9704),f=r(3683),g=r(7869),v=r(793),m=s.PROPER,y=s.CONFIGURABLE,E=v.IteratorPrototype,_=v.BUGGY_SAFARI_ITERATORS,b=f("iterator"),I="keys",S="values",O="entries",w=function(){return this};e.exports=function(e,t,r,s,f,v,C){c(r,t,s);var A,T,P,N=function(e){if(e===f&&k)return k;if(!_&&e&&e in L)return L[e];switch(e){case I:case S:case O:return function(){return new r(this,e)}}return function(){return new r(this)}},R=t+" Iterator",D=!1,L=e.prototype,x=L[b]||L["@@iterator"]||f&&L[f],k=!_&&x||N(f),M="Array"===t&&L.entries||x;if(M&&(A=u(M.call(new e)))!==Object.prototype&&A.next&&(o||u(A)===E||(l?l(A,E):a(A[b])||p(A,b,w)),d(A,R,!0,!0),o&&(g[R]=w)),m&&f===S&&x&&x.name!==S&&(!o&&y?h(L,"name",S):(D=!0,k=function(){return i(x,this)})),f)if(T={values:N(S),keys:v?k:N(I),entries:N(O)},C)for(P in T)(_||D||!(P in L))&&p(L,P,T[P]);else n({target:t,proto:!0,forced:_||D},T);return o&&!C||L[b]===k||p(L,b,k,{name:f}),g[t]=k,T}},793:(e,t,r)=>{var n,i,o,s=r(4543),a=r(6357),c=r(1634),u=r(2104),l=r(7763),d=r(9704),h=r(3683),p=r(7051),f=h("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):g=!0),!c(n)||s((function(){var e={};return n[f].call(e)!==e}))?n={}:p&&(n=u(n)),a(n[f])||d(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},7869:e=>{e.exports={}},5526:(e,t,r)=>{var n=r(5966);e.exports=function(e){return n(e.length)}},27:(e,t,r)=>{var n=r(1008),i=r(4543),o=r(6357),s=r(5889),a=r(5180),c=r(94).CONFIGURABLE,u=r(6842),l=r(4317),d=l.enforce,h=l.get,p=String,f=Object.defineProperty,g=n("".slice),v=n("".replace),m=n([].join),y=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),E=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===g(p(t),0,7)&&(t="["+v(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&s(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=m(E,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&h(this).source||u(this)}),"toString")},9756:(e,t,r)=>{var n=r(9382),i=Math.abs,o=2220446049250313e-31,s=1/o;e.exports=function(e,t,r,a){var c=+e,u=i(c),l=n(c);if(u<a)return l*function(e){return e+s-s}(u/a/t)*a*t;var d=(1+t/o)*u,h=d-(d-u);return h>r||h!=h?l*(1/0):l*h}},721:(e,t,r)=>{var n=r(9756);e.exports=Math.fround||function(e){return n(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},9382:e=>{e.exports=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1}},4469:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},495:(e,t,r)=>{var n=r(2388),i=TypeError;e.exports=function(e){if(n(e))throw new i("The method doesn't accept regular expressions");return e}},3280:(e,t,r)=>{var n=r(4523),i=r(4543),o=r(1008),s=r(2255),a=r(8906).trim,c=r(8908),u=o("".charAt),l=n.parseFloat,d=n.Symbol,h=d&&d.iterator,p=1/l(c+"-0")!=-1/0||h&&!i((function(){l(Object(h))}));e.exports=p?function(e){var t=a(s(e)),r=l(t);return 0===r&&"-"===u(t,0)?-0:r}:l},3957:(e,t,r)=>{var n=r(5180),i=r(1008),o=r(2957),s=r(4543),a=r(2528),c=r(2981),u=r(5),l=r(581),d=r(191),h=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!h||s((function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!==h({},e)[r]||a(h({},t)).join("")!==i}))?function(e,t){for(var r=l(e),i=arguments.length,s=1,h=c.f,p=u.f;i>s;)for(var g,v=d(arguments[s++]),m=h?f(a(v),h(v)):a(v),y=m.length,E=0;y>E;)g=m[E++],n&&!o(p,v,g)||(r[g]=v[g]);return r}:h},2104:(e,t,r)=>{var n,i=r(151),o=r(8337),s=r(8471),a=r(5525),c=r(2093),u=r(2679),l=r(9847),d="prototype",h="script",p=l("IE_PROTO"),f=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},v=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;m="undefined"!=typeof document?document.domain&&n?v(n):(t=u("iframe"),r="java"+h+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):v(n);for(var i=s.length;i--;)delete m[d][s[i]];return m()};a[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[d]=i(e),r=new f,f[d]=null,r[p]=e):r=m(),void 0===t?r:o.f(r,t)}},8337:(e,t,r)=>{var n=r(5180),i=r(7310),o=r(8449),s=r(151),a=r(853),c=r(2528);t.f=n&&!i?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),i=c(t),u=i.length,l=0;u>l;)o.f(e,r=i[l++],n[r]);return e}},8449:(e,t,r)=>{var n=r(5180),i=r(9053),o=r(7310),s=r(151),a=r(9833),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=n?o?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&p in r&&!r[p]){var n=l(e,t);n&&n[p]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},9763:(e,t,r)=>{var n=r(5180),i=r(2957),o=r(5),s=r(6372),a=r(853),c=r(9833),u=r(5889),l=r(9053),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!i(o.f,e,t),e[t])}},3834:(e,t,r)=>{var n=r(6032),i=r(853),o=r(9712).f,s=r(231),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"===n(e)?function(e){try{return o(e)}catch(e){return s(a)}}(e):o(i(e))}},9712:(e,t,r)=>{var n=r(1156),i=r(8471).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},2981:(e,t)=>{t.f=Object.getOwnPropertySymbols},7763:(e,t,r)=>{var n=r(5889),i=r(6357),o=r(581),s=r(9847),a=r(99),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},3452:(e,t,r)=>{var n=r(4543),i=r(1634),o=r(6032),s=r(2372),a=Object.isExtensible,c=n((function(){a(1)}));e.exports=c||s?function(e){return!!i(e)&&(!s||"ArrayBuffer"!==o(e))&&(!a||a(e))}:a},5161:(e,t,r)=>{var n=r(1008);e.exports=n({}.isPrototypeOf)},1156:(e,t,r)=>{var n=r(1008),i=r(5889),o=r(853),s=r(2753).indexOf,a=r(5525),c=n([].push);e.exports=function(e,t){var r,n=o(e),u=0,l=[];for(r in n)!i(a,r)&&i(n,r)&&c(l,r);for(;t.length>u;)i(n,r=t[u++])&&(~s(l,r)||c(l,r));return l}},2528:(e,t,r)=>{var n=r(1156),i=r(8471);e.exports=Object.keys||function(e){return n(e,i)}},5:(e,t)=>{var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7943:(e,t,r)=>{var n=r(2946),i=r(151),o=r(2834);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},5221:(e,t,r)=>{var n=r(5180),i=r(4543),o=r(1008),s=r(7763),a=r(2528),c=r(853),u=o(r(5).f),l=o([].push),d=n&&i((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),h=function(e){return function(t){for(var r,i=c(t),o=a(i),h=d&&null===s(i),p=o.length,f=0,g=[];p>f;)r=o[f++],n&&!(h?r in i:u(i,r))||l(g,e?[r,i[r]]:i[r]);return g}};e.exports={entries:h(!0),values:h(!1)}},5774:(e,t,r)=>{var n=r(2957),i=r(6357),o=r(1634),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&i(r=e.toString)&&!o(a=n(r,e)))return a;if(i(r=e.valueOf)&&!o(a=n(r,e)))return a;if("string"!==t&&i(r=e.toString)&&!o(a=n(r,e)))return a;throw new s("Can't convert object to primitive value")}},7527:(e,t,r)=>{var n=r(7735),i=r(1008),o=r(9712),s=r(2981),a=r(151),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=s.f;return r?c(t,r(e)):t}},4192:(e,t,r)=>{var n=r(8449).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},6010:(e,t,r)=>{var n=r(2957),i=r(151),o=r(6357),s=r(6032),a=r(8779),c=TypeError;e.exports=function(e,t){var r=e.exec;if(o(r)){var u=n(r,e,t);return null!==u&&i(u),u}if("RegExp"===s(e))return n(a,e,t);throw new c("RegExp#exec called on incompatible receiver")}},8779:(e,t,r)=>{var n,i,o=r(2957),s=r(1008),a=r(2255),c=r(4315),u=r(9933),l=r(9441),d=r(2104),h=r(4317).get,p=r(3027),f=r(8702),g=l("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,m=v,y=s("".charAt),E=s("".indexOf),_=s("".replace),b=s("".slice),I=(i=/b*/g,o(v,n=/a/,"a"),o(v,i,"a"),0!==n.lastIndex||0!==i.lastIndex),S=u.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(I||O||S||p||f)&&(m=function(e){var t,r,n,i,s,u,l,p=this,f=h(p),w=a(e),C=f.raw;if(C)return C.lastIndex=p.lastIndex,t=o(m,C,w),p.lastIndex=C.lastIndex,t;var A=f.groups,T=S&&p.sticky,P=o(c,p),N=p.source,R=0,D=w;if(T&&(P=_(P,"y",""),-1===E(P,"g")&&(P+="g"),D=b(w,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==y(w,p.lastIndex-1))&&(N="(?: "+N+")",D=" "+D,R++),r=new RegExp("^(?:"+N+")",P)),O&&(r=new RegExp("^"+N+"$(?!\\s)",P)),I&&(n=p.lastIndex),i=o(v,T?r:p,D),T?i?(i.input=b(i.input,R),i[0]=b(i[0],R),i.index=p.lastIndex,p.lastIndex+=i[0].length):p.lastIndex=0:I&&i&&(p.lastIndex=p.global?i.index+i[0].length:n),O&&i&&i.length>1&&o(g,i[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&A)for(i.groups=u=d(null),s=0;s<A.length;s++)u[(l=A[s])[0]]=i[l[1]];return i}),e.exports=m},4315:(e,t,r)=>{var n=r(151);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},1274:(e,t,r)=>{var n=r(2957),i=r(5889),o=r(5161),s=r(4315),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!o(a,e)?t:n(s,e)}},9933:(e,t,r)=>{var n=r(4543),i=r(4523).RegExp,o=n((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),s=o||n((function(){return!i("a","y").sticky})),a=o||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},3027:(e,t,r)=>{var n=r(4543),i=r(4523).RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},8702:(e,t,r)=>{var n=r(4543),i=r(4523).RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},9286:(e,t,r)=>{var n=r(3445),i=TypeError;e.exports=function(e){if(n(e))throw new i("Can't call method on "+e);return e}},9089:(e,t,r)=>{var n=r(7735),i=r(3642),o=r(3683),s=r(5180),a=o("species");e.exports=function(e){var t=n(e);s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},6143:(e,t,r)=>{var n=r(8449).f,i=r(5889),o=r(3683)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,o)&&n(e,o,{configurable:!0,value:t})}},9847:(e,t,r)=>{var n=r(9441),i=r(6048),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},3965:(e,t,r)=>{var n=r(4523),i=r(2969),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},9441:(e,t,r)=>{var n=r(7051),i=r(3965);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.33.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},8581:(e,t,r)=>{var n=r(151),i=r(5292),o=r(3445),s=r(3683)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||o(r=n(a)[s])?t:i(r)}},4775:(e,t,r)=>{var n=r(1008),i=r(4827),o=r(2255),s=r(9286),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,d=o(s(t)),h=i(r),p=d.length;return h<0||h>=p?e?"":void 0:(n=c(d,h))<55296||n>56319||h+1===p||(l=c(d,h+1))<56320||l>57343?e?a(d,h):n:e?u(d,h,h+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},4567:(e,t,r)=>{var n=r(4848);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},613:(e,t,r)=>{var n=r(1008),i=r(5966),o=r(2255),s=r(4458),a=r(9286),c=n(s),u=n("".slice),l=Math.ceil,d=function(e){return function(t,r,n){var s,d,h=o(a(t)),p=i(r),f=h.length,g=void 0===n?" ":o(n);return p<=f||""===g?h:((d=c(g,l((s=p-f)/g.length))).length>s&&(d=u(d,0,s)),e?h+d:d+h)}};e.exports={start:d(!1),end:d(!0)}},4458:(e,t,r)=>{var n=r(4827),i=r(2255),o=r(9286),s=RangeError;e.exports=function(e){var t=i(o(this)),r="",a=n(e);if(a<0||a===1/0)throw new s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},82:(e,t,r)=>{var n=r(94).PROPER,i=r(4543),o=r(8908);e.exports=function(e){return i((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e}))}},8906:(e,t,r)=>{var n=r(1008),i=r(9286),o=r(2255),s=r(8908),a=n("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(e){return function(t){var r=o(i(t));return 1&e&&(r=a(r,c,"")),2&e&&(r=a(r,u,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},4687:(e,t,r)=>{var n=r(2844),i=r(4543),o=r(4523).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},3048:(e,t,r)=>{var n=r(1008);e.exports=n(1..valueOf)},7418:(e,t,r)=>{var n=r(4827),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},5934:(e,t,r)=>{var n=r(9113),i=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new i("Can't convert number to bigint");return BigInt(t)}},192:(e,t,r)=>{var n=r(4827),i=r(5966),o=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw new o("Wrong length or index");return r}},853:(e,t,r)=>{var n=r(191),i=r(9286);e.exports=function(e){return n(i(e))}},4827:(e,t,r)=>{var n=r(4469);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},5966:(e,t,r)=>{var n=r(4827),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},581:(e,t,r)=>{var n=r(9286),i=Object;e.exports=function(e){return i(n(e))}},9829:(e,t,r)=>{var n=r(9526),i=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw new i("Wrong offset");return r}},9526:(e,t,r)=>{var n=r(4827),i=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new i("The argument can't be less than 0");return t}},9113:(e,t,r)=>{var n=r(2957),i=r(1634),o=r(2357),s=r(6046),a=r(5774),c=r(3683),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||o(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},9833:(e,t,r)=>{var n=r(9113),i=r(2357);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},3644:(e,t,r)=>{var n={};n[r(3683)("toStringTag")]="z",e.exports="[object z]"===String(n)},2255:(e,t,r)=>{var n=r(7611),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},4911:e=>{var t=Math.round;e.exports=function(e){var r=t(e);return r<0?0:r>255?255:255&r}},215:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},799:(e,t,r)=>{var n=r(6566),i=r(4523),o=r(2957),s=r(5180),a=r(6261),c=r(8180),u=r(6330),l=r(2135),d=r(6372),h=r(6587),p=r(1463),f=r(5966),g=r(192),v=r(9829),m=r(4911),y=r(9833),E=r(5889),_=r(7611),b=r(1634),I=r(2357),S=r(2104),O=r(5161),w=r(7943),C=r(9712).f,A=r(9843),T=r(2077).forEach,P=r(9089),N=r(3642),R=r(8449),D=r(9763),L=r(4317),x=r(3103),k=L.get,M=L.set,j=L.enforce,U=R.f,H=D.f,B=i.RangeError,F=u.ArrayBuffer,q=F.prototype,V=u.DataView,G=c.NATIVE_ARRAY_BUFFER_VIEWS,z=c.TYPED_ARRAY_TAG,$=c.TypedArray,W=c.TypedArrayPrototype,Y=c.aTypedArrayConstructor,K=c.isTypedArray,X="BYTES_PER_ELEMENT",J="Wrong length",Z=function(e,t){Y(e);for(var r=0,n=t.length,i=new e(n);n>r;)i[r]=t[r++];return i},Q=function(e,t){N(e,t,{configurable:!0,get:function(){return k(this)[t]}})},ee=function(e){var t;return O(q,e)||"ArrayBuffer"===(t=_(e))||"SharedArrayBuffer"===t},te=function(e,t){return K(e)&&!I(t)&&t in e&&p(+t)&&t>=0},re=function(e,t){return t=y(t),te(e,t)?d(2,e[t]):H(e,t)},ne=function(e,t,r){return t=y(t),!(te(e,t)&&b(r)&&E(r,"value"))||E(r,"get")||E(r,"set")||r.configurable||E(r,"writable")&&!r.writable||E(r,"enumerable")&&!r.enumerable?U(e,t,r):(e[t]=r.value,e)};s?(G||(D.f=re,R.f=ne,Q(W,"buffer"),Q(W,"byteOffset"),Q(W,"byteLength"),Q(W,"length")),n({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:re,defineProperty:ne}),e.exports=function(e,t,r){var s=e.match(/\d+/)[0]/8,c=e+(r?"Clamped":"")+"Array",u="get"+e,d="set"+e,p=i[c],y=p,E=y&&y.prototype,_={},I=function(e,t){U(e,t,{get:function(){return function(e,t){var r=k(e);return r.view[u](t*s+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var i=k(e);i.view[d](t*s+i.byteOffset,r?m(n):n,!0)}(this,t,e)},enumerable:!0})};G?a&&(y=t((function(e,t,r,n){return l(e,E),x(b(t)?ee(t)?void 0!==n?new p(t,v(r,s),n):void 0!==r?new p(t,v(r,s)):new p(t):K(t)?Z(y,t):o(A,y,t):new p(g(t)),e,y)})),w&&w(y,$),T(C(p),(function(e){e in y||h(y,e,p[e])})),y.prototype=E):(y=t((function(e,t,r,n){l(e,E);var i,a,c,u=0,d=0;if(b(t)){if(!ee(t))return K(t)?Z(y,t):o(A,y,t);i=t,d=v(r,s);var h=t.byteLength;if(void 0===n){if(h%s)throw new B(J);if((a=h-d)<0)throw new B(J)}else if((a=f(n)*s)+d>h)throw new B(J);c=a/s}else c=g(t),i=new F(a=c*s);for(M(e,{buffer:i,byteOffset:d,byteLength:a,length:c,view:new V(i)});u<c;)I(e,u++)})),w&&w(y,$),E=y.prototype=S(W)),E.constructor!==y&&h(E,"constructor",y),j(E).TypedArrayConstructor=y,z&&h(E,z,c);var O=y!==p;_[c]=y,n({global:!0,constructor:!0,forced:O,sham:!G},_),X in y||h(y,X,s),X in E||h(E,X,s),P(c)}):e.exports=function(){}},6261:(e,t,r)=>{var n=r(4523),i=r(4543),o=r(668),s=r(8180).NATIVE_ARRAY_BUFFER_VIEWS,a=n.ArrayBuffer,c=n.Int8Array;e.exports=!s||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new a(2),1,void 0).length}))},9843:(e,t,r)=>{var n=r(1232),i=r(2957),o=r(5292),s=r(581),a=r(5526),c=r(6417),u=r(787),l=r(5745),d=r(5319),h=r(8180).aTypedArrayConstructor,p=r(5934);e.exports=function(e){var t,r,f,g,v,m,y,E,_=o(this),b=s(e),I=arguments.length,S=I>1?arguments[1]:void 0,O=void 0!==S,w=u(b);if(w&&!l(w))for(E=(y=c(b,w)).next,b=[];!(m=i(E,y)).done;)b.push(m.value);for(O&&I>2&&(S=n(S,arguments[2])),r=a(b),f=new(h(_))(r),g=d(f),t=0;r>t;t++)v=O?S(b[t],t):b[t],f[t]=g?p(v):+v;return f}},6048:(e,t,r)=>{var n=r(1008),i=0,o=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},2496:(e,t,r)=>{var n=r(4687);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7310:(e,t,r)=>{var n=r(5180),i=r(4543);e.exports=n&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},158:(e,t,r)=>{var n=r(4523),i=r(6357),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},3683:(e,t,r)=>{var n=r(4523),i=r(9441),o=r(5889),s=r(6048),a=r(4687),c=r(2496),u=n.Symbol,l=i("wks"),d=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return o(l,e)||(l[e]=a&&o(u,e)?u[e]:d("Symbol."+e)),l[e]}},8908:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},8033:(e,t,r)=>{var n=r(6566),i=r(1316),o=r(4543),s=r(6330),a=r(151),c=r(7418),u=r(5966),l=r(8581),d=s.ArrayBuffer,h=s.DataView,p=h.prototype,f=i(d.prototype.slice),g=i(p.getUint8),v=i(p.setUint8);n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new d(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(f&&void 0===t)return f(a(this),e);for(var r=a(this).byteLength,n=c(e,r),i=c(void 0===t?r:t,r),o=new(l(this,d))(u(i-n)),s=new h(this),p=new h(o),m=0;n<i;)v(p,m++,g(s,n++));return o}})},935:(e,t,r)=>{var n=r(6566),i=r(2753).includes,o=r(4543),s=r(5845);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},6656:(e,t,r)=>{var n=r(853),i=r(5845),o=r(7869),s=r(4317),a=r(8449).f,c=r(3952),u=r(5025),l=r(7051),d=r(5180),h="Array Iterator",p=s.set,f=s.getterFor(h);e.exports=c(Array,"Array",(function(e,t){p(this,{type:h,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;if(!t||n>=t.length)return e.target=void 0,u(void 0,!0);switch(r){case"keys":return u(n,!1);case"values":return u(t[n],!1)}return u([n,t[n]],!1)}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(e){}},6104:(e,t,r)=>{var n=r(6566),i=r(7262).left,o=r(4486),s=r(2844);n({target:"Array",proto:!0,forced:!r(2224)&&s>79&&s<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},7156:(e,t,r)=>{var n=r(6566),i=r(3280);n({target:"Number",stat:!0,forced:Number.parseFloat!==i},{parseFloat:i})},6460:(e,t,r)=>{var n=r(6566),i=r(1008),o=r(4827),s=r(3048),a=r(4458),c=r(4543),u=RangeError,l=String,d=Math.floor,h=i(a),p=i("".slice),f=i(1..toFixed),g=function(e,t,r){return 0===t?r:t%2==1?g(e,t-1,r*e):g(e*e,t/2,r)},v=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=d(i/1e7)},m=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=d(n/t),n=n%t*1e7},y=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=l(e[t]);r=""===r?n:r+h("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,r,n,i,a=s(this),c=o(e),d=[0,0,0,0,0,0],f="",E="0";if(c<0||c>20)throw new u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return l(a);if(a<0&&(f="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),r*=4503599627370496,(t=52-t)>0){for(v(d,0,r),n=c;n>=7;)v(d,1e7,0),n-=7;for(v(d,g(10,n,1),0),n=t-1;n>=23;)m(d,1<<23),n-=23;m(d,1<<n),v(d,1,1),m(d,2),E=y(d)}else v(d,0,r),v(d,1<<-t,0),E=y(d)+h("0",c);return c>0?f+((i=E.length)<=c?"0."+h("0",c-i)+E:p(E,0,i-c)+"."+p(E,i-c)):f+E}})},2221:(e,t,r)=>{var n=r(6566),i=r(3957);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},8370:(e,t,r)=>{var n=r(6566),i=r(5221).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},3249:(e,t,r)=>{var n=r(6566),i=r(3308),o=r(9904);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},9170:(e,t,r)=>{var n=r(6566),i=r(5221).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},1152:(e,t,r)=>{var n=r(5180),i=r(4523),o=r(1008),s=r(4396),a=r(3103),c=r(6587),u=r(9712).f,l=r(5161),d=r(2388),h=r(2255),p=r(1274),f=r(9933),g=r(4192),v=r(9704),m=r(4543),y=r(5889),E=r(4317).enforce,_=r(9089),b=r(3683),I=r(3027),S=r(8702),O=b("match"),w=i.RegExp,C=w.prototype,A=i.SyntaxError,T=o(C.exec),P=o("".charAt),N=o("".replace),R=o("".indexOf),D=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,k=/a/g,M=new w(x)!==x,j=f.MISSED_STICKY,U=f.UNSUPPORTED_Y;if(s("RegExp",n&&(!M||j||I||S||m((function(){return k[O]=!1,w(x)!==x||w(k)===k||"/a/i"!==String(w(x,"i"))}))))){for(var H=function(e,t){var r,n,i,o,s,u,f=l(C,this),g=d(e),v=void 0===t,m=[],_=e;if(!f&&g&&v&&e.constructor===H)return e;if((g||l(C,e))&&(e=e.source,v&&(t=p(_))),e=void 0===e?"":h(e),t=void 0===t?"":h(t),_=e,I&&"dotAll"in x&&(n=!!t&&R(t,"s")>-1)&&(t=N(t,/s/g,"")),r=t,j&&"sticky"in x&&(i=!!t&&R(t,"y")>-1)&&U&&(t=N(t,/y/g,"")),S&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],s={},a=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=P(e,n)))t+=P(e,++n);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:T(L,D(e,n+1))&&(n+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||y(s,l))throw new A("Invalid capture group name");s[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],m=o[1]),s=a(w(e,t),f?this:C,H),(n||i||m.length)&&(u=E(s),n&&(u.dotAll=!0,u.raw=H(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=P(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+P(e,++n);return i}(e),r)),i&&(u.sticky=!0),m.length&&(u.groups=m)),e!==_)try{c(s,"source",""===_?"(?:)":_)}catch(e){}return s},B=u(w),F=0;B.length>F;)g(H,w,B[F++]);C.constructor=H,H.prototype=C,v(i,"RegExp",H,{constructor:!0})}_("RegExp")},3831:(e,t,r)=>{var n=r(6566),i=r(8779);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},4237:(e,t,r)=>{var n=r(94).PROPER,i=r(9704),o=r(151),s=r(2255),a=r(4543),c=r(1274),u="toString",l=RegExp.prototype[u],d=a((function(){return"/a/b"!==l.call({source:"a",flags:"b"})})),h=n&&l.name!==u;(d||h)&&i(RegExp.prototype,u,(function(){var e=o(this);return"/"+s(e.source)+"/"+s(c(e))}),{unsafe:!0})},1257:(e,t,r)=>{var n,i=r(6566),o=r(1316),s=r(9763).f,a=r(5966),c=r(2255),u=r(495),l=r(9286),d=r(6412),h=r(7051),p=o("".endsWith),f=o("".slice),g=Math.min,v=d("endsWith");i({target:"String",proto:!0,forced:!(!h&&!v&&(n=s(String.prototype,"endsWith"),n&&!n.writable)||v)},{endsWith:function(e){var t=c(l(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:g(a(r),n),o=c(e);return p?p(t,o,i):f(t,i-o.length,i)===o}})},8291:(e,t,r)=>{var n=r(6566),i=r(1008),o=r(495),s=r(9286),a=r(2255),c=r(6412),u=i("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},1505:(e,t,r)=>{var n=r(2957),i=r(1644),o=r(151),s=r(3445),a=r(5966),c=r(2255),u=r(9286),l=r(6046),d=r(7157),h=r(6010);i("match",(function(e,t,r){return[function(t){var r=u(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](c(r))},function(e){var n=o(this),i=c(e),s=r(t,n,i);if(s.done)return s.value;if(!n.global)return h(n,i);var u=n.unicode;n.lastIndex=0;for(var l,p=[],f=0;null!==(l=h(n,i));){var g=c(l[0]);p[f]=g,""===g&&(n.lastIndex=d(i,a(n.lastIndex),u)),f++}return 0===f?null:p}]}))},9964:(e,t,r)=>{var n=r(6566),i=r(613).start;n({target:"String",proto:!0,forced:r(4567)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},8304:(e,t,r)=>{var n=r(1881),i=r(2957),o=r(1008),s=r(1644),a=r(4543),c=r(151),u=r(6357),l=r(3445),d=r(4827),h=r(5966),p=r(2255),f=r(9286),g=r(7157),v=r(6046),m=r(9070),y=r(6010),E=r(3683)("replace"),_=Math.max,b=Math.min,I=o([].concat),S=o([].push),O=o("".indexOf),w=o("".slice),C="$0"==="a".replace(/./,"$0"),A=!!/./[E]&&""===/./[E]("a","$0");s("replace",(function(e,t,r){var o=A?"$":"$0";return[function(e,r){var n=f(this),o=l(e)?void 0:v(e,E);return o?i(o,e,n,r):i(t,p(n),e,r)},function(e,i){var s=c(this),a=p(e);if("string"==typeof i&&-1===O(i,o)&&-1===O(i,"$<")){var l=r(t,s,a,i);if(l.done)return l.value}var f=u(i);f||(i=p(i));var v,E=s.global;E&&(v=s.unicode,s.lastIndex=0);for(var C,A=[];null!==(C=y(s,a))&&(S(A,C),E);)""===p(C[0])&&(s.lastIndex=g(a,h(s.lastIndex),v));for(var T,P="",N=0,R=0;R<A.length;R++){for(var D,L=p((C=A[R])[0]),x=_(b(d(C.index),a.length),0),k=[],M=1;M<C.length;M++)S(k,void 0===(T=C[M])?T:String(T));var j=C.groups;if(f){var U=I([L],k,x,a);void 0!==j&&S(U,j),D=p(n(i,void 0,U))}else D=m(L,a,x,k,j,i);x>=N&&(P+=w(a,N,x)+D,N=x+L.length)}return P+w(a,N)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!C||A)},488:(e,t,r)=>{var n=r(1881),i=r(2957),o=r(1008),s=r(1644),a=r(151),c=r(3445),u=r(2388),l=r(9286),d=r(8581),h=r(7157),p=r(5966),f=r(2255),g=r(6046),v=r(231),m=r(6010),y=r(8779),E=r(9933),_=r(4543),b=E.UNSUPPORTED_Y,I=4294967295,S=Math.min,O=[].push,w=o(/./.exec),C=o(O),A=o("".slice);s("split",(function(e,t,r){var o;return o="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var o=f(l(this)),s=void 0===r?I:r>>>0;if(0===s)return[];if(void 0===e)return[o];if(!u(e))return i(t,o,e,s);for(var a,c,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,m=new RegExp(e.source,p+"g");(a=i(y,m,o))&&!((c=m.lastIndex)>g&&(C(h,A(o,g,a.index)),a.length>1&&a.index<o.length&&n(O,h,v(a,1)),d=a[0].length,g=c,h.length>=s));)m.lastIndex===a.index&&m.lastIndex++;return g===o.length?!d&&w(m,"")||C(h,""):C(h,A(o,g)),h.length>s?v(h,0,s):h}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:i(t,this,e,r)}:t,[function(t,r){var n=l(this),s=c(t)?void 0:g(t,e);return s?i(s,t,n,r):i(o,f(n),t,r)},function(e,n){var i=a(this),s=f(e),c=r(o,i,s,n,o!==t);if(c.done)return c.value;var u=d(i,RegExp),l=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(b?"g":"y"),v=new u(b?"^(?:"+i.source+")":i,g),y=void 0===n?I:n>>>0;if(0===y)return[];if(0===s.length)return null===m(v,s)?[s]:[];for(var E=0,_=0,O=[];_<s.length;){v.lastIndex=b?0:_;var w,T=m(v,b?A(s,_):s);if(null===T||(w=S(p(v.lastIndex+(b?_:0)),s.length))===E)_=h(s,_,l);else{if(C(O,A(s,E,_)),O.length===y)return O;for(var P=1;P<=T.length-1;P++)if(C(O,T[P]),O.length===y)return O;_=E=w}}return C(O,A(s,E)),O}]}),!!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),b)},7680:(e,t,r)=>{var n,i=r(6566),o=r(1316),s=r(9763).f,a=r(5966),c=r(2255),u=r(495),l=r(9286),d=r(6412),h=r(7051),p=o("".startsWith),f=o("".slice),g=Math.min,v=d("startsWith");i({target:"String",proto:!0,forced:!(!h&&!v&&(n=s(String.prototype,"startsWith"),n&&!n.writable)||v)},{startsWith:function(e){var t=c(l(this));u(e);var r=a(g(arguments.length>1?arguments[1]:void 0,t.length)),n=c(e);return p?p(t,n,r):f(t,r,r+n.length)===n}})},9098:(e,t,r)=>{var n=r(6566),i=r(8906).trim;n({target:"String",proto:!0,forced:r(82)("trim")},{trim:function(){return i(this)}})},6852:(e,t,r)=>{var n=r(8180),i=r(4453),o=r(5934),s=r(7611),a=r(2957),c=r(1008),u=r(4543),l=n.aTypedArray,d=n.exportTypedArrayMethod,h=c("".slice);d("fill",(function(e){var t=arguments.length;l(this);var r="Big"===h(s(this),0,3)?o(e):+e;return a(i,this,r,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),u((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},5437:(e,t,r)=>{var n=r(4523),i=r(2957),o=r(8180),s=r(5526),a=r(9829),c=r(581),u=r(4543),l=n.RangeError,d=n.Int8Array,h=d&&d.prototype,p=h&&h.set,f=o.aTypedArray,g=o.exportTypedArrayMethod,v=!u((function(){var e=new Uint8ClampedArray(2);return i(p,e,{length:1,0:3},1),3!==e[1]})),m=v&&o.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));g("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=c(e);if(v)return i(p,this,r,t);var n=this.length,o=s(r),u=0;if(o+t>n)throw new l("Wrong length");for(;u<o;)this[t+u]=r[u++]}),!v||m)},2181:(e,t,r)=>{var n=r(4523),i=r(1316),o=r(4543),s=r(9386),a=r(4568),c=r(8180),u=r(4290),l=r(2530),d=r(2844),h=r(664),p=c.aTypedArray,f=c.exportTypedArrayMethod,g=n.Uint16Array,v=g&&i(g.prototype.sort),m=!(!v||o((function(){v(new g(2),null)}))&&o((function(){v(new g(2),{})}))),y=!!v&&!o((function(){if(d)return d<74;if(u)return u<67;if(l)return!0;if(h)return h<602;var e,t,r=new g(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(v(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));f("sort",(function(e){return void 0!==e&&s(e),y?v(this,e):a(p(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!y||m)},2637:(e,t,r)=>{var n=r(4523),i=r(1881),o=r(8180),s=r(4543),a=r(9136),c=n.Int8Array,u=o.aTypedArray,l=o.exportTypedArrayMethod,d=[].toLocaleString,h=!!c&&s((function(){d.call(new c(1))}));l("toLocaleString",(function(){return i(d,h?a(u(this)):u(this),a(arguments))}),s((function(){return[1,2].toLocaleString()!==new c([1,2]).toLocaleString()}))||!s((function(){c.prototype.toLocaleString.call([1,2])})))},3025:(e,t,r)=>{r(799)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},7250:(e,t,r)=>{var n,i=r(5240),o=r(4523),s=r(1008),a=r(6519),c=r(8907),u=r(196),l=r(8137),d=r(1634),h=r(4317).enforce,p=r(4543),f=r(158),g=Object,v=Array.isArray,m=g.isExtensible,y=g.isFrozen,E=g.isSealed,_=g.freeze,b=g.seal,I={},S={},O=!o.ActiveXObject&&"ActiveXObject"in o,w=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},C=u("WeakMap",w,l),A=C.prototype,T=s(A.set);if(f)if(O){n=l.getConstructor(w,"WeakMap",!0),c.enable();var P=s(A.delete),N=s(A.has),R=s(A.get);a(A,{delete:function(e){if(d(e)&&!m(e)){var t=h(this);return t.frozen||(t.frozen=new n),P(this,e)||t.frozen.delete(e)}return P(this,e)},has:function(e){if(d(e)&&!m(e)){var t=h(this);return t.frozen||(t.frozen=new n),N(this,e)||t.frozen.has(e)}return N(this,e)},get:function(e){if(d(e)&&!m(e)){var t=h(this);return t.frozen||(t.frozen=new n),N(this,e)?R(this,e):t.frozen.get(e)}return R(this,e)},set:function(e,t){if(d(e)&&!m(e)){var r=h(this);r.frozen||(r.frozen=new n),N(this,e)?T(this,e,t):r.frozen.set(e,t)}else T(this,e,t);return this}})}else i&&p((function(){var e=_([]);return T(new C,e,1),!y(e)}))&&a(A,{set:function(e,t){var r;return v(e)&&(y(e)?r=I:E(e)&&(r=S)),T(this,e,t),r===I&&_(e),r===S&&b(e),this}})},5372:(e,t,r)=>{r(7250)},2892:(e,t,r)=>{var n=r(4523),i=r(792),o=r(832),s=r(3371),a=r(6587),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(o)},5993:(e,t,r)=>{var n=r(4523),i=r(792),o=r(832),s=r(6656),a=r(6587),c=r(3683),u=c("iterator"),l=c("toStringTag"),d=s.values,h=function(e,t){if(e){if(e[u]!==d)try{a(e,u,d)}catch(t){e[u]=d}if(e[l]||a(e,l,t),i[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var p in i)h(n[p]&&n[p].prototype,p);h(o,"DOMTokenList")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{FunctionToString:()=>nt,InboundFilters:()=>Je,LinkedErrors:()=>Nr});var i={};r.r(i),r.d(i,{Breadcrumbs:()=>jt,Dedupe:()=>Bt,GlobalHandlers:()=>or,HttpContext:()=>dr,LinkedErrors:()=>yr,TryCatch:()=>Ir}),r(6656),r(2221),r(5993),r(935),r(3831),r(8291),r(2892);var o=/android/i;function s(){var e=window.navigator.userAgent;return!!e&&Boolean((e.includes("Safari")&&(e.includes("iPhone")||e.includes("iPad"))&&!e.includes("Trident")||e.includes("AppleWebKit")&&!(e.includes("Android")||e.includes("Linux")||e.includes("Trident"))&&(e.includes("Mobile")||e.includes("iPhone")||e.includes("iPad"))&&!e.includes("Macintosh")&&!e.includes("Windows"))&&!(e.includes("Chrome")||e.includes("CriOS")||e.includes("Edg")))}function a(){var e=window.navigator.userAgent;return!!e&&Boolean((e.includes("Safari")||e.includes("AppleWebKit"))&&(e.includes("Macintosh")||e.includes("Windows"))&&!e.includes("iPhone")&&!e.includes("iPad")&&!e.includes("Chrome")&&!e.includes("Edg")&&!e.includes("Firefox"))}var c={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var r=new URL(e),n={};return t.forEach((e=>{var t=r.searchParams.get(e);null!==t&&(n[e]=t)})),n},isAndroid:function(){return o.test(window.navigator.userAgent)},isDesktopSafari:a,isMobileSafari:s,isSafari:function(){return s()||a()},get isSecureContext(){return window.isSecureContext},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},get isTopLevelWindow(){return window.parent===window},get supportsCryptoDigest(){var e;return void 0!==(null===(e=crypto.subtle)||void 0===e?void 0:e.digest)},get supportsDocumentVisibilityState(){return void 0!==document.visibilityState},get supportsPerformanceEntries(){return"performance"in window&&"function"==typeof window.performance.getEntriesByType},get supportsSendBeacon(){return void 0!==window.navigator.sendBeacon},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var e=window.navigator.language;return!e&&window.navigator.languages.length>0&&([e]=window.navigator.languages),e},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};r(4237);const u="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function l(e){return e&&e.Math==Math?e:void 0}const d="object"==typeof globalThis&&l(globalThis)||"object"==typeof window&&l(window)||"object"==typeof self&&l(self)||"object"==typeof r.g&&l(r.g)||function(){return this}()||{};function h(){return d}function p(e,t,r){const n=r||d,i=n.__SENTRY__=n.__SENTRY__||{};return i[e]||(i[e]=t())}const f=["debug","info","warn","error","log","assert","trace"],g={};function v(e){if(!("console"in d))return e();const t=d.console,r={},n=Object.keys(g);n.forEach((e=>{const n=g[e];r[e]=t[e],t[e]=n}));try{return e()}finally{n.forEach((e=>{t[e]=r[e]}))}}const m=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return u?f.forEach((r=>{t[r]=(...t)=>{e&&v((()=>{d.console[r](`Sentry Logger [${r}]:`,...t)}))}})):f.forEach((e=>{t[e]=()=>{}})),t}(),y=Object.prototype.toString;function E(e){switch(y.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return P(e,Error)}}function _(e,t){return y.call(e)===`[object ${t}]`}function b(e){return _(e,"ErrorEvent")}function I(e){return _(e,"DOMError")}function S(e){return _(e,"String")}function O(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function w(e){return null===e||O(e)||"object"!=typeof e&&"function"!=typeof e}function C(e){return _(e,"Object")}function A(e){return"undefined"!=typeof Event&&P(e,Event)}function T(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function P(e,t){try{return e instanceof t}catch(e){return!1}}function N(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const R=h();function D(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,i=[];let o=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&o++<n&&(u=L(r,l),!("html"===u||o>1&&s+i.length*c+u.length>=d));)i.push(u),s+=u.length,r=r.parentNode;return i.reverse().join(a)}catch(e){return"<unknown>"}}function L(e,t){const r=e,n=[];let i,o,s,a,c;if(!r||!r.tagName)return"";if(R.HTMLElement&&r instanceof HTMLElement&&r.dataset&&r.dataset.sentryComponent)return r.dataset.sentryComponent;n.push(r.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>r.getAttribute(e))).map((e=>[e,r.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else if(r.id&&n.push(`#${r.id}`),i=r.className,i&&S(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)n.push(`.${o[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)s=l[c],a=r.getAttribute(s),a&&n.push(`[${s}="${a}"]`);return n.join("")}function x(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function k(e,t){if(!Array.isArray(e))return"";const r=[];for(let t=0;t<e.length;t++){const n=e[t];try{N(n)?r.push("[VueViewModel]"):r.push(String(n))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function M(e,t=[],r=!1){return t.some((t=>function(e,t,r=!1){return!!S(e)&&(_(t,"RegExp")?t.test(e):!!S(t)&&(r?e===t:e.includes(t)))}(e,t,r)))}function j(e,t,r){if(!(t in e))return;const n=e[t],i=r(n);"function"==typeof i&&H(i,n),e[t]=i}function U(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(r){u&&m.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function H(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,U(e,"__sentry_original__",t)}catch(e){}}function B(e){return e.__sentry_original__}function F(e){if(E(e))return{message:e.message,name:e.name,stack:e.stack,...V(e)};if(A(e)){const t={type:e.type,target:q(e.target),currentTarget:q(e.currentTarget),...V(e)};return"undefined"!=typeof CustomEvent&&P(e,CustomEvent)&&(t.detail=e.detail),t}return e}function q(e){try{return"undefined"!=typeof Element&&P(e,Element)?D(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function V(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function G(e){return z(e,new Map)}function z(e,t){if(function(e){if(!C(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const r=t.get(e);if(void 0!==r)return r;const n={};t.set(e,n);for(const r of Object.keys(e))void 0!==e[r]&&(n[r]=z(e[r],t));return n}if(Array.isArray(e)){const r=t.get(e);if(void 0!==r)return r;const n=[];return t.set(e,n),e.forEach((e=>{n.push(z(e,t))})),n}return e}function $(){const e=d,t=e.crypto||e.msCrypto;let r=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(r=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&r())>>e/4).toString(16)))}function W(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Y(e){const{message:t,event_id:r}=e;if(t)return t;const n=W(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function K(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function X(e,t){const r=W(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};r.mechanism.data=e}}function J(e){if(e&&e.__sentry_captured__)return!0;try{U(e,"__sentry_captured__",!0)}catch(e){}return!1}const Z="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var Q;function ee(e){return new re((t=>{t(e)}))}function te(e){return new re(((t,r)=>{r(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(Q||(Q={}));class re{constructor(e){re.prototype.__init.call(this),re.prototype.__init2.call(this),re.prototype.__init3.call(this),re.prototype.__init4.call(this),this._state=Q.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new re(((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new re(((t,r)=>{let n,i;return this.then((t=>{i=!1,n=t,e&&e()}),(t=>{i=!0,n=t,e&&e()})).then((()=>{i?r(n):t(n)}))}))}__init(){this._resolve=e=>{this._setResult(Q.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Q.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Q.PENDING&&(T(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Q.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Q.RESOLVED&&e[1](this._value),this._state===Q.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function ne(){return p("globalEventProcessors",(()=>[]))}function ie(e){ne().push(e)}function oe(e,t,r,n=0){return new re(((i,o)=>{const s=e[n];if(null===t||"function"!=typeof s)i(t);else{const a=s({...t},r);Z&&s.id&&null===a&&m.log(`Event processor "${s.id}" dropped event`),T(a)?a.then((t=>oe(e,t,r,n+1).then(i))).then(null,o):oe(e,a,r,n+1).then(i).then(null,o)}}))}function se(){return Date.now()/1e3}const ae=function(){const{performance:e}=d;if(!e||!e.now)return se;const t=Date.now()-e.now(),r=null==e.timeOrigin?t:e.timeOrigin;return()=>(r+e.now())/1e3}();let ce;(()=>{const{performance:e}=d;if(!e||!e.now)return void(ce="none");const t=36e5,r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):t,o=i<t,s=e.timing&&e.timing.navigationStart,a="number"==typeof s?Math.abs(s+r-n):t;o||a<t?i<=a?(ce="timeOrigin",e.timeOrigin):ce="navigationStart":ce="dateNow"})();const ue="production";function le(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ae(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:$()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}const de=/\(error: (.*)\)/,he=/captureMessage|captureException/;const pe="<anonymous>";function fe(e){try{return e&&"function"==typeof e&&e.name||pe}catch(e){return pe}}function ge(e,t=100,r=1/0){try{return me("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function ve(e,t=3,r=102400){const n=ge(e,t);return i=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?ve(e,t-1,r):n;var i}function me(e,t,n=1/0,i=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}()){const[s,a]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(c=t)||c==c))return t;var c;const u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==r.g&&t===r.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(N(t))return"[VueViewModel]";if(function(e){return C(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${fe(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return u.replace("object ","");if(s(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return me("",d.toJSON(),l-1,i,o)}catch(e){}const h=Array.isArray(t)?[]:{};let p=0;const f=F(t);for(const e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(p>=i){h[e]="[MaxProperties ~]";break}const t=f[e];h[e]=me(e,t,l-1,i,o),p++}return a(t),h}function ye(e){const{spanId:t,traceId:r}=e.spanContext(),{data:n,op:i,parent_span_id:o,status:s,tags:a,origin:c}=Ee(e);return G({data:n,op:i,parent_span_id:o,span_id:t,status:s,tags:a,trace_id:r,origin:c})}function Ee(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}const _e=new WeakMap;const be=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Ie(e,t){return Be().captureEvent(e,t)}function Se(e,t){Be().addBreadcrumb(e,t)}function Oe(){return Be().getClient()}function we(e){return e.transaction}function Ce(e,t,r){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=r&&r.getUser()||{},s=G({environment:n.environment||ue,release:n.release,user_segment:o,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",s),s}function Ae(e){const t=Oe();if(!t)return{};const r=Ce(Ee(e).trace_id||"",t,Be().getScope()),n=we(e);if(!n)return r;const i=n&&n._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:o,source:s}=n.metadata;null!=o&&(r.sample_rate=`${o}`);const a=Ee(n);return s&&"url"!==s&&(r.transaction=a.description),r.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}(n)),t.emit&&t.emit("createDsc",r),r}function Te(e,t){const{fingerprint:r,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:r,tags:n,user:i,contexts:o,level:s,transactionName:a}=t,c=G(r);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=G(n);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=G(i);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=G(o);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),s&&(e.level=s),a&&(e.transaction=a)}(e,t),n&&function(e,t){e.contexts={trace:ye(t),...e.contexts};const r=we(t);if(r){e.sdkProcessingMetadata={dynamicSamplingContext:Ae(t),...e.sdkProcessingMetadata};const n=Ee(r).description;n&&(e.tags={transaction:n,...e.tags})}}(e,n),function(e,t){var r;e.fingerprint=e.fingerprint?(r=e.fingerprint,Array.isArray(r)?r:[r]):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function Pe(e,t){const{extra:r,tags:n,user:i,contexts:o,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:h,transactionName:p,span:f}=t;Ne(e,"extra",r),Ne(e,"tags",n),Ne(e,"user",i),Ne(e,"contexts",o),Ne(e,"sdkProcessingMetadata",a),s&&(e.level=s),p&&(e.transactionName=p),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...h}}function Ne(e,t,r){if(r&&Object.keys(r).length){e[t]={...e[t]};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[t][n]=r[n])}}let Re;class De{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Le()}static clone(e){return e?e.clone():new De}clone(){const e=new De;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&le(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof De){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(C(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Le(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:se(),...e},i=this._breadcrumbs;return i.push(n),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:r,_tags:n,_extra:i,_user:o,_level:s,_fingerprint:a,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:h}=this;return{breadcrumbs:e,attachments:t,contexts:r,tags:n,extra:i,user:o,level:s,fingerprint:a||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:h}}applyToEvent(e,t={},r=[]){return Te(e,this.getScopeData()),oe([...r,...ne(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t&&t.event_id?t.event_id:$();if(!this._client)return m.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},this),r}captureMessage(e,t,r){const n=r&&r.event_id?r.event_id:$();if(!this._client)return m.warn("No client configured on scope - will not capture message!"),n;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},this),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:$();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(m.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function Le(){return{traceId:$(),spanId:$().substring(16)}}const xe="7.120.3",ke=parseFloat(xe),Me=100;class je{constructor(e,t,r,n=ke){let i,o;this._version=n,t?i=t:(i=new De,i.setClient(e)),r?o=r:(o=new De,o.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();let r;try{r=e(t)}catch(e){throw this.popScope(),e}return T(r)?r.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:$(),n=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:n,...t,event_id:r}),r}captureMessage(e,t,r){const n=this._lastEventId=r&&r.event_id?r.event_id:$(),i=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n}),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:$();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...t,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Me}=n.getOptions&&n.getOptions()||{};if(o<=0)return;const s={timestamp:se(),...e},a=i?v((()=>i(s,t))):s;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=He(this);try{e(this)}finally{He(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Z&&m.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);return Z&&!r&&(this.getClient()?m.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):m.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e){let t={};"ok"===e.status&&(t={status:"exited"}),le(e,t)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:n,environment:i=ue}=r&&r.getOptions()||{},{userAgent:o}=d.navigator||{},s=function(e){const t=ae(),r={sid:$(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return G({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(r)};return e&&le(r,e),r}({release:n,environment:i,user:t.getUser(),...o&&{userAgent:o},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&le(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_callExtensionMethod(e,...t){const r=Ue().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);Z&&m.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Ue(){return d.__SENTRY__=d.__SENTRY__||{extensions:{},hub:void 0},d}function He(e){const t=Ue(),r=Fe(t);return qe(t,e),r}function Be(){const e=Ue();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Ue()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!Fe(e).isOlderThan(ke)||qe(e,new je),Fe(e);var t}(e)}function Fe(e){return p("hub",(()=>new je),e)}function qe(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const Ve=[];function Ge(e,t){for(const r of t)r&&r.afterAllSetup&&r.afterAllSetup(e)}function ze(e,t,r){if(r[t.name])Z&&m.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===Ve.indexOf(t.name)&&(t.setupOnce(ie,Be),Ve.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,n)=>r(t,n,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign(((t,n)=>r(t,n,e)),{id:t.name});e.addEventProcessor(n)}Z&&m.log(`Integration installed: ${t.name}`)}}function $e(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}const We=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Ye=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Ke="InboundFilters",Xe=(e={})=>({name:Ke,setupOnce(){},processEvent(t,r,n){const i=n.getOptions(),o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:We],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Ye],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(Z&&m.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Y(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let r;e.message&&t.push(e.message);try{r=e.exception.values[e.exception.values.length-1]}catch(e){}return r&&r.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`)),Z&&0===t.length&&m.error(`Could not extract message for event ${Y(e)}`),t}(e).some((e=>M(e,t)))}(e,t.ignoreErrors)?(Z&&m.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Y(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const r=e.transaction;return!!r&&M(r,t)}(e,t.ignoreTransactions)?(Z&&m.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Y(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const r=Ze(e);return!!r&&M(r,t)}(e,t.denyUrls)?(Z&&m.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Y(e)}.\nUrl: ${Ze(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const r=Ze(e);return!r||M(r,t)}(e,t.allowUrls)&&(Z&&m.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Y(e)}.\nUrl: ${Ze(e)}`),!0)}(t,o)?null:t}}),Je=$e(Ke,Xe);function Ze(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return Z&&m.error(`Cannot extract url for event ${Y(e)}`),null}}let Qe;const et="FunctionToString",tt=new WeakMap,rt=()=>({name:et,setupOnce(){Qe=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=B(this),r=tt.has(Oe())&&void 0!==t?t:this;return Qe.apply(r,e)}}catch(e){}},setup(e){tt.set(e,!0)}}),nt=$e(et,rt),it={},ot={};function st(e,t){it[e]=it[e]||[],it[e].push(t)}function at(e,t){ot[e]||(t(),ot[e]=!0)}function ct(e,t){const r=e&&it[e];if(r)for(const n of r)try{n(t)}catch(t){u&&m.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${fe(n)}\nError:`,t)}}function ut(){"console"in d&&f.forEach((function(e){e in d.console&&j(d.console,e,(function(t){return g[e]=t,function(...t){ct("console",{args:t,level:e});const r=g[e];r&&r.apply(d.console,t)}}))}))}const lt=d;let dt,ht,pt;function ft(){if(!lt.document)return;const e=ct.bind(null,"dom"),t=gt(e,!0);lt.document.addEventListener("click",t,!1),lt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const r=lt[t]&&lt[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(j(r,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{const n=this,o=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},s=o[r]=o[r]||{refCount:0};if(!s.handler){const n=gt(e);s.handler=n,t.call(this,r,n,i)}s.refCount++}catch(e){}return t.call(this,r,n,i)}})),j(r,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this,i=r.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete r.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}function gt(e,t=!1){return r=>{if(!r||r._sentryCaptured)return;const n=function(e){try{return e.target}catch(e){return null}}(r);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(r.type,n))return;U(r,"_sentryCaptured",!0),n&&!n._sentryId&&U(n,"_sentryId",$());const i="keypress"===r.type?"input":r.type;(function(e){if(e.type!==ht)return!1;try{if(!e.target||e.target._sentryId!==pt)return!1}catch(e){}return!0})(r)||(e({event:r,name:i,global:t}),ht=r.type,pt=n?n._sentryId:void 0),clearTimeout(dt),dt=lt.setTimeout((()=>{pt=void 0,ht=void 0}),1e3)}}const vt=d,mt="__sentry_xhr_v3__";function yt(){if(!vt.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;j(e,"open",(function(e){return function(...t){const r=Date.now(),n=S(t[0])?t[0].toUpperCase():void 0,i=function(e){if(S(e))return e;try{return e.toString()}catch(e){}}(t[1]);if(!n||!i)return e.apply(this,t);this[mt]={method:n,url:i,request_headers:{}},"POST"===n&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const e=this[mt];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}ct("xhr",{args:[n,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?j(this,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(this,t)}})):this.addEventListener("readystatechange",o),j(this,"setRequestHeader",(function(e){return function(...t){const[r,n]=t,i=this[mt];return i&&S(r)&&S(n)&&(i.request_headers[r.toLowerCase()]=n),e.apply(this,t)}})),e.apply(this,t)}})),j(e,"send",(function(e){return function(...t){const r=this[mt];return r?(void 0!==t[0]&&(r.body=t[0]),ct("xhr",{args:[r.method,r.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)):e.apply(this,t)}}))}const Et=h();function _t(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function bt(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Et))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(_t(Et.fetch))return!0;let e=!1;const t=Et.document;if(t&&"function"==typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=_t(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){u&&m.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&j(d,"fetch",(function(e){return function(...t){const{method:r,url:n}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,r]=e;return{url:St(t),method:It(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:St(t),method:It(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:r,url:n},startTimestamp:Date.now()};return ct("fetch",{...i}),e.apply(d,t).then((e=>(ct("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw ct("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}))}function It(e,t){return!!e&&"object"==typeof e&&!!e[t]}function St(e){return"string"==typeof e?e:e?It(e,"url")?e.url:e.toString?e.toString():"":""}const Ot=h(),wt=d;let Ct;function At(){if(!function(){const e=Ot.chrome,t=e&&e.app&&e.app.runtime,r="history"in Ot&&!!Ot.history.pushState&&!!Ot.history.replaceState;return!t&&r}())return;const e=wt.onpopstate;function t(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const e=Ct,t=String(r);Ct=t,ct("history",{from:e,to:t})}return e.apply(this,t)}}wt.onpopstate=function(...t){const r=wt.location.href,n=Ct;if(Ct=r,ct("history",{from:n,to:r}),e)try{return e.apply(this,t)}catch(e){}},j(wt.history,"pushState",t),j(wt.history,"replaceState",t)}const Tt=["fatal","error","warning","log","info","debug"];function Pt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}const Nt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Rt=d;let Dt=0;function Lt(){return Dt>0}function xt(e,t={},r){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(B(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);const i=n.map((e=>xt(e,t)));return e.apply(this,i)}catch(e){throw Dt++,setTimeout((()=>{Dt--})),function(...e){const t=Be();if(2===e.length){const[r,n]=e;return r?t.withScope((()=>(t.getStackTop().scope=r,n(r)))):t.withScope(n)}t.withScope(e[0])}((r=>{var i;r.addEventProcessor((e=>(t.mechanism&&(K(e,void 0,void 0),X(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),i=e,Be().captureException(i,function(e){if(e)return function(e){return e instanceof De||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>be.includes(e)))}(e)?{captureContext:e}:e}(undefined))})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}H(n,e),U(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}const kt="Breadcrumbs",Mt=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:kt,setupOnce(){},setup(e){var r;t.console&&function(e){const t="console";st(t,e),at(t,ut)}(function(e){return function(t){if(Oe()!==e)return;const r={category:"console",data:{arguments:t.args,logger:"console"},level:(n=t.level,"warn"===n?"warning":Tt.includes(n)?n:"log"),message:k(t.args," ")};var n;if("assert"===t.level){if(!1!==t.args[0])return;r.message=`Assertion failed: ${k(t.args.slice(1)," ")||"console.assert"}`,r.data.arguments=t.args.slice(1)}Se(r,{input:t.args,level:t.level})}}(e)),t.dom&&(r=function(e,t){return function(r){if(Oe()!==e)return;let n,i,o="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>1024&&(Nt&&m.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=1024),"string"==typeof o&&(o=[o]);try{const e=r.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;n=D(t,{keyAttrs:o,maxStringLength:s}),i=function(e){if(!R.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}(t)}catch(e){n="<unknown>"}if(0===n.length)return;const a={category:`ui.${r.name}`,message:n};i&&(a.data={"ui.component_name":i}),Se(a,{event:r.event,name:r.name,global:r.global})}}(e,t.dom),st("dom",r),at("dom",ft)),t.xhr&&function(e){st("xhr",e),at("xhr",yt)}(function(e){return function(t){if(Oe()!==e)return;const{startTimestamp:r,endTimestamp:n}=t,i=t.xhr[mt];if(!r||!n||!i)return;const{method:o,url:s,status_code:a,body:c}=i;Se({category:"xhr",data:{method:o,url:s,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:r,endTimestamp:n})}}(e)),t.fetch&&function(e){const t="fetch";st(t,e),at(t,bt)}(function(e){return function(t){if(Oe()!==e)return;const{startTimestamp:r,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error)Se({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:r,endTimestamp:n});else{const e=t.response;Se({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:r,endTimestamp:n})}}}(e)),t.history&&function(e){const t="history";st(t,e),at(t,At)}(function(e){return function(t){if(Oe()!==e)return;let r=t.from,n=t.to;const i=Pt(Rt.location.href);let o=r?Pt(r):void 0;const s=Pt(n);o&&o.path||(o=i),i.protocol===s.protocol&&i.host===s.host&&(n=s.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),Se({category:"navigation",data:{from:r,to:n}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Oe()===e&&Se({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Y(t)},{event:t})}}(e))}}},jt=$e(kt,Mt),Ut="Dedupe",Ht=()=>{let e;return{name:Ut,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){return!!t&&(!!function(e,t){const r=e.message,n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!qt(e,t)&&!!Ft(e,t))))}(e,t)||!!function(e,t){const r=Vt(t),n=Vt(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!qt(e,t)&&!!Ft(e,t)))}(e,t))}(t,e))return Nt&&m.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},Bt=$e(Ut,Ht);function Ft(e,t){let r=Gt(e),n=Gt(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],i=r[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function qt(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(e){return!1}}function Vt(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Gt(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}let zt=null;function $t(){zt=d.onerror,d.onerror=function(e,t,r,n,i){return ct("error",{column:n,error:i,line:r,msg:e,url:t}),!(!zt||zt.__SENTRY_LOADER__)&&zt.apply(this,arguments)},d.onerror.__SENTRY_INSTRUMENTED__=!0}let Wt=null;function Yt(){Wt=d.onunhandledrejection,d.onunhandledrejection=function(e){return ct("unhandledrejection",e),!(Wt&&!Wt.__SENTRY_LOADER__)||Wt.apply(this,arguments)},d.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Kt(e,t){const r=Jt(e,t),n={type:t&&t.name,value:Qt(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function Xt(e,t){return{exception:{values:[Kt(e,t)]}}}function Jt(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Zt.test(e.message))return 1}return 0}(t);try{return e(r,n)}catch(e){}return[]}const Zt=/Minified React error #\d+;/i;function Qt(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function er(e,t,r,n,i){let o;if(b(t)&&t.error)return Xt(e,t.error);if(I(t)||_(t,"DOMException")){const i=t;if("stack"in t)o=Xt(e,t);else{const t=i.name||(I(i)?"DOMError":"DOMException"),s=i.message?`${t}: ${i.message}`:t;o=tr(e,s,r,n),K(o,s)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return E(t)?Xt(e,t):C(t)||A(t)?(o=function(e,t,r,n){const i=Oe(),o=i&&i.getOptions().normalizeDepth,s={exception:{values:[{type:A(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:rr(t,{isUnhandledRejection:n})}]},extra:{__serialized__:ve(t,o)}};if(r){const t=Jt(e,r);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,r,i),X(o,{synthetic:!0}),o):(o=tr(e,t,r,n),K(o,`${t}`,void 0),X(o,{synthetic:!0}),o)}function tr(e,t,r,n){const i={};if(n&&r){const n=Jt(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]})}if(O(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return i.logentry={message:e,params:r},i}return i.message=t,i}function rr(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(F(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return x(r[0],t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:x(n,t)}return""}(e),n=t?"promise rejection":"exception";return b(e)?`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``:A(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}const nr="GlobalHandlers",ir=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:nr,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(e){!function(){const t="error";st(t,(t=>{const{stackParser:r,attachStacktrace:n}=cr();if(Oe()!==e||Lt())return;const{msg:i,url:o,line:s,column:a,error:c}=t,u=void 0===c&&S(i)?function(e,t,r,n){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=b(e)?e.message:e,s="Error";const a=o.match(i);a&&(s=a[1],o=a[2]);return sr({exception:{values:[{type:s,value:o}]}},t,r,n)}(i,o,s,a):sr(er(r,c||i,void 0,n,!1),o,s,a);u.level="error",Ie(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})),at(t,$t)}()}(e),ar("onerror")),t.onunhandledrejection&&(function(e){!function(){const t="unhandledrejection";st(t,(t=>{const{stackParser:r,attachStacktrace:n}=cr();if(Oe()!==e||Lt())return;const i=function(e){if(w(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),o=w(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:er(r,i,void 0,n,!0);o.level="error",Ie(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})),at(t,Yt)}()}(e),ar("onunhandledrejection"))}}},or=$e(nr,ir);function sr(e,t,r,n){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(n,10))?void 0:n,l=isNaN(parseInt(r,10))?void 0:r,d=S(t)&&t.length>0?t:function(){try{return R.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function ar(e){Nt&&m.log(`Global Handler attached: ${e}`)}function cr(){const e=Oe();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const ur="HttpContext",lr=()=>({name:ur,setupOnce(){},preprocessEvent(e){if(!Rt.navigator&&!Rt.location&&!Rt.document)return;const t=e.request&&e.request.url||Rt.location&&Rt.location.href,{referrer:r}=Rt.document||{},{userAgent:n}=Rt.navigator||{},i={...e.request&&e.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}),dr=$e(ur,lr);function hr(e,t,r=250,n,i,o,s){if(!(o.exception&&o.exception.values&&s&&P(s.originalException,Error)))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,u;a&&(o.exception.values=(c=pr(e,t,i,s.originalException,n,o.exception.values,a,0),u=r,c.map((e=>(e.value&&(e.value=x(e.value,u)),e)))))}function pr(e,t,r,n,i,o,s,a){if(o.length>=r+1)return o;let c=[...o];if(P(n[i],Error)){fr(s,a);const o=e(t,n[i]),u=c.length;gr(o,i,u,a),c=pr(e,t,r,n[i],i,[o,...c],o,u)}return Array.isArray(n.errors)&&n.errors.forEach(((n,o)=>{if(P(n,Error)){fr(s,a);const u=e(t,n),l=c.length;gr(u,`errors[${o}]`,l,a),c=pr(e,t,r,n,i,[u,...c],u,l)}})),c}function fr(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function gr(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:n}}const vr="LinkedErrors",mr=(e={})=>{const t=e.limit||5,r=e.key||"cause";return{name:vr,setupOnce(){},preprocessEvent(e,n,i){const o=i.getOptions();hr(Kt,o.stackParser,o.maxValueLength,r,t,e,n)}}},yr=$e(vr,mr),Er=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],_r="TryCatch",br=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:_r,setupOnce(){t.setTimeout&&j(Rt,"setTimeout",Sr),t.setInterval&&j(Rt,"setInterval",Sr),t.requestAnimationFrame&&j(Rt,"requestAnimationFrame",Or),t.XMLHttpRequest&&"XMLHttpRequest"in Rt&&j(XMLHttpRequest.prototype,"send",wr);const e=t.eventTarget;e&&(Array.isArray(e)?e:Er).forEach(Cr)}}},Ir=$e(_r,br);function Sr(e){return function(...t){const r=t[0];return t[0]=xt(r,{mechanism:{data:{function:fe(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Or(e){return function(t){return e.apply(this,[xt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:fe(e)},handled:!1,type:"instrument"}})])}}function wr(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&j(r,e,(function(t){const r={mechanism:{data:{function:e,handler:fe(t)},handled:!1,type:"instrument"}},n=B(t);return n&&(r.mechanism.data.handler=fe(n)),xt(t,r)}))})),e.apply(this,t)}}function Cr(e){const t=Rt,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(j(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=xt(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:fe(n),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[r,xt(n,{mechanism:{data:{function:"addEventListener",handler:fe(n),target:e},handled:!1,type:"instrument"}}),i])}})),j(r,"removeEventListener",(function(e){return function(t,r,n){const i=r;try{const r=i&&i.__sentry_wrapped__;r&&e.call(this,t,r,n)}catch(e){}return e.call(this,t,i,n)}})))}const Ar=[Xe(),rt(),br(),Mt(),ir(),mr(),Ht(),lr()];function Tr(e,t){const r={type:t.name||t.constructor.name,value:t.message},n=function(e,t){return e(t.stack||"",1)}(e,t);return n.length&&(r.stacktrace={frames:n}),r}const Pr="LinkedErrors",Nr=$e(Pr,((e={})=>{const t=e.limit||5,r=e.key||"cause";return{name:Pr,setupOnce(){},preprocessEvent(e,n,i){const o=i.getOptions();hr(Tr,o.stackParser,o.maxValueLength,r,t,e,n)}}})),Rr=n;let Dr={};Rt.Sentry&&Rt.Sentry.Integrations&&(Dr=Rt.Sentry.Integrations);const Lr={...Dr,...Rr,...i},xr="?";function kr(e,t,r,n){const i={filename:e,function:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const Mr=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,jr=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ur=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Hr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Br=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Fr=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0)=>{const n=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=de.test(r)?r.replace(de,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){n.push(t);break}}if(n.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),he.test(t[t.length-1].function||"")&&(t.pop(),he.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(n)}}([30,e=>{const t=Mr.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=jr.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,r]=qr(t[1]||xr,t[2]);return kr(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Ur.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Hr.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||xr;return[r,e]=qr(r,e),kr(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Br.exec(e);return t?kr(t[2],t[1]||xr,+t[3],t[4]?+t[4]:void 0):void 0}]),qr=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:xr,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class Vr extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const Gr=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function zr(e,t=!1){const{host:r,path:n,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n?`${n}/`:n}${s}`}function $r(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Wr(e,t=[]){return[e,t]}function Yr(e,t){const[r,n]=e;return[r,[...n,t]]}function Kr(e,t){const r=e[1];for(const e of r)if(t(e,e[0].type))return!0;return!1}function Xr(e,t){return(t||new TextEncoder).encode(e)}function Jr(e,t){const[r,n]=e;let i=JSON.stringify(r);function o(e){"string"==typeof i?i="string"==typeof e?i+e:[Xr(i,t),e]:i.push("string"==typeof e?Xr(e,t):e)}for(const e of n){const[t,r]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)o(r);else{let e;try{e=JSON.stringify(r)}catch(t){e=JSON.stringify(ge(r))}o(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(i)}function Zr(e,t){const r="string"==typeof e.data?Xr(e.data,t):e.data;return[G({type:"attachment",length:r.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),r]}const Qr={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function en(e){return Qr[e]}function tn(e){if(!e||!e.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function rn(e,t,r=function(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return te(new Vr("Not adding Promise because buffer limit was reached."));const i=n();return-1===t.indexOf(i)&&t.push(i),i.then((()=>r(i))).then(null,(()=>r(i).then(null,(()=>{})))),i},drain:function(e){return new re(((r,n)=>{let i=t.length;if(!i)return r(!0);const o=setTimeout((()=>{e&&e>0&&r(!1)}),e);t.forEach((e=>{ee(e).then((()=>{--i||(clearTimeout(o),r(!0))}),n)}))}))}}}(e.bufferSize||30)){let n={};function i(i){const o=[];if(Kr(i,((t,r)=>{const i=en(r);if(function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)){const n=nn(t,r);e.recordDroppedEvent("ratelimit_backoff",i,n)}else o.push(t)})),0===o.length)return ee();const s=Wr(i[0],o),a=t=>{Kr(s,((r,n)=>{const i=nn(r,n);e.recordDroppedEvent(t,en(n),i)}))};return r.add((()=>t({body:Jr(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Z&&m.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=function(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},o=r&&r["x-sentry-rate-limits"],s=r&&r["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,r,,,o]=e.split(":",5),s=parseInt(t,10),a=1e3*(isNaN(s)?60:s);if(r)for(const e of r.split(";"))"metric_bucket"===e&&o&&!o.split(";").includes("custom")||(i[e]=n+a);else i.all=n+a}else s?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?6e4:n-t}(s,n):429===t&&(i.all=n+6e4);return i}(n,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Vr)return Z&&m.error("Skipped sending event because buffer is full."),a("queue_overflow"),ee();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>r.drain(e)}}function nn(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let on;function sn(e,t=function(){if(on)return on;if(_t(Rt.fetch))return on=Rt.fetch.bind(Rt);const e=Rt.document;let t=Rt.fetch;if(e&&"function"==typeof e.createElement)try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r);const n=r.contentWindow;n&&n.fetch&&(t=n.fetch),e.head.removeChild(r)}catch(e){Nt&&m.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return on=t.bind(Rt)}()){let r=0,n=0;return rn(e,(function(i){const o=i.body.length;r+=o,n++;const s={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return on=void 0,r-=o,n--,te(e)}}))}function an(e,t={}){const r="string"==typeof t?t:t.tunnel,n="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return r||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");var r}(e,n)}`}const cn="Not capturing exception because it's already been captured.";class un{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=Gr.exec(e);if(!t)return void v((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[r,n,i="",o,s="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return $r({host:o,pass:i,path:c,projectId:u,port:s,protocol:r,publicKey:n})}(e):$r(e);if(t&&function(e){if(!u)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(m.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(m.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(m.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(m.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}(e.dsn):Z&&m.warn("No DSN provided, client will not send events."),this._dsn){const t=an(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){if(J(e))return void(Z&&m.log(cn));let n=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,r))).then((e=>{n=e}))),n}captureMessage(e,t,r,n){let i=r&&r.event_id;const o=O(e)?e:String(e),s=w(e)?this.eventFromMessage(o,t,r):this.eventFromException(e,r);return this._process(s.then((e=>this._captureEvent(e,r,n))).then((e=>{i=e}))),i}captureEvent(e,t,r){if(t&&t.originalException&&J(t.originalException))return void(Z&&m.log(cn));let n=t&&t.event_id;const i=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,i||r).then((e=>{n=e}))),n}captureSession(e){"string"!=typeof e.release?Z&&m.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),le(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((r=>t.flush(e).then((e=>r&&e))))):ee(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Z&&m.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];ze(this,e,this._integrations),t||Ge(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=function(e,t,r,n){const i=tn(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r&&r.sdk);const s=function(e,t,r,n){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:zr(n)},...i&&{trace:G({...i})}}}(e,i,n,t);return delete e.sdkProcessingMetadata,Wr(s,[[{type:o},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=Yr(r,Zr(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const n=this._sendEnvelope(r);n&&n.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,r,n){const i=tn(r);return Wr({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&t&&{dsn:zr(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const n="number"==typeof r?r:1,i=`${e}:${t}`;Z&&m.log(`Recording outcome: "${i}"${n>1?` (${n} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+n}}captureAggregateMetrics(e){Z&&m.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=function(e,t,r,n){const i={sent_at:(new Date).toISOString()};r&&r.sdk&&(i.sdk={name:r.sdk.name,version:r.sdk.version}),n&&t&&(i.dsn=zr(t));const o=function(e){const t=function(e){let t="";for(const r of e){const e=Object.entries(r.tags),n=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${r.name}@${r.unit}:${r.metric}|${r.metricType}${n}|T${r.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Wr(i,[o])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const r={};return t.forEach((t=>{t&&ze(e,t,r)})),r}(this,e),Ge(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let r=!1,n=!1;const i=t.exception&&t.exception.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(le(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new re((t=>{let r=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n=function(){return Be().getIsolationScope()}()){const i=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit("preprocessEvent",e,t),function(e,t,r,n,i,o){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||r.event_id||$(),timestamp:t.timestamp||se()},u=r.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:ue),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=x(e.message,o));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=x(s.value,o));const a=e.request;a&&a.url&&(a.url=x(a.url,o))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),void 0===t.type&&function(e,t){const r=d._sentryDebugIds;if(!r)return;let n;const i=_e.get(t);i?n=i:(n=new Map,_e.set(t,n));const o=Object.keys(r).reduce(((e,i)=>{let o;const s=n.get(i);s?o=s:(o=t(i),n.set(i,o));for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.filename){e[n.filename]=r[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(c,e.stackParser);const l=function(e,t){if(!t)return e;const r=e?e.clone():new De;return r.update(t),r}(n,r.captureContext);r.mechanism&&X(c,r.mechanism);const h=i&&i.getEventProcessors?i.getEventProcessors():[],p=(Re||(Re=new De),Re).getScopeData();o&&Pe(p,o.getScopeData()),l&&Pe(p,l.getScopeData());const f=[...r.attachments||[],...p.attachments];return f.length&&(r.attachments=f),Te(c,p),oe([...h,...ne(),...p.eventProcessors],c,r).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.keys(t).forEach((e=>{r.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof s&&s>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:ge(e.data,t,r)}})))},...e.user&&{user:ge(e.user,t,r)},...e.contexts&&{contexts:ge(e.contexts,t,r)},...e.extra&&{extra:ge(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=ge(e.contexts.trace.data,t,r))),e.spans&&(n.spans=e.spans.map((e=>{const n=Ee(e).data;return n&&(e.data=ge(n,t,r)),e}))),n}(e,s,a):e)))}(i,e,t,r,this,n).then((e=>{if(null===e)return e;const t={...n.getPropagationContext(),...r?r.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:i,parentSpanId:o,dsc:s}=t;e.contexts={trace:{trace_id:n,span_id:i,parent_span_id:o},...e.contexts};const a=s||Ce(n,this,r);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then((e=>e.event_id),(e=>{if(Z){const t=e;"log"===t.logLevel?m.log(t.message):m.warn(t)}}))}_processEvent(e,t,r){const n=this.getOptions(),{sampleRate:i}=n,o=dn(e),s=ln(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),te(new Vr(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u="replay_event"===a?"replay":a,l=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,r,l).then((r=>{if(null===r)throw this.recordDroppedEvent("event_processor",u,e),new Vr("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return r;const i=function(e,t,r){const{beforeSend:n,beforeSendTransaction:i}=e;if(ln(t)&&n)return n(t,r);if(dn(t)&&i){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(t,r)}return t}(n,r,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(T(e))return e.then((e=>{if(!C(e)&&null!==e)throw new Vr(r);return e}),(e=>{throw new Vr(`${t} rejected with ${e}`)}));if(!C(e)&&null!==e)throw new Vr(r);return e}(i,c)})).then((n=>{if(null===n){if(this.recordDroppedEvent("before_send",u,e),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new Vr(`${c} returned \`null\`, will not send event.`,"log")}const i=r&&r.getSession();if(!o&&i&&this._updateSessionFromEvent(i,n),o){const e=(n.sdkProcessingMetadata&&n.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(n.spans?n.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const s=n.transaction_info;if(o&&s&&n.transaction!==e.transaction){const e="custom";n.transaction_info={...s,source:e}}return this.sendEvent(n,t),n})).then(null,(e=>{if(e instanceof Vr)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Vr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Z&&m.error("Error while sending event:",e)}));Z&&m.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[r,n]=t.split(":");return{reason:r,category:n,quantity:e[t]}}))}}function ln(e){return void 0===e.type}function dn(e){return"transaction"===e.type}class hn extends un{constructor(e){!function(e,t,r=[t],n="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:r.map((e=>({name:`${n}:@sentry/${e}`,version:xe}))),version:xe}),e._metadata=i}(e,"browser",["browser"],Rt.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Rt.document&&Rt.document.addEventListener("visibilitychange",(()=>{"hidden"===Rt.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,r,n){const i=er(e,t,r&&r.syntheticException||void 0,n);return X(i),i.level="error",r&&r.event_id&&(i.event_id=r.event_id),ee(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",n,i){const o=tr(e,t,n&&n.syntheticException||void 0,i);return o.level=r,n&&n.event_id&&(o.event_id=n.event_id),ee(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Nt&&m.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:r,dsn:n}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!n&&{dsn:zr(n)}},o=function(e){return[{type:"user_report"},e]}(e);return Wr(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Nt&&m.log("No outcomes to send"));if(!this._dsn)return void(Nt&&m.log("No dsn provided, will not send outcomes"));Nt&&m.log("Sending outcomes:",e);const t=(r=e,Wr((n=this._options.tunnel&&zr(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:se(),discarded_events:r}]]));var r,n;this._sendEnvelope(t)}}class pn{constructor(e){this.debug=e.debug??!1;const t={debug:this.debug,dist:`${e.release.split("@")[1]}-${e.environment}`,dsn:e.dsn,environment:e.environment,integrations:[...Ar,new Lr.GlobalHandlers({onerror:e.useGlobalHandlers??!1,onunhandledrejection:e.useGlobalHandlers??!1})],release:e.release,stackParser:Fr,transport:e.transport??sn};e.beforeSend&&(t.beforeSend=e.beforeSend);const r=new hn(t),n=new De;e.initialScope&&n.update(e.initialScope),this.hub=new je(r,n),!0===e.useGlobalHandlers&&He(this.hub)}setCustomTags(e){this.hub.configureScope((t=>{Object.entries(e).forEach((([e,r])=>{t.setTag(e,r)}))}))}setUser(e){this.hub.setUser({id:e})}captureException(e,t){this.debug&&console.error("[Sentry exception]",e,t),this.hub.captureException(e,t)}addBreadcrumb(e,t){this.debug&&console.log("[Sentry Breadcrumb]",e,t),this.hub.addBreadcrumb(e,t)}}async function fn(e,t,r=new Error("Promise timeout exceeded")){let n=-1;const i=new Promise(((e,i)=>{n=window.setTimeout((()=>{i(r)}),t)})),o=await Promise.race([i,e()]);return window.clearTimeout(n),o}const gn=(e,t)=>Math.min(200*Math.pow(2,e-1)+Math.floor(1e3*Math.random()),t);class vn extends Error{constructor(e,t,r){super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,vn.prototype)}}class mn extends Error{constructor(e,t,r){super(`Invalid JSON received (status=${t}; url=${e})`),this.originalErrorMessage=r,this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,mn.prototype)}}class yn extends Error{constructor(e,t,r){super(`Network error during request (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,yn.prototype)}}function En(e,t){return{body:e,status:t.status,statusText:t.statusText}}function _n(e){const t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);for(const r in e){const n=e[r];void 0!==n&&t.set(r,n)}return t}async function bn(e,t,r=1,n=Date.now()){const i=Date.now()-n,{body:o,headers:s={},credentials:a="include",mode:c="cors",timeoutMs:u=1e4,maxAttempts:l=3,maxBackoffMs:d=32e3}=t;let h=null;void 0!==window.AbortController&&null!==window.AbortController&&(h=new window.AbortController);const p={...t,body:null!=o?JSON.stringify(o):null,credentials:a,headers:_n(s),mode:c,signal:h?h.signal:null};try{const t=await fn(window.fetch.bind(null,e,p),u,new vn(r,i,e));return await async function(e,t){let r={};const n=e.status;if(!(n<500))return En(r,e);{let i;try{return 204!==n&&(r=await e.json()),En(r,e)}catch(r){if(r instanceof Error){const n=r.toString();try{i=await e.text(),i=`${i} ${n}`}catch{i=n}throw new mn(t,e.status,i)}throw new mn(t,e.status,JSON.stringify(r))}}}(t,e)}catch(o){if(o instanceof vn)h?.abort();else{if(o instanceof mn)throw o;if(r===l)throw new yn(r,i,e)}if(r===l)throw o;const s=gn(r,d);return new Promise((i=>{setTimeout((()=>{i(bn(e,t,r+1,n))}),s)}))}}const In=function(e,t){return bn(e,{...t,method:"POST"})};var Sn,On,wn,Cn,An,Tn,Pn,Nn,Rn,Dn,Ln,xn,kn,Mn,jn,Un,Hn,Bn=null!=="production"?"production":"development",Fn="local",qn={get ANALYTICS_CLIENT_VERSION(){return"3.1.4"},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(Bn){case"production":return"squareup.com";case"sandbox":return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.PCI_CONNECT_API_HOST)},get ASSET_BASE_URL(){return function(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(Bn)},get ASSET_URL(){return this.VERSION===Fn?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CONNECT_API_URL(){return"https://connect.".concat(this.API_PUBLIC_HOST)},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return"development"!==Bn},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe.html")},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe.html")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get METRICS_ERROR_URL(){return"".concat(this.API_URL,"/payments/mtx/error")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PCI_CONNECT_API_HOST(){return"pci-connect.".concat(this.API_PUBLIC_HOST)},get SENTRY_DSN(){switch(Bn){case"test":case"development":return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe.html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},THREE_DS_AUTHENTICATE_ENDPOINT(e){return"".concat(this.VERIFICATION_ENDPOINT,"/").concat(e,"/three-ds-authentication")},get VERIFICATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/analytics/verifications")},VERIFICATION_UPDATE_ENDPOINT(e){return"".concat(this.VERIFICATION_ENDPOINT,"/").concat(e)},get VERSION(){return null!=="1.67.0"?"1.67.0":Fn},env:Bn,staticAsset(e){return"".concat(this.ASSET_URL,"/static-assets/").concat(e)}};r(7156),r(6460),r(8370),r(9170),r(1152),r(1257),r(1505),r(8304),r(7680),function(e){e.API_ERROR="API_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",e.REFUND_ERROR="REFUND_ERROR"}(Sn||(Sn={}));class Vn extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;t.length>0&&(r=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(r),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,Vn.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}class Gn extends Vn{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,Gn.prototype)}}class zn extends Vn{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,zn.prototype)}}class $n extends Vn{constructor(e,t){super("This instance of ".concat(e," is missing the ").concat(t," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,$n.prototype)}}class Wn extends Vn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,Wn.prototype)}}class Yn extends Vn{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,Yn.prototype)}}class Kn extends Vn{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,Kn.prototype)}}class Xn extends Vn{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,Xn.prototype)}}class Jn extends Vn{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,Jn.prototype)}}class Zn extends Vn{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,Zn.prototype)}toJSON(){return{errors:this.errors.map((e=>{var t={};return["name","message","type","code","token"].forEach((function(r){r in e&&(t[r]=e[r])})),t})),name:this.name}}}function Qn(e){return"type"in e&&"message"in e}class ei extends Vn{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,ei.prototype)}}class ti extends Vn{constructor(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).concat(e);super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(t.join("\n"))),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,ti.prototype)}}class ri extends Vn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,ri.prototype)}}class ni extends Vn{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,ni.prototype)}}class ii extends Vn{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,ii.prototype)}}!function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(On||(On={})),function(e){e.CARD_NUMBER="cardNumber",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.POSTAL_CODE="postalCode"}(wn||(wn={})),function(e){e.CARD_INPUT="input",e.CARD_INPUT_FOCUS="input.is-focus",e.CARD_INPUT_PLACEHOLDER="input::placeholder",e.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",e.CARD_INPUT_ERROR="input.is-error",e.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",e.CARD_COMPONENT=".input-container",e.CARD_COMPONENT_FOCUS=".input-container.is-focus",e.CARD_COMPONENT_ERROR=".input-container.is-error",e.CARD_INPUT_HELPER_TEXT=".message-text",e.CARD_INPUT_HELPER_ICON=".message-icon",e.CARD_INPUT_ERROR_TEXT=".message-text.is-error",e.CARD_INPUT_ERROR_ICON=".message-icon.is-error"}(Cn||(Cn={})),function(e){e.GIFT_CARD_NUMBER="giftCardNumber"}(An||(An={})),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(Tn||(Tn={})),function(e){e.UNKNOWN="Unknown"}(Pn||(Pn={})),function(e){e.GIFT="Gift"}(Nn||(Nn={}));class oi extends Vn{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(wn),...Object.values(An)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,oi.prototype)}}class si extends Vn{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,si.prototype)}}class ai extends Vn{constructor(e,t,r){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'.").concat(void 0!==r?" ".concat(r,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,ai.prototype)}}class ci extends Vn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,ci.prototype)}}class ui extends Vn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'accepted property: "'.concat(t,'" values are "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,ui.prototype)}}class li extends Vn{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,li.prototype)}}class di extends Vn{constructor(){super("A redirect url is always required for requests. This must also be a secure link."),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,di.prototype)}}class hi extends Vn{constructor(){super("Non function passed as shouldTokenize checker"),this.name="CashAppPayInvalidShouldTokenizeError",Object.setPrototypeOf(this,hi.prototype)}}class pi extends Vn{constructor(e,t){super("amount '".concat(e,"' in ").concat(t," is not expressed in a valid format")),this.name="InvalidCurrencyFormatError",Object.setPrototypeOf(this,pi.prototype)}}class fi extends Vn{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,fi.prototype)}}class gi extends Vn{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,gi.prototype)}}class vi extends Vn{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS and have a secure context"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,vi.prototype)}}class mi extends Vn{constructor(e,t){var r=null!=t?t:null==e?void 0:e.field;super("Method unsupported: ".concat(null==e?void 0:e.message).concat(void 0!==r?" (field=".concat(r,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,mi.prototype)}}class yi extends Vn{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,yi.prototype)}}class Ei extends Vn{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before you can call this method.")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,Ei.prototype)}}class _i extends Vn{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,_i.prototype)}}class bi extends Vn{constructor(e,t){var r=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(r," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,bi.prototype)}}class Ii extends Vn{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,Ii.prototype)}}class Si extends Vn{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,Si.prototype)}}class Oi extends Vn{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,Oi.prototype)}}class wi extends Vn{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,wi.prototype)}}class Ci extends Vn{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,Ci.prototype)}}class Ai extends Vn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,Ai.prototype)}}class Ti extends Vn{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,Ti.prototype)}}!function(e){e.ON_TOKENIZATION="ontokenization",e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(Rn||(Rn={})),function(e){e.BLACK="black",e.GREEN="mint",e.MINT="mint"}(Dn||(Dn={})),function(e){e.CheckoutWithAfterpay="checkout_with_afterpay",e.BuyNowWithAfterpay="buy_now_with_afterpay",e.PlaceOrderWithAfterpay="place_order_with_afterpay"}(Ln||(Ln={})),function(e){e.REVIEW_MY_ORDER="review_my_order",e.BUY_NOW="buy_now"}(xn||(xn={})),function(e){e.BLACK_ON_MINT="black-on-mint",e.BLACK_ON_WHITE="black-on-white",e.MINT_ON_BLACK="mint-on-black",e.WHITE_ON_BLACK="white-on-black"}(kn||(kn={})),function(e){e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg"}(Mn||(Mn={})),function(e){e.CIRCLED_INFO_ICON="circled-info-icon",e.CIRCLED_QUESTION_ICON="circled-question-icon",e.LEARN_MORE_TEXT="learn-more-text",e.MORE_INFO_TEXT="more-info-text",e.NONE="none"}(jn||(jn={})),function(e){e.MINT="mint",e.WHITE="white"}(Un||(Un={})),function(e){e.AFTERPAY_SHIPPING_ADDRESS_CHANGED="afterpay_shippingaddresschanged",e.AFTERPAY_SHIPPING_OPTION_CHANGED="afterpay_shippingoptionchanged"}(Hn||(Hn={}));var Pi,Ni,Ri,Di,Li,xi,ki,Mi,ji,Ui,Hi,Bi,Fi,qi,Vi,Gi=["borderColor","borderRadius","borderWidth"],zi=["borderColor","borderWidth"],$i=["color"],Wi=["color"];!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(Pi||(Pi={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(Ni||(Ni={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(Ri||(Ri={})),function(e){e.ROUND="round",e.SEMIROUND="semiround"}(Di||(Di={})),function(e){e.MEDIUM="medium",e.SMALL="small"}(Li||(Li={})),function(e){e.DARK="dark",e.LIGHT="light"}(xi||(xi={})),function(e){e.FULL="full",e.STATIC="static"}(ki||(ki={})),function(e){e.ONTOKENIZATION="ontokenization",e.CUSTOMER_INTERACTION="customerInteraction",e.CUSTOMER_DISMISSED="customerDismissed"}(Mi||(Mi={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}(ji||(ji={})),function(e){e.STATIC="static",e.FILL="fill"}(Ui||(Ui={})),function(e){e.LONG="long",e.SHORT="short"}(Hi||(Hi={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(Bi||(Bi={})),function(e){e.APPLE_PAY="Apple Pay",e.AFTERPAY_CLEARPAY="AfterpayClearpay",e.CARD="Card",e.GOOGLE_PAY="Google Pay",e.GIFT_CARD="Gift Card",e.ACH="ACH",e.CASH_APP_PAY="Cash App Pay"}(Fi||(Fi={})),function(e){e.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",e.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}(qi||(qi={}));class Yi{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}!function(e){e.UNKNOWN="Unknown",e.OK="OK",e.ERROR="Error",e.INVALID="Invalid",e.ABORT="Abort",e.CANCEL="Cancel"}(Vi||(Vi={}));class Ki extends Vn{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,Ki.prototype)}}class Xi extends Vn{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,Xi.prototype)}}class Ji extends Vn{constructor(){super("The Payment 'locationId' option is not in the correct format."),this.name="InvalidLocationIdError",Object.setPrototypeOf(this,Ji.prototype)}}var Zi=new RegExp(/^[\w.-]+$/i),Qi=new RegExp(/sq0at/i);function eo(e){return qn.env===e}function to(){return eo("production")}var ro=/^_/g,no=/(?!^)([A-Z])/g,io=/[\s_]+(?=[A-Za-z])/g;function oo(e){return"JPY"===e.toUpperCase()?0:2}var so,ao=function(e){return e.replace(/-/,"_")},co=function(e){return e.replace(ro,"-").replace(no," $1").replace(io,"-").toLowerCase()},uo=function(e){return Object.values(e)},lo=function(e,t){return"".concat(e,": ").concat(t,";")},ho=function(e,t){return t.some((function(t){return e instanceof t}))},po=function(e){return void 0!==e&&""!==e},fo=function(e,t,r){var n=oo(t),i=e/Math.pow(10,n);return new Intl.NumberFormat(r,{currency:t,style:"currency"}).format(i)},go=function(e,t){var r=oo(t);return(e/Math.pow(10,r)).toFixed(r)},vo=function(e,t){var r=oo(t),n="^(-?[0-9]+)";r>0&&(n="".concat(n,"(?:\\.([0-9]{1,").concat(r,"})[0-9]*)?")),n="".concat(n,"$");var i=e.match(n);if(!i)throw new pi(e,t);var[o,s,a=""]=i;if(0===r)return Number(s);var c="0".repeat(r-a.length);return Number(s+a+c)};class mo{constructor(e){this.recordErrorMetrics=!1;var t={beforeSend:(t,r)=>{var n;if(!qn.ENABLE_ERROR_LOGGING)return console.error(t.exception),null!==(n=t.exception)&&void 0!==n&&n.values&&t.exception.values.forEach((e=>{console.error(e)})),null;if(!r)return t;var i=r.originalException;if(this.recordErrorMetrics){var o=null==i?void 0:i.toString();i instanceof Error&&(o=i.stack);var s="applicationID: ".concat(e.applicationId,", url: ").concat(e.applicationUrl,", source: ").concat(e.source,", error: ").concat(o);In(qn.METRICS_ERROR_URL,{body:{error_message:s,sdk_version:qn.VERSION}}).catch((()=>{}))}return t},dsn:qn.SENTRY_DSN,environment:qn.env,release:"web-payments-sdk@".concat(qn.VERSION),transport:e.transport,useGlobalHandlers:e.useGlobalHandlers};this.browserErrorLogger=new pn(t),this.browserErrorLogger.setCustomTags({applicationId:e.applicationId,applicationUrl:e.applicationUrl,source:e.source,version:qn.VERSION})}setRecordErrorMetrics(e){this.recordErrorMetrics=e}setCustomTags(e){this.browserErrorLogger.setCustomTags(e)}setUser(e){this.browserErrorLogger.setUser(e)}addBreadcrumb(e,t){this.browserErrorLogger.addBreadcrumb(e,t)}captureException(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ho(e,[yn,vn])||(e instanceof mn&&this.browserErrorLogger.addBreadcrumb({category:"invalid json error message",message:e.originalErrorMessage}),this.browserErrorLogger.captureException(e,{captureContext:{tags:t}}))}}!function(e){e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.NOT_FOUND="NOT_FOUND",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",e.UNAUTHORIZED="UNAUTHORIZED",e.UNKNOWN="UNKNOWN"}(so||(so={}));var yo,Eo,_o={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},bo={message:"The requested resource was not found.",type:"NOT_FOUND"},Io={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},So={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},Oo={message:"Request not authorized.",type:"UNAUTHORIZED"},wo={message:"An unknown error has occurred",type:"UNKNOWN"};class Co extends Vn{constructor(e){super(e),this.name="InternalError",Object.setPrototypeOf(this,Co.prototype)}}class Ao extends Vn{constructor(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){switch(e){case 401:return Oo;case 404:return bo;case 429:return So;case 500:return _o;case 503:return Io;default:return wo}}(t);super("".concat(i.message," (message=").concat(r,"; url=").concat(e,")"),n),this.name="InternalHttpError",Object.setPrototypeOf(this,Ao.prototype)}}class To extends Vn{constructor(e,t){super("".concat(e," (payment_method=").concat(t,")")),this.name="InternalPaymentMethodError",Object.setPrototypeOf(this,To.prototype)}}class Po extends Vn{constructor(e){super(e),this.name="InvalidIframeError",Object.setPrototypeOf(this,Po.prototype)}}class No extends Vn{constructor(e,t,r){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(r,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,No.prototype)}}!function(e){e.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",e.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",e.INVALID_CVV="INVALID_CVV",e.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",e.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",e.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",e.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",e.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",e.MISSING_CARD_DATA="MISSING_CARD_DATA",e.UNKNOWN="UNKNOWN",e.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"}(yo||(yo={})),function(e){e.UNKNOWN="UNKNOWN"}(Eo||(Eo={}));var Ro={[Eo.UNKNOWN]:{message:"An unknown error has occurred",type:"UNKNOWN"}},Do={message:"An unknown error has occurred",type:"UNKNOWN"};new Set(["EXPIRED_PLAID_SESSION","INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID","DATABASE_INSIGHTS_VERIFICATION_FAILURE"]);var Lo,xo={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(e){e.INVALID_VALUE="INVALID_VALUE",e.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN"}(Lo||(Lo={}));class ko extends Vn{constructor(e){super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,ko.prototype)}}function Mo(){return new Ai([xo.UNKNOWN])}function jo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jo(Object(r),!0).forEach((function(t){Ho(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ho(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bo={HttpRequestInvalidJsonError:mn,HttpRequestNetworkError:yn,HttpRequestTimeoutError:vn,InternalError:Co,InternalHttpError:Ao,InternalPaymentMethodError:To,InternalTimeoutError:No,InternalValidationError:ko,InvalidIframeError:Po};function Fo(e){return Object.values(Bo).some((t=>e instanceof t))}var qo,Vo,Go={AfterpayAmountOutsideLimitsError:Yn,AfterpayMerchantError:Xn,AfterpayRequestError:Wn,AfterpayUnsupportedCurrencyError:Kn,BrowserNotSupportedError:gi,ElementNotFoundError:ei,InvalidCurrencyFormatError:pi,InvalidElementTypeError:bi,InvalidEventListenerCallbackError:ni,InvalidOptionError:ii,InvalidPaymentRequestError:ti,InvalidPaymentRequestUpdateError:ri,PaymentMethodUnsupportedError:mi,PlaidMissingNameError:Gn,TokenizationError:Ai,UnexpectedError:Ti,VerifyBuyerError:Zn,WebSdkEmbedError:vi},zo=Uo(Uo(Uo({},Go),Bo),{},{AfterpayInvalidPaymentRequestError:Jn,AfterpayOnTokenizeListenerError:zn,InvalidApplicationIdError:Ki,InvalidInputStylePropertyError:Si,InvalidInputStyleValueError:Oi,InvalidStylesError:Ci,PaymentMethodAlreadyAttachedError:yi,PaymentMethodAlreadyDestroyedError:_i,PaymentMethodMissingListener:$n,PaymentMethodNotAttachedError:Ei,SqError:Vn});function $o(e,t){var r={};return Object.keys(e).forEach((n=>{var i;"object"==typeof e[n]&&!Array.isArray(e[n])&&n in t?r[n]=$o(e[n],t[n]):r[n]=null!==(i=t[n])&&void 0!==i?i:e[n]})),r}!function(e){e.enUS="en-US",e.enIE="en-IE",e.enCA="en-CA",e.enGB="en-GB",e.enAU="en-AU",e.jaJP="ja-JP",e.frFR="fr-FR",e.frCA="fr-CA",e.esES="es-ES"}(Vo||(Vo={}));var Wo={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Introduce un código de seguridad válido.",expirationDateError:"Introduce una fecha de caducidad válida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código postal válido."}},helperText:{cardNumber:"Introduce tu número de tarjeta",cvv:"Introduce el código de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el código postal",GB:"Introduce el código postal",US:"Introduce el código postal"}},inputFieldTitles:{cardNumber:"Número de la tarjeta de crédito",cvv:"Código CVV",expirationDate:"Fecha de vencimiento",postalCodes:{CA:"Código postal",GB:"Código postal",US:"Código postal"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"Código CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"C.P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un número de tarjeta de regalo válido."},helperText:{giftCardNumber:"Introduce el número de tu tarjeta de regalo"},inputFieldTitles:{giftCardNumber:"Número de la tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta de regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envío que has seleccionado. Inténtalo de nuevo.",optionsError:"Se ha producido un error al procesar la opción de envío que has seleccionado. Inténtalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide.",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Veuillez saisir une date d’expiration valide.",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},inputFieldTitles:{cardNumber:"Numéro de carte bancaire",cvv:"CVV",expirationDate:"Date d’expiration",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}},placeholderText:{cardNumber:"Numéro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numéro de carte cadeau valide."},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},inputFieldTitles:{giftCardNumber:"Numéro de carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Saisir une date d’expiration valide",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},inputFieldTitles:{cardNumber:"Numéro de carte bancaire",cvv:"CVV",expirationDate:"Date d’expiration",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}},placeholderText:{cardNumber:"Numéro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numéro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},inputFieldTitles:{giftCardNumber:"Numéro de carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"無利息の4回払い",today:"今日",weeks:"週間"}},cards:{errors:{cardNumberError:"正しいカード番号を入力してください。",cvvError:"有効なセキュリティコードを入力してください。",expirationDateError:"正しい有効期限を入力してください。",multipleErrors:"強調表示されたエラーを修正してください。",postalCodeErrors:{CA:"正しい郵便番号を入力してください。",GB:"有効な郵便番号を入力してください。",US:"正しいZIPコードを入力してください。"}},helperText:{cardNumber:"カード番号を入力してください",cvv:"セキュリティコードを入力してください",expirationDate:"有効期限を入力してください",postalCodes:{CA:"郵便番号を入力してください",GB:"郵便番号を入力してください",US:"ZIPコードを入力してください"}},inputFieldTitles:{cardNumber:"クレジットカード番号",cvv:"CVV",expirationDate:"有効期限",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIPコード"}},placeholderText:{cardNumber:"カード番号",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"有効なギフトカード番号を入力してください。"},helperText:{giftCardNumber:"ギフトカード番号を入力してください"},inputFieldTitles:{giftCardNumber:"ギフトカード番号"},placeholderText:{giftCardNumber:"ギフトカード"}},wallets:{callbackErrors:{contactError:"選択された配送住所を処理する際にエラーが発生しました。もう一度やり直してください。",optionsError:"選択された配送方法を処理する際にエラーが発生しました。もう一度やり直してください。"}}}}},Yo={en:Vo.enUS,es:Vo.esES,fr:Vo.frFR,ja:Vo.jaJP},Ko=Yo.en;class Xo{constructor(e){this.currentLocale=Ko,this.currentTranslations=Wo[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var t=function(e){return e.split("-")[0]}(e),r=Jo(e),n=this.currentLocale;if(e in Wo)this.currentLocale=e;else{if(!function(e){return["en","ja","fr","es"].includes(e)}(t))return{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(r," are both unsupported."),newLocale:this.currentLocale,previousLocale:n};this.currentLocale=Yo[t]}this.currentTranslations=Wo[this.currentLocale];var i=Jo(this.currentLocale);return void 0!==r&&void 0!==i&&r.toLowerCase()!==i.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(r," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:n}:{newLocale:this.currentLocale,previousLocale:n}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?$o(this.currentTranslations,this.translationOverrides):this.currentTranslations}}function Jo(e){return e.split("-")[1]}var Zo="INVALID_VALUE",Qo=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),es=new Set(["error","shippingErrors","lineItems","total","shippingOptions","taxLineItems","shippingLineItems","discounts"]),ts=new Set([...es.values(),"eventName"]),rs=new Set(["includeInputLabels","postalCode","style"]),ns=new Set(["includeInputLabels","style"]),is=new Set(["lineItems","total","shippingOptions","shippingContact"]),os=new Set(["buttonColor","buttonSizeMode","buttonType"]),ss=new Set(["shape","size","values","theme","width"]),as=bs(Rn),cs=bs(On),us=bs(Tn),ls=bs(qi),ds=bs(wn),hs=bs(An),ps=bs(Vo),fs=bs(ji),gs=bs(Ui),vs=bs(Hi),ms=bs(Li),ys=bs(Di),Es=bs(xi),_s=bs(ki);function bs(e){return new Set(Object.values(e))}function Is(e){return JSON.stringify({value:e})}function Ss(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(e).forEach((e=>{var[o,s]=e;if(t.has(o)){var a=s;r.has(o)?a="SANITIZED":o in n&&(a=n[o].has(s)?s:Zo),i[o]=a}})),JSON.stringify(i)}function Os(e){return Ss(e,ss,void 0,{shape:ys,size:ms,theme:Es,values:Es,width:_s})}var ws=function(e,t,r){switch(e){case"CONFIGURED":case"CONFIG_UPDATED":return function(e,t){switch(e){case"Card":case"Gift Card":return function(e,t){return Ss(t,"Card"===e?rs:ns)}(e,t);case"Google Pay":return function(e){return Ss(e,os,void 0,{buttonColor:fs,buttonSizeMode:gs,buttonType:vs})}(t);case"Payment Request":return function(e){return Ss(e,Qo,is)}(t);case"Cash App Pay V1":return Os(t)}return Zo}(t,r);case"FOCUSED":return Is(function(e,t){if("string"!=typeof t)return Zo;switch(e){case"Card":if(ds.has(t))return t;break;case"Gift Card":if(hs.has(t))return t}return Zo}(t,r));case"SET_LOCALE":return Is(function(e){return"string"!=typeof e?Zo:ps.has(e)?e:Zo}(r));case"EVENT_LISTENER_ADDED":return Is(function(e,t){if("string"!=typeof t)return Zo;switch(e){case"ACH":if(as.has(t))return t;break;case"Card":if(cs.has(t))return t;break;case"Gift Card":if(us.has(t))return t;break;case"Payment Request":if(ls.has(t))return t}return Zo}(t,r));case"EVENT_LISTENER_ON_COMPLETE_RESPONSE":return function(e,t){return"Payment Request"===e?function(e){return Ss(e,ts,es,{eventName:ls})}(t):Zo}(t,r);default:return""}};function Cs(e,t){return void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function As(e,t){return Boolean(e.querySelector(t))}r(3249);var Ts=function(e){var t,r=void 0!==e.angular,n=As(e.document,"[ng-version]")||void 0!==e.getAllAngularRootElements||void 0!==e.getAngularVersion,i=void 0!==e.bootstrap,o=void 0!==e.Ember,s=void 0!==e.jQuery,a=As(e.document,'form[action*="paypal.com"]'),c=function(e){return Cs(e,(function(e){return"__k"in e||"_component"in e||"__c"in e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=As(e.document,"*[data-reactroot]");if(t)return t;return Cs(e,(function(e){return"_reactRootContainer"in e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=void 0!==e.__NUXT__||void 0!==e.$nuxt,r=void 0!==e.__VUE__;if(r||t)return r||t;return Cs(e,(function(e){return"__vue__"in e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:n,angularJS:r,bootstrap:i,ember:o,jquery:s,nextJS:void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:a,preact:c,react:u,vue:l};return Object.fromEntries(Object.entries(d).filter((e=>{var[t,r]=e;return r})))},Ps=new Set(["CLEAR","CONFIG_UPDATED","CONFIGURED","DESTROYED","DETACHED","EVENT_LISTENER_ADDED","EVENT_LISTENER_ON_COMPLETE_RESPONSE","FOCUSED","OVERRIDE_STRINGS","RECALCULATED_SIZE","SET_LOCALE","SET_ERROR"]);function Ns(e){return Ps.has(e)}var Rs=new Set(["INVALID_REDIRECT_URI","INVALID_TRANSACTION_ID","PAYMENTS_REUSE"]);function Ds(e){return Rs.has(e)}var Ls=new Set(["GET_PRODUCT_INFORMATION","LOAD","MAIN_IFRAME","NONCE"]),xs={ATTACH:!0,BUILD:!0,INITIALIZATION:!1,PROOF_OF_WORK:!1};function ks(e){return e in xs}var Ms=/[$()*+.?[\\\]^{|}]/g,js=new RegExp(Ms.source),Us=function(e){return js.test(e)?e.replace(Ms,"\\$&"):e},Hs={CARD_NONCE_ENDPOINT:new RegExp(Us(qn.CARD_NONCE_ENDPOINT)),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(Us(qn.GET_PRODUCT_INFORMATION_ENDPOINT)),LIBRARY_RESOURCE:new RegExp("".concat(Us(qn.ASSET_BASE_URL),"/([\\w\\d.-]*/)?square\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(Us(qn.ASSET_URL),"/main-iframe"))};function Bs(e,t){if(!c.supportsPerformanceEntries)return null;var r=c.windowPerformance,n=function(e,t,r){var n=e.filter((e=>e.initiatorType===t&&r.test(e.name)));return n[n.length-1]}([...r.getEntriesByType("resource"),...r.getEntriesByType("navigation")],e,t);return n?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(n)):null}var Fs=function(e){switch(e){case"GET_PRODUCT_INFORMATION":return Bs("fetch",Hs.GET_PRODUCT_INFORMATION_ENDPOINT);case"MAIN_IFRAME":return Bs("navigation",Hs.MAIN_IFRAME_RESOURCE);case"LOAD":return Bs("script",Hs.LIBRARY_RESOURCE);case"NONCE":return Bs("fetch",Hs.CARD_NONCE_ENDPOINT);default:return null}};function qs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qs(Object(r),!0).forEach((function(t){Gs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gs(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zs=qn.METRICS_URL,$s=qn.METRICS_V2_URL;function Ws(e){return Ns(e.event)}function Ys(e){return Ds(e.event)}function Ks(e){return!Ws(e)&&!Ys(e)}class Xs{constructor(e,t){this.sdkVersion=qn.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1,this.logVisibilityEvent=this.logVisibilityEvent.bind(this),this.flushAllMetrics=this.flushAllMetrics.bind(this)}setAvt(e){this.avt=e}setFeatureFlagValues(e){this.featureFlagValues=e}logEvent(e,t,r,n){try{var i=this.getMetricsLoggerBody(e,t,r,n);if(this.session=i.session,this.disableBeacon||!c.supportsSendBeacon||!c.supportsDocumentVisibilityState)return void In(zs,{body:i}).catch((e=>{this.errorLogger.captureException(e)}));this.metricsBuffer.push(i),"NONCE:OK"!==e.event&&"DESTROYED"!==e.event||this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",this.logVisibilityEvent),document.addEventListener("visibilitychange",this.flushAllMetrics),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))}catch(e){this.errorLogger.captureException(e)}}clearEventListener(){document.removeEventListener("visibilitychange",this.logVisibilityEvent),document.removeEventListener("visibilitychange",this.flushAllMetrics)}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(Ts(window))),this.jsFramework}eventDuration(e,t){var r,[n,i]=e.event.split(":");if(ks(n)){var o;if(ks(r=n)&&!xs[r]?o=n:void 0!==t&&(o="".concat(n,":").concat(t)),void 0===o)return null;if("START"===i){var s=Date.now();return this.manualTelemetryStarts[o]=s,null}if("OK"===i||"ERROR"===i){if(!(o in this.manualTelemetryStarts))return null;var a=this.manualTelemetryStarts[o];return delete this.manualTelemetryStarts[o],Date.now()-a}}return"START"!==i&&function(e){return Ls.has(e)}(n)?Fs(n):null}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon($s,e)}catch(e){e instanceof TypeError&&"Illegal invocation"===e.message||this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),In($s,{body:{metrics:this.metricsBuffer}}).catch((e=>{this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t,r){var n=Vs(Vs({},this.applicationData),{},{instanceId:e,sessionId:t});return void 0!==r&&(n.paymentMethodTrackingId=r),n}getMetricsLoggerBody(e,t,r,n){var i=function(){if(c.isTopLevelWindow)return{origin:c.windowLocation.origin,pathname:c.windowLocation.pathname};var e=c.documentReferrer;return e&&0!==e.length?(qo||(qo=document.createElement("a")),qo.href="".concat(e),{origin:qo.origin,pathname:""}):{origin:"",pathname:""}}(),o={innerHeight:c.windowInnerHeight,innerWidth:c.windowInnerWidth,isSecureContext:c.isSecureContext,language:c.windowNavigationLanguage},s=this.eventDuration(e,n),{event:a,eventSource:u}=e,{sdkVersion:l}=this,d=this.metricsSession(t,r,n),h={appLocation:i,avt:this.avt,browserData:o,event:a,eventSource:u,paymentMethodTrackingId:n,sdkVersion:l,session:d};return Ws(e)&&void 0!==e.eventConfigurationValues&&(h.eventConfigurationValues=ws(e.event,u,e.eventConfigurationValues)),Ys(e)?h.internalConfigurationValues=JSON.stringify(e.errorMessage):Ks(e)&&void 0!==this.featureFlagValues&&(h.internalConfigurationValues=JSON.stringify(this.featureFlagValues)),null!==s&&s>0&&(h.duration=s),Ks(e)&&void 0!==e.sloStatus&&(h.sloStatus=e.sloStatus),"INITIALIZATION:OK"===a&&(h.jsFramework=this.getJSFrameworkValue()),h}logVisibilityEvent(){var e={event:"visible"===c.documentVisibilityState?"VISIBILITY:VISIBLE":"VISIBILITY:HIDDEN",eventSource:"WebSDK"},t=this.getMetricsLoggerBody(e,this.session.instanceId,this.session.sessionId,this.session.paymentMethodTrackingId);this.metricsBuffer.push(t)}flushAllMetrics(){"hidden"===c.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)}}r(5372);class Js extends Error{constructor(e,t){super(e),this.name=t,this.type="VERIFY_BUYER_DEVELOPER_ERROR"}}const Zs=function(){return new Js("The Analytics library must be initialized with analyticsParameters to call verifyBuyer.","AnalyticsParametersRequiredError")},Qs=function(e,t){return new Js(`The Analytics '${e}' argument must be of type '${t}'`,"InvalidArgumentError")},ea=function(e,t){return new Js(`An element with selector ${e} must be of type '${t}'`,"InvalidElementTypeError")},ta=function(e,t,r){return new Js(`The '${e}' function '${t}' argument must be of type '${r}'.`,"InvalidFunctionArgumentError")},ra=function(e,t){return new Js(`The '${e}' '${t}' callback must be a function.`,"InvalidFunctionCallbackError")},na=function(e){return new Js(`The Analytics '${e}' argument is required.`,"MissingArgumentError")},ia=function(e,t){return new Js(`The '${e}' '${t}' is required when verificationDetails.intent is 'CHARGE'.`,"MissingChargeVerificationArgumentError")},oa=function(e,t){return new Js(`An element with selector '${e}' attribute '${t}' is required`,"MissingElementAttributeError")},sa=function(e){return new Js(`An element with selector '${e}' cannot be found.`,"MissingElementError")},aa=function(e,t){return new Js(`The '${e}' '${t}' argument is required.`,"MissingFunctionArgumentError")},ca=function(e,t){return new Js(`The '${e}' '${t}' callback is required.`,"MissingFunctionCallbackError")},ua=function(){return new Js("One of analyticsParameters.locationId or analyticsParameters.accountId must be specified.","NoIdsError")},la=function(e,t,r,n,i=!1){return new Js(`The '${e}' function '${t}' argument must be within range: ${r} and ${n} (${(i?"inclusive":"exclusive")+" of upper limit"}).`,"OutOfRangeArgumentError")},da=function(){return new Js("Only one of analyticsParameters.locationId or analyticsParameters.accountId can be specified.","TooManyIdsError")},ha=function(){const e=new Error("An unknown error has occurred");return e.name="UnexpectedAnalyticsClientError",e};class pa extends Error{constructor(e="Unknown error",t){super(e),void 0!==t&&(this.token=t),this.name="AnalyticsError"}}class fa extends pa{constructor(e){super(`The verification was not successful: ${e}`,e),this.name="VerificationError",this.type="VERIFICATION_NOT_SUCCESSFUL"}}class ga extends pa{constructor(){super("A verification request is already in progress"),this.name="VerificationInProgressError",this.type="VERIFICATION_IN_PROGRESS"}}class va extends pa{constructor(e){super(`The time to complete the verification has expired: ${e}`),this.name="VerificationTimeoutError",this.type="VERIFICATION_TIMEOUT"}}var ma,ya;!function(e){e.AUTHENTICATED="Y",e.AUTHENTICATION_ATTEMPTED="A",e.CHALLENGE_REQUIRED="C",e.DECOUPLED_CHALLENGE_REQUIRED="D",e.NOT_AUTHENTICATED="N",e.AUTHENTICATION_COULD_NOT_BE_PERFORMED="U",e.INFORMATIONAL_ONLY="I",e.REJECTED="R"}(ma||(ma={})),function(e){e._250X400="01",e._390X400="02",e._500X600="03",e._600X400="04",e.FULL_SCREEN="05"}(ya||(ya={}));class Ea extends pa{constructor(){super("Three ds method timed out while waiting for a response"),this.name="ThreeDSMethodTimeoutError"}}class _a extends pa{constructor(){super("Form is no longer connected"),this.name="ThreeDSMethodFormError"}}class ba extends pa{constructor(){super("Three ds method failed with unexpected error"),this.name="ThreeDSMethodError"}}class Ia extends pa{constructor(e,t){super(`Received 3DS method response with transaction ID ${e}, expected ${t}`),this.name="ThreeDSMethodTransactionIdError"}}class Sa{constructor(e){this.iframeInputs=e,this.eventListenerReference=this.handleResponse.bind(this)}async handle(){const e=new Promise(((e,t)=>{this.threeDSPromiseResolve=e,this.threeDSPromiseReject=t}));return this.build(),this.submit(),e}build(){void 0!==this.iframeInputs.iframeSelector&&document.querySelector(this.iframeInputs.iframeSelector)?this.iframe=document.querySelector(this.iframeInputs.iframeSelector):this.buildDefault();const e=`${this.iframeInputs.baseID}-form`;if(document.getElementById(e))this.form=document.getElementById(e);else{this.form=document.createElement("form"),this.form.setAttribute("id",e),this.form.setAttribute("name",`${this.iframeInputs.baseName}Form`),this.form.setAttribute("method","POST"),this.form.setAttribute("action",this.iframeInputs.notificationURL),this.form.setAttribute("target",this.iframe.name);const t=document.createElement("input");t.setAttribute("name",this.iframeInputs.notificationData.name),t.setAttribute("value",this.iframeInputs.notificationData.data),t.setAttribute("type","hidden"),this.form.appendChild(t),document.body.appendChild(this.form)}window.addEventListener("message",this.eventListenerReference)}buildDefault(){const e=`${this.iframeInputs.baseID}-modal`;document.getElementById(e)?this.modal=document.getElementById(e):(this.modal=document.createElement("div"),this.modal.id=e,this.modal.classList.add("square_threeds_modal"),document.body.appendChild(this.modal));const t=`${this.iframeInputs.baseID}-iframe`,r=document.getElementById(t);r&&this.modal.contains(r)?this.iframe=document.getElementById(t):(this.iframe=document.createElement("iframe"),this.iframe.id=t,this.iframe.name=`${this.iframeInputs.baseName}Iframe`,this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("width",this.iframeInputs.width),this.iframe.setAttribute("height",this.iframeInputs.height),this.iframe.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-pointer-lock"),this.iframe.style.visibility="hidden",this.iframe.setAttribute("allowpaymentrequest","false"),this.iframe.setAttribute("allowfullscreen","false"),this.iframe.setAttribute("allow","payment *;publickey-credentials-get *"),this.iframe.classList.add("square_threeds_iframe"),this.modal.appendChild(this.iframe))}handleResponse(e){const t=e.data;if("object"==typeof t&&t.type===this.iframeInputs.listenerMessageType){this.destroy();try{this.iframeInputs.validateMessage(t),this.threeDSPromiseResolve(t)}catch(e){this.threeDSPromiseReject(e)}}}submit(){this.form.isConnected?(this.form.submit(),void 0!==this.iframeInputs.onShow&&this.iframeInputs.onShow(this.iframe,this.modal),void 0!==this.iframeInputs.timeoutSeconds&&(this.timeoutID=window.setTimeout(this.timedOut.bind(this),1e3*this.iframeInputs.timeoutSeconds))):(this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_FORM_DISCONNECTED")))}timedOut(){this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_TIMEOUT"))}destroy(){void 0!==this.timeoutID&&window.clearTimeout(this.timeoutID),window.removeEventListener("message",this.eventListenerReference),void 0!==this.iframeInputs.onDestroy&&this.iframeInputs.onDestroy(this.iframe),this.form.isConnected&&this.form.remove(),void 0!==this.modal&&this.modal.isConnected&&(this.iframe.isConnected&&this.iframe.remove(),this.modal.remove())}}function Oa(e){switch(e){case"SQUARE_3DS_IFRAME_TIMEOUT":return new Ea;case"SQUARE_3DS_IFRAME_FORM_DISCONNECTED":return new _a;default:return new ba}}class wa{constructor(e){if(void 0===e.threeDsMethodUrl||void 0===e.threeDsMethodNotificationUrl)throw new Error(`Cannot complete 3DS method flow, one or more of threeDSMethodUrl and threeDSMethodNotificationUrl are undefined. Transaction data: ${JSON.stringify(e)}`);this.threeDsMethodUrl=e.threeDsMethodUrl,this.threeDSMethodData={threeDSMethodNotificationURL:e.threeDsMethodNotificationUrl,threeDSServerTransID:e.threeDSServerTransId},this.square3DSMethodIframe=new Sa({baseID:"sq-threeds-3ds-method",baseName:"3DSMethod",getErrorMessage:Oa,height:"10",listenerMessageType:"threeDsMethodResponse",notificationData:{data:btoa(JSON.stringify(this.threeDSMethodData)),name:"threeDSMethodData"},notificationURL:this.threeDsMethodUrl,timeoutSeconds:11,validateMessage:this.validateMessage.bind(this),width:"10"})}async handle3DSMethod(){return this.square3DSMethodIframe.handle()}validateMessage(e){if(e.threeDsServerTransId!==this.threeDSMethodData.threeDSServerTransID)throw new Ia(e.threeDsServerTransId,this.threeDSMethodData.threeDSServerTransID)}}class Ca extends pa{constructor(){super("Form is no longer connected"),this.name="ChallengeFlowFormError"}}class Aa extends pa{constructor(){super("Challenge flow failed with unknown error"),this.name="ChallengeFlowError"}}class Ta extends pa{constructor(e,t){super(`Received Challenge response with transaction ID ${e}, expected ${t}`),this.name="ChallengeResponseTransactionIdError"}}const Pa="data-challenge-displayed",Na="VISIBLE";function Ra(e){return"SQUARE_3DS_IFRAME_FORM_DISCONNECTED"===e?new Ca:new Aa}class Da{constructor(e,t,r,n){if(this.errorLogger=t,this.esLogger=r,void 0===e.acsUrl||void 0===e.encodedCReq)throw new Error(`Cannot complete Challenge flow, acsUrl or encodedCReq is undefined. Transaction data: ${JSON.stringify(e)}`);this.acsUrl=e.acsUrl,this.challengeFlowData={encodedCReq:e.encodedCReq,threeDSServerTransID:e.threeDSServerTransId};const i=this.decodeChallengeWindowSize();void 0!==n&&({challengeDisplayedCallback:this.challengeDisplayedCallback,challengeHiddenCallback:this.challengeHiddenCallback,elementSelector:this.iframeSelector}=n);const o={baseID:"sq-threeds-challenge-flow",baseName:"3DSChallengeFlow",getErrorMessage:Ra,height:`${i.height}`,listenerMessageType:"challengeResponse",notificationData:{data:this.challengeFlowData.encodedCReq,name:"creq"},notificationURL:this.acsUrl,onDestroy:this.onDestroy.bind(this),onShow:this.onShow.bind(this),timeoutSeconds:610,validateMessage:this.validateMessage.bind(this),width:`${i.width}`};void 0!==this.iframeSelector&&(o.iframeSelector=this.iframeSelector),this.squareChallengeFlowIframe=new Sa(o)}async handleChallengeFlow(){const e=this.decodeCReq(this.challengeFlowData.encodedCReq);return e&&this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_req",tds_analyticsjs_c_req_message_version:e.messageVersion,tds_base_three_ds_server_trans_id:e.threeDsServerTransId||this.challengeFlowData.threeDSServerTransID}),this.squareChallengeFlowIframe.handle().then((e=>(this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_res",tds_analyticsjs_c_res_message_version:e.messageVersion,tds_analyticsjs_c_res_trans_status:e.transStatus,tds_base_three_ds_server_trans_id:e.threeDsServerTransId}),e)))}onShow(e,t){e.setAttribute(Pa,Na),e.style.visibility="visible",void 0!==this.challengeDisplayedCallback&&this.challengeDisplayedCallback(),t&&t.classList.add("square_threeds_modal__show")}onDestroy(e){const t=e.getAttribute(Pa)===Na;e.setAttribute(Pa,"REMOVED"),void 0!==this.challengeHiddenCallback&&t&&this.challengeHiddenCallback()}validateMessage(e){if(e.threeDsServerTransId!==this.challengeFlowData.threeDSServerTransID)throw new Ta(e.threeDsServerTransId,this.challengeFlowData.threeDSServerTransID)}decodeChallengeWindowSize(){let e=ya._250X400;try{const t=JSON.parse(atob(this.challengeFlowData.encodedCReq));null!==t&&"object"==typeof t&&"challengeWindowSize"in t&&(e=t.challengeWindowSize)}catch(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}})}switch(e){case ya._390X400:return{height:400,width:390};case ya._500X600:return{height:600,width:500};case ya._600X400:return{height:400,width:600};case ya.FULL_SCREEN:return{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};case ya._250X400:default:return{height:400,width:250}}}decodeCReq(e){try{return JSON.parse(atob(e))}catch(t){return this.errorLogger.addBreadcrumb({data:{encodedCReq:e},message:"Unable to parse JSON for challenge request message",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-challenge"}}}),null}}}var La;!function(e){e.COMPLETED="COMPLETED",e.ERROR="ERROR"}(La||(La={}));class xa{constructor(e,t){this.userChallenged=!1,this.esLogger=e,this.errorLogger=t}async execute3dsAuthentication(e,t){this.configuration=e,this.threeDsTransactionData=t,await this.handle3DSMethodFlow();try{const e=await this.authenticate();await this.handleAuthenticateResponse(e)}catch(e){this.handleError(e)}}async handle3DSMethodFlow(){if(void 0!==this.threeDsTransactionData?.threeDsMethodUrl)try{const e=new wa(this.threeDsTransactionData);this.esLogger.trackAnalyticsEvent({analyticsjs_event:"three_ds_method_invoked",analyticsjsverification_id:this.threeDsTransactionData.verificationId,analyticsjsverification_verification_token:this.threeDsTransactionData.verificationToken}),await e.handle3DSMethod(),this.esLogger.trackAnalyticsEvent({analyticsjs_event:"three_ds_method_completed",analyticsjsverification_id:this.threeDsTransactionData.verificationId,analyticsjsverification_verification_token:this.threeDsTransactionData.verificationToken})}catch(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}})}}async handleChallengeFlow(e){this.esLogger.trackAnalyticsEvent({analyticsjs_event:"buyer_challenged",analyticsjsverification_challenge_type:"3DS",analyticsjsverification_id:this.threeDsTransactionData.verificationId,analyticsjsverification_user_challenged:!0,analyticsjsverification_verification_token:this.threeDsTransactionData.verificationToken});const t={threeDSServerTransId:e.three_ds_server_trans_id};return void 0!==e.encoded_creq&&(t.encodedCReq=e.encoded_creq),void 0!==e.challenge_acs_url&&(t.acsUrl=e.challenge_acs_url),new Da(t,this.errorLogger,this.esLogger,this.configuration.verifyBuyerCustomElement).handleChallengeFlow()}authenticate(){const e={browser_info:{color_depth:window.screen.colorDepth,java_enabled:window.navigator.javaEnabled(),screen_height:window.innerHeight,screen_width:window.innerWidth},client_id:"",token:this.threeDsTransactionData.verificationToken};return this.configuration.callbacks.postAuthenticate(e)}async handleAuthenticateResponse(e){if(void 0===e.errors)if(e.three_ds_trans_status===ma.CHALLENGE_REQUIRED)try{this.userChallenged=!0,await this.handleChallengeFlow(e),this.configuration.callbacks.onComplete({status:La.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:!0})}catch(e){this.handleError(e)}else this.configuration.callbacks.onComplete({status:La.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged});else this.configuration.callbacks.onComplete({status:La.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}handleError(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}}),this.configuration.callbacks.onComplete({status:La.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}}class ka{constructor(e,t,r){this.callback=e,this.onError=r,this.called=!1,this.callback=e,this.timeout=window.setTimeout((()=>this.timedOut()),t),this.onError=r}invoke(...e){this.called?this.callback(...this.onError):(clearTimeout(this.timeout),this.called=!0,this.callback(...e))}timedOut(){this.invoke(...this.onError)}}class Ma{constructor(e,t,r,n,i){this.applicationId=e,this.analyticsParameters=t,this.esLogger=r,this.errorLogger=n,this.challengeUpdatesQueue=[],this.verificationUpdatePending=!1,this.userChallenged=!1,this.messenger=i,this.squareThreeds=new xa(this.esLogger,this.errorLogger),(()=>{this.pendingVerifyBuyerCall&&this.verifyBuyer(this.pendingVerifyBuyerCall.verificationId,this.pendingVerifyBuyerCall.source,this.pendingVerifyBuyerCall.details,this.pendingVerifyBuyerCall.callback,this.pendingVerifyBuyerCall.verifyBuyerCustomElement)})()}verifyBuyer(e,t,r,n,i){void 0===this.verifyBuyerCallback?(this.verifyBuyerCallback=new ka(((e,t)=>{n(e,t),delete this.verifyBuyerCallback}),9e5,[new va(e)]),this.getVerification(e,t,r)):n(new ga,null)}async updateVerification(e,t){const r=t.some((e=>{if("SQUARE_THREEDS"===e.type){const t=e.square_threeds_verification?.status;return function(e){return"CANCELED"===e||"REJECTED"===e||"AUTHENTICATED"===e||"COMPLETED"===e}(t)||"ERROR"===t}return!1}));if(!this.verificationUpdatePending||r){this.verificationUpdatePending=!r;try{const r={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,challengeUpdates:t,token:this.token,verificationId:e},n=await this.messenger.request("REQUEST_VERIFICATION_UPDATE",{body:{...r}});this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_verification_update",analyticsjsverification_id:e,analyticsjsverification_verification_token:this.token}),this.handleChallenges(e,n)}catch(t){this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_verification_update",analyticsjsverification_id:e,analyticsjsverification_verification_token:this.token}),this.handleChallenges(e,t instanceof pa?t:new pa("Update verification failed",this.token))}}else this.challengeUpdatesQueue.push(t)}handleChallenges(e,t){if(void 0===this.verifyBuyerCallback)return;const r=this.challengeUpdatesQueue.shift();if(void 0!==r?this.updateVerification(e,r):this.verificationUpdatePending=!1,t instanceof pa)return void this.verifyBuyerCallback.invoke(t,null);this.token=t.token;const n={token:this.token,userChallenged:this.userChallenged};switch(t.status){case"COMPLETED":this.verifyBuyerCallback.invoke(null,n);break;case"CANCELED":this.verifyBuyerCallback.invoke(new fa(t.token),null);break;case"PENDING":for(const r of t.challenges)if("SQUARE_THREEDS"===r.type){if(this.squareThreedsConfiguration={callbacks:{onComplete:t=>{this.handleSquareThreeDsComplete(t,e)},postAuthenticate:t=>this.handlePostAuthenticate(t,e)}},!this.isValidSquareThreeDsChallenge(r))return;this.squareThreeDsTransactionData={directoryServerId:r.square_three_ds_verification.directory_server_id,messageVersion:r.square_three_ds_verification.message_version,threeDSServerTransId:r.square_three_ds_verification.three_ds_server_transaction_id,threeDsMethodNotificationUrl:r.square_three_ds_verification?.three_ds_method_notification_url,threeDsMethodUrl:r.square_three_ds_verification?.three_ds_method_url,verificationId:e,verificationToken:this.token},this.squareThreeds.execute3dsAuthentication(this.squareThreedsConfiguration,this.squareThreeDsTransactionData)}break;default:this.errorLogger.captureException(new pa(`Invalid verification response status: ${t.status}`),{captureContext:{tags:{action:"nonFatal-verify"}}})}}isValidSquareThreeDsChallenge(e){return void 0!==e.square_three_ds_verification?.three_ds_server_transaction_id}async getVerification(e,t,r){const n={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,source:t,verificationDetails:r,verificationId:e};try{const t=await this.messenger.request("REQUEST_VERIFICATION_CREATE",{body:{...n}});this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_verification",analyticsjsverification_id:e,analyticsjsverification_verification_token:t.token}),this.handleChallenges(e,t)}catch(t){this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_verification",analyticsjsverification_id:e,analyticsjsverification_verification_token:this.token}),this.handleChallenges(e,t instanceof pa?t:new pa("Create verification failed",this.token))}}handleSquareThreeDsComplete(e,t){this.userChallenged=e.userChallenged;const r={square_threeds_verification:{directory_server_id:this.squareThreeDsTransactionData.directoryServerId,message_version:this.squareThreeDsTransactionData.messageVersion,status:e.status===La.COMPLETED?La.COMPLETED:La.ERROR,three_ds_server_transaction_id:e.threeDsServerTransId},type:"SQUARE_THREEDS"};this.updateVerification(t,[r])}async handlePostAuthenticate(e,t){const r={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,browser_info:e.browser_info,client_id:e.client_id,token:this.token,verificationId:t};try{const e=await this.messenger.request("REQUEST_THREE_DS_AUTHENTICATION",{body:{...r}});return this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_three_ds_authenticate",analyticsjsverification_id:t,analyticsjsverification_verification_token:this.token}),e}catch(e){throw this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_three_ds_authenticate",analyticsjsverification_id:t,analyticsjsverification_verification_token:this.token}),e instanceof pa?e:new pa("Three ds authentication failed",this.token)}}}function ja(e,t){if(!e)throw ca("IframeCustomElement",t);if("function"!=typeof e)throw ra("IframeCustomElement",t)}function Ua(e){if("object"!=typeof e||!e)return"";const t=[];return"string"==typeof e.familyName&&e.familyName&&t.push("familyName"),"string"==typeof e.givenName&&e.givenName&&t.push("givenName"),"string"==typeof e.email&&e.email&&t.push("email"),"string"==typeof e.country&&e.country&&t.push("country"),"string"==typeof e.countryName&&e.countryName&&t.push("countryName"),"string"==typeof e.region&&e.region&&t.push("region"),"string"==typeof e.city&&e.city&&t.push("city"),"object"==typeof e.addressLines&&e.addressLines.join()&&t.push("addressLines"),"string"==typeof e.postalCode&&e.postalCode&&t.push("postalCode"),"string"==typeof e.phone&&e.phone&&t.push("phone"),t.join(",")}class Ha{constructor(e,t,r,n,i){this.applicationId=e,this.esLogger=t,this.errorLogger=r,this.messenger=n,function(e,t){if(!e)throw na("applicationId");if("string"!=typeof e)throw Qs("applicationId","string");if(t){const e="locationId"in t,r="accountId"in t;if(!e&&!r)throw ua();if(e&&r)throw da();if(e&&"string"!=typeof t.locationId)throw Qs("analyticsParameters.locationId","string");if(r&&"string"!=typeof t.accountId)throw Qs("analyticsParameters.accountId","string")}}(e,i),i&&(this.verifier=new Ma(this.applicationId,i,this.esLogger,this.errorLogger,this.messenger),this.analyticsParameters=i)}async verifyBuyer(e,t,r){return new Promise(((n,i)=>{this._verifyBuyer(e,t,((e,t)=>{e?i(e):n(t)}),r)}))}_verifyBuyer(e,t,r,n){const i=t,o=`verify-buyer-${(new Date).getMilliseconds()}-${1e5*Math.random()}`;try{this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_invoked",analyticsjsverification_amount:i.amount,analyticsjsverification_contact_fields:Ua(i.billingContact),analyticsjsverification_currency:i.currencyCode,analyticsjsverification_custom_score:null===i.customScore?void 0:i.customScore,analyticsjsverification_id:o,analyticsjsverification_intent:i.intent,analyticsjsverification_source:e,analyticsjsverification_source_prefix:e.substr(0,5),analyticsjsverification_square_product:i.squareProduct})}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"verifyBuyer"}}}),ha()}try{!function(e,t,r,n,i){const o="verifyBuyer";if(!e)throw Zs();if(void 0===t)throw aa(o,"source");if("string"!=typeof t)throw ta(o,"source","string");if(!r)throw aa(o,"verificationDetails");if("object"!=typeof r)throw ta(o,"verificationDetails","object");if(function(e,t){const r="verificationDetails";if("object"!=typeof t.billingContact)throw ta(e,`${r}.billingContact`,"object");const{customScore:n}=t;if(null!=n){if("number"!=typeof n||Number.isNaN(n))throw ta(e,`${r}.customScore`,"integer");if(n<0||n>1e3)throw la(e,`${r}.customScore`,0,1e3,!0)}if("string"!=typeof t.intent)throw ta(e,`${r}.intent`,"string");if("CHARGE"===t.intent||"CHARGE_AND_STORE"===t.intent){if(!t.currencyCode)throw ia(e,`${r}.currencyCode`);if("string"!=typeof t.currencyCode)throw ta(e,`${r}.currencyCode`,"string");if(!t.amount)throw ia(e,`${r}.amount`);if("string"!=typeof t.amount)throw ta(e,`${r}.amount`,"string")}}(o,r),!n)throw ca(o,"verifyBuyerCallback");if("function"!=typeof n)throw ra(o,"verifyBuyerCallback");void 0!==i&&(function(e){if("string"!=typeof e)throw Qs("iframeElementSelector","string");const t=document.querySelector(e);if(null===t)throw sa(e);if(null===t.getAttribute("name"))throw oa(e,"name");if("iframe"!==t.tagName.toLowerCase()||null===t.contentDocument&&null===t.contentWindow)throw ea(e,"IFrameElement")}(i.elementSelector),ja(i.challengeDisplayedCallback,"elementVisibleCallback"),ja(i.challengeHiddenCallback,"elementRemovedCallback"))}(this.analyticsParameters,e,i,r,n)}catch(t){throw this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_completed",analyticsjsverification_error:t.name,analyticsjsverification_id:o,analyticsjsverification_source:e}),t}try{this.verifier.verifyBuyer(o,e,i,((t,n)=>{const i={analyticsjs_event:"verify_buyer_completed",analyticsjsverification_id:o,analyticsjsverification_source:e};t&&(i.analyticsjsverification_error=t.name),n&&(i.analyticsjsverification_user_challenged=n.userChallenged,i.analyticsjsverification_verification_token=n.token),this.esLogger.trackAnalyticsEvent(i),r(t,n)}),n)}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"verifyBuyer"}}}),ha()}}}const Ba=(e,t,r,n,i)=>new Ha(e,t,r,n,i),Fa={get documentVisibilityState(){return document.visibilityState},windowLocationHref:()=>window.location.href,get windowLocationOrigin(){return window.location.origin},get windowNavigationBeacon(){return window.navigator.sendBeacon.bind(window.navigator)}},qa=/^https?:\/\//;function Va(e){if(!e)return"";if(!qa.test(e))return"[Not Parsable]";const t=new URL(e);return`${t.protocol}//${t.host}`}const Ga={buyer_challenged:"analyticsjsverification",receive_three_ds_authenticate:"analyticsjsverification",receive_verification:"analyticsjsverification",receive_verification_update:"analyticsjsverification",three_ds_method_completed:"analyticsjsverification",three_ds_method_invoked:"analyticsjsverification",verify_buyer_completed:"analyticsjsverification",verify_buyer_invoked:"analyticsjsverification"};function za(e){const t=document.cookie.split(";");for(const r of t){const[t,n]=r.split("=");if(void 0!==t&&t.trim()===e&&void 0!==n)return decodeURIComponent(n)}return null}class $a{constructor(e,t,r,n){const{locationId:i,avt:o}=r;this.es=e,this.errorLogger=n,this.telemetryStarts={},this.baseEvent=function(e,t,r){return"accountId"in r?{anonymous_user_token:t,oauth_credential_account_id:r.accountId,oauth_credential_client_id:e}:{anonymous_user_token:t,oauth_credential_client_id:e,oauth_credential_location_id:r.locationId}}(t,o,{locationId:i??""})}trackAnalyticsEvent(e){try{const t={catalog_name:Ga[e.analyticsjs_event],...this.baseEvent,analyticsjsverification_duration:this.getAnalyticsEventDuration(e),browser_height:window.innerHeight,browser_width:window.innerWidth,device_screen_height:window.screen.height,device_screen_width:window.screen.width,subject_anonymous_token:za("_savt"),webpage_base_url:Fa.windowLocationOrigin,webpage_full_url:Va(Fa.windowLocationHref()),webpage_path:"",webpage_referrer:Va(window.document.referrer),webpage_referrer_path:"",webpage_referrer_search:"",webpage_search:"",webpage_title:window.document.title,...e};this.es.trackV2(t)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream Track Error",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})}}trackTdsEvent(e){try{this.es.trackV2(e)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream TrackTdsEvent Error",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})}}getAnalyticsEventDuration(e){const{analyticsjs_event:t,analyticsjsverification_id:r}=e,n=e=>(this.telemetryStarts[e]=Date.now(),null),i=e=>{const t=this.telemetryStarts[e];return void 0===t?null:(delete this.telemetryStarts[e],Date.now()-t)};switch(t){case"verify_buyer_invoked":return n(r);case"verify_buyer_completed":return i(r);case"three_ds_method_invoked":return n(`three_ds_method_${r}`);case"three_ds_method_completed":return i(`three_ds_method_${r}`);default:return null}}}class Wa{constructor(e){this.metricsBatchUrl=`${e.pciConnectApiUrl}/v2/analytics/aux`,this.errorLogger=e.errorLogger,this.analyticsClientVersion=e.analyticsClientVersion,this.webSdkVersion=e.webSdkVersion,this.metricsBuffer=[],this.disableBeacon=!1}trackV2(e){const t={u_library_name:"analytics-client",u_library_version:this.analyticsClientVersion,web_sdk_version:this.webSdkVersion,...e};this.postMetricsEvent(t,!1)}postMetricsEvent(e,t=!1){this.disableBeacon?In(this.metricsBatchUrl,{body:{analytics:[e]}}).catch((t=>{this.errorLogger.addBreadcrumb({data:{event:e},message:"Unable to HTTP Post analytics event",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})})):(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===Fa.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=setInterval((()=>{this.buildAndSendBeacon()}),1e3)))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{const e=new Blob([JSON.stringify({analytics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});Fa.windowNavigationBeacon(this.metricsBatchUrl,e)}catch(e){this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send beacons for analytics events",type:"error"}),this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-es2"}}}),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),In(this.metricsBatchUrl,{body:{analytics:this.metricsBuffer}}).catch((e=>{this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send HTTP request for analytics events",type:"error"}),this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-es2"}}})}))}this.metricsBuffer=[]}}}const Ya={setupClient(e,t){const{environment:r,hostname:n,locationId:i,pciConnectApiUrl:o,clientVersion:s,webSdkVersion:a,messenger:c}=t,u=void 0===s||""===s?`web-payments-sdk@${a}`:`analytics-client@${s}`,l=new pn({dsn:"https://4197e265423545aba2d849d023e8cd33@o160250.ingest.sentry.io/1516559",environment:r,initialScope:{tags:{applicationId:e,applicationUrl:n,source:"analytics-client",webSdkVersion:a}},release:u}),d=new Wa({analyticsClientVersion:u,errorLogger:l,pciConnectApiUrl:o,webSdkVersion:a}),h=new $a(d,e,t,l);return void 0===i?Ba(e,h,l,c):Ba(e,h,l,c,{locationId:i})}};var Ka={addStyleElement:function(e,t,r,n){Xa(e,t,document.head).then(r).catch(n)},addStyleElementToTarget:Xa,hasExistingStyleElement:function(e){return Boolean(document.getElementById(e))}};function Xa(e,t,r){return new Promise(((n,i)=>{if(Ka.hasExistingStyleElement(t))n();else{var o=document.createElement("link");o.onload=()=>{n()},o.onerror=()=>{i(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))},o.href=e,o.rel="stylesheet",o.type="text/css",o.id=t,r.appendChild(o)}}))}var Ja=Ka;function Za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(r),!0).forEach((function(t){ec(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Za(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ec(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tc,rc="".concat(qn.ASSET_URL,"/square-threeds-modal.css");class nc{constructor(e,t,r,n){this.applicationId=e,this.locationId=void 0!==t&&t.length>0?t:void 0,this.avt=r,this.messenger=n}verifyBuyer(e,t){var r,n=this.getAnalyticsClient(),i=Qa(Qa({},t),{},{billingContact:(r=t.billingContact,function(e){return"region"in e||"country"in e||"countryName"in e}(r)?r:{addressLines:r.addressLines,city:r.city,country:r.countryCode,email:r.email,familyName:r.familyName,givenName:r.givenName,phone:r.phone,postalCode:r.postalCode,region:r.state})});return n.verifyBuyer(e,i)}getAnalyticsClient(){if(this.analyticsClient)return this.analyticsClient;Ja.addStyleElement(rc,"sq-threeds-modal-styles");var e=Ya.setupClient(this.applicationId,{avt:this.avt,clientVersion:qn.ANALYTICS_CLIENT_VERSION,connectApiUrl:qn.CONNECT_API_URL,environment:qn.env,hostname:c.windowLocation.origin,locationId:this.locationId,messenger:this.messenger,pciConnectApiUrl:qn.API_URL,webSdkVersion:qn.VERSION});return this.analyticsClient=e,e}}!function(e){e.ACH="ACH",e.AFTERPAY="AFTERPAY",e.APPLE_PAY="APPLE_PAY",e.CASH_APP_PAY_V1="CASH_APP_PAY_V1",e.GOOGLE_PAY="GOOGLE_PAY"}(tc||(tc={})),qn.HYDRATION_ENDPOINT;class ic{constructor(e,t){this.errorLogger=e,this.messenger=t}}function oc(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function sc(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){oc(o,n,i,s,a,"next",e)}function a(e){oc(o,n,i,s,a,"throw",e)}s(void 0)}))}}var ac,cc="LOCALE_CHANGED_EVENT";class uc extends ic{constructor(e,t,r,n,i,o,s,a,c,u,l){super(e,t),this.session=n,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=r,this.eventTarget=s,this.featureFlagValues=a,this.isTestMerchant=c,this.analyticsBackend=u,this.proofOfWorkComputePromise=l}addLocaleChangedListener(e){this.eventTarget.addEventListener(cc,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(cc,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(cc,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage("UPDATE_SESSION",{session:this.session.serialize()})}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var r=this.localeStrings.getCurrentLocale();return this.session.setLocale(r),this.eventTarget.dispatchEvent(cc,r),this.messenger.sendOneWayMessage("UPDATE_SESSION",{session:this.session.serialize()}),t}updateSession(e){var t=this;return sc((function*(){t.session.setSessionId(e),t.errorLogger.setCustomTags({sessionId:e}),yield t.messenger.sendOneWayMessage("UPDATE_SESSION",{session:t.session.serialize()})}))()}waitForProofOfWorkCompletion(){var e=this;return sc((function*(){var t=yield e.proofOfWorkComputePromise;void 0!==t&&t!==e.session.powCounter&&e.session.setPowCounter(t),e.session.serializationHasChanged()&&(yield e.messenger.sendOneWayMessage("UPDATE_SESSION",{session:e.session.serialize()}))}))()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}}!function(e){e.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",e.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",e.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",e.GOOGLE_PAY_REQUIRES_HTTPS="GOOGLE_PAY_REQUIRES_HTTPS",e.INVALID_CONFIG="INVALID_CONFIG",e.MISC_THIRD_PARTY_IFRAME_NOT_ALLOWED="MISC_THIRD_PARTY_IFRAME_NOT_ALLOWED",e.UNKNOWN="UNKNOWN",e.UNABLE_TO_LOAD="UNABLE_TO_LOAD"}(ac||(ac={}));var lc,dc={message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},hc={message:"Device does not support Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions",type:"DEVICE_NOT_SUPPORTED"},pc={message:"Browser does not support Google Pay. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},fc={message:"Google Pay requires HTTPS. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},gc={message:"Configuration is invalid.",type:"INVALID_CONFIG"},vc={message:"Third-party iframes are not allowed to request payments unless explicitly allowed via Permissions-Policy Configuration.\n    Please configure the relevant permissions policy (via the Permissions-Policy header or <iframe allow...> ) to allow 'payment' in order to enable this functionality.\n    See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy/payment",type:"IFRAME_NOT_ALLOWED"},mc={message:"Temporarily unable to register the payment method.",type:"UNABLE_TO_LOAD"},yc={message:"An unknown error has occurred.",type:"UNKNOWN"};!function(e){e.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",e.APPLICATION_DISABLED="APPLICATION_DISABLED",e.MISSING_LOCATION_ID="MISSING_LOCATION_ID",e.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",e.NOT_ONBOARDED="NOT_ONBOARDED",e.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",e.US_MERCHANT_ONLY="US_MERCHANT_ONLY",e.INTERNAL_ERROR="INTERNAL_ERROR",e.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(lc||(lc={}));var Ec={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#production-configuration",type:"DOMAIN_NOT_REGISTERED"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's payment method status",type:"INTERNAL_ERROR"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: https://developer.squareup.com/reference/sdks/web/payments/objects/Payments",type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"}};class _c extends Vn{constructor(e,t,r){var n="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");n+=" and must be a(n) ".concat(r),super("".concat(n,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,_c.prototype)}}class bc extends Vn{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,bc.prototype)}}function Ic(e){return e instanceof Error?e:new Error(JSON.stringify(e))}function Sc(e){return Ic(e).message}var Oc=function(e){var t,r=new(null!==(t=zo[e.name])&&void 0!==t?t:Vn);return r.fromSerializedError(e),r},wc=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}};class Cc{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0;n<r.length;n+=1)r[n]===t&&(r.splice(n,1),n-=1)}dispatchEvent(e,t){if(e in this.listeners){var r=new Yi(e,t),n=[...this.listeners[e]];for(var i of n)try{i(r)}catch(e){console.error(e)}}}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var Ac=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};class Tc{constructor(e,t,r,n){this.metricsLogger=e,this.eventSource=r,this.session=t,this.paymentMethodTrackingId=n}logEvent(e,t){Ds(e)?this.logMetricEvent({errorMessage:t,event:e,eventSource:this.eventSource}):Ns(e)?this.logMetricEvent({event:e,eventConfigurationValues:t,eventSource:this.eventSource}):this.logMetricEvent({event:e,eventSource:this.eventSource,sloStatus:t})}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}logMetricEvent(e){return this.metricsLogger.logEvent(e,this.session.instanceId,this.session.sessionId,this.paymentMethodTrackingId)}}r(9098);var Pc,Nc=[yi,_i,Ei,Ai];function Rc(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Dc(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Rc(o,n,i,s,a,"next",e)}function a(e){Rc(o,n,i,s,a,"throw",e)}s(void 0)}))}}!function(e){e[e.DETACHED=0]="DETACHED",e[e.ATTACHED=1]="ATTACHED",e[e.DESTROYED=2]="DESTROYED"}(Pc||(Pc={}));class Lc{constructor(e){this.status=Pc.DETACHED,this.eventTarget=new Cc,this.eventBuffer={},this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}static withErrorCapture(e,t,r){return Dc((function*(){try{return yield Promise.resolve(e(...arguments))}catch(e){throw ho(e,Nc)?e:(t.captureException(e),new Ti("using ".concat(r)))}}))}addEventListener(e,t){this.eventTarget.addEventListener(e,t),e in this.eventBuffer&&this.eventBuffer[e].length>0&&(this.eventBuffer[e].forEach((t=>this.eventTarget.dispatchEvent(e,t))),this.eventBuffer[e]=[])}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve(!0)}detach(){return Promise.resolve(!0)}dispatchEvent(e,t){this.hasEventListener(e)?this.eventTarget.dispatchEvent(e,t):(e in this.eventBuffer||(this.eventBuffer[e]=[]),this.eventBuffer[e].push(t))}throwIfDestroyed(){if(this.status===Pc.DESTROYED)throw new _i(this.methodType)}throwIfDestroyedOrAlreadyAttached(){if(this.throwIfDestroyed(),this.status===Pc.ATTACHED)throw new yi(this.methodType)}throwIfDestroyedOrNotAttached(){if(this.throwIfDestroyed(),this.status!==Pc.ATTACHED)throw new Ei(this.methodType)}}var xc={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};class kc extends Error{constructor(e){super(e),this.name="InvalidAuthorizationParameter",Object.setPrototypeOf(this,kc.prototype)}}Error,Error;class Mc extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,Mc.prototype)}}class jc{constructor(){this.listeners=new Map,this.eventBuffer=new Map}addEventListener(e,t,r={}){if(!0===r.once){const r=t;t=n=>{this.removeEventListener(e,t),r(n)}}if(r.signal){if(r.signal.aborted)return;r.signal.addEventListener("abort",(()=>{this.removeEventListener(e,t)}))}const n=this.listeners.get(e);void 0===n?this.listeners.set(e,[t]):n.push(t);const i=this.eventBuffer.get(e);i&&(i.forEach((e=>{this.dispatchEvent(e)})),this.eventBuffer.set(e,[]))}removeEventListener(e,t){const r=this.listeners.get(e);if(void 0!==r)for(let e=0;e<r.length;e++)r[e]===t&&(r.splice(e,1),e--)}hasEventListener(e){const t=this.listeners.get(e);return void 0!==t&&t.length>0}dispatchEvent(e){if(this.hasEventListener(e.type)){const t=[...this.listeners.get(e.type)];for(const r of t)try{r(e)}catch(t){throw new Mc(e.type,t.message)}}else{const t=this.eventBuffer.get(e.type);void 0===t?this.eventBuffer.set(e.type,[e]):t.push(e)}}}class Uc{constructor(){this.eventTarget=new jc}addEventListener(e,t){this.eventTarget.addEventListener(e,(e=>{t(e.detail)}))}dispatchEvent(e){this.eventTarget.dispatchEvent(new CustomEvent(e.type,{detail:e}))}}const Hc={get DEV_ENV(){return"development"},get IFRAME_NAME(){return"ach_authz"},get PRODUCTION_ENV(){return"production"},get SANDBOX_ENV(){return"sandbox"},get TEST_ENV(){return"test"},getDebitAuthHostname(e){switch(e){case this.PRODUCTION_ENV:return"https://connect.squareup.com";case this.SANDBOX_ENV:return"https://connect.squareupsandbox.com";default:return"https://connect.squareupstaging.com"}},getIframeSrc(e,t){return`${this.getSDKBaseUrlForEnv(e)}${"development"===e?"":`/${t}`}/ach-authz-sdk/enclave.html`},getSDKBaseUrlForEnv(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}},Bc=function(e,t){const r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},r.setAttribute("id","ach-auth-enclave"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("src",Hc.getIframeSrc(e,t)),r.style.position="fixed",r.style.inset="0px",r.style.zIndex="2147483647",r.style.borderWidth="0px",r.style.display="block",r.style.overflow="hidden auto",document.body.append(r)}))},Fc=function(e){e.parentElement?.removeChild(e)};class qc extends Error{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,qc.prototype)}}class Vc extends Error{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,Vc.prototype)}}class Gc extends Error{constructor(e,t,r){void 0!==r?(super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${null===document.getElementById(r)?"does not exist":"exists"}`),this.iframeID=r):super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`),this.type=e,this.id=t,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,Gc.prototype)}}const zc="channel:connected",$c="channel:connecting",Wc="channel:close",Yc="channel:error";class Kc{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName($c):this.handleConnecting(e);break;case this.messageWithName(zc):this.handleConnected();break;case this.messageWithName(Wc):this.close();break;case this.messageWithName(Yc):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=void 0!==e?`:${e}`:""}set onmessage(e){this.listeners.push(e)}close(){this.port&&(this.postMessage(this.messageWithName(Wc)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new qc("message channel is already connected");if(e){if(void 0===e.origin)throw new qc("message channel remote.origin must be defined");if(null===e.window)throw new qc("message channel remote.window cannot be null");const t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName($c),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new qc("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),e.ports[0]&&(this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(zc)),this.connectionEstablished())}handleConnected(){if(this.connected)throw new qc("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(Yc)),this.errorHandler&&this.errorHandler(new qc("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}function Xc(){return`${Date.now()}${Math.floor(8e3*Math.random())}`}var Jc;!function(e){e.ACK="ack",e.OK="ok",e.ERROR="error"}(Jc||(Jc={}));class Zc{constructor(e={}){this.messageListeners=new Map,this.channel=new Kc(e.name),this.channel.onmessage=this.handleMessage.bind(this),void 0!==e.payloadSerializer&&(this.payloadSerializer=e.payloadSerializer),void 0!==e.errorSerializer&&(this.errorSerializer=e.errorSerializer)}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Xc(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})}sendMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Xc(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}request(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Xc(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})}respond(e,t){const r=`${e.type}:${Jc.OK}`;let n=t;return void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.postResponse(r,e,n)}reject(e,t){const r=`${e.type}:${Jc.ERROR}`;let n=t;return void 0!==this.errorSerializer&&(n=this.errorSerializer.serialize(t)),this.postResponse(r,e,n)}onMessage(e,t=Xc()){return this.addMessageEventListener(e,t),t}connect(e,t){void 0!==t&&(this.iframeID=t),this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){const t=this.messageListeners.get(e.data.type);void 0!==e.data.type&&"undefined"!==e.data.type?t?(!0===e.data.mustAcknowledge&&this.acknowledge(e.data),t.forEach((t=>{t.forEach((t=>{t(e)}))}))):this.errorHandler&&this.errorHandler(new qc(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `),e):void 0!==this.errorHandler&&this.errorHandler(new Vc("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){const t=new Gc(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(t,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){const{errorSerializer:t}=this,{payloadSerializer:r}=this;if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let n;const i=()=>{[Jc.ACK,Jc.OK,Jc.ERROR].forEach((t=>{const r=this.messageListeners.get(`${e.type}:${t}`);void 0!==r&&r.delete(n)}))},o=window.setTimeout((()=>{this.logMessengerTimeout(e)}),1e4);return new Promise(((s,a)=>{n=this.onMessage({listener(){clearTimeout(o),e.mustRespond||(i(),s({}))},messageType:`${e.type}:${Jc.ACK}`}),this.onMessage({listener(e){i();const{payload:t}=e.data;if(void 0===r)s(t);else{const e=r.deserialize(t);s(e)}},messageType:`${e.type}:${Jc.OK}`},n),this.onMessage({listener(e){i();const{payload:r}=e.data;if(void 0===t)a(r);else{const e=t.deserialize(r);a(e)}},messageType:`${e.type}:${Jc.ERROR}`},n)}))}acknowledge(e){const t=`${e.type}:${Jc.ACK}`;return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,payload:void 0,type:t})}postResponse(e,t,r){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}message(e){const t=this.handleMessageContract(e);return e.type&&"undefined"!==e.type||void 0===this.errorHandler||this.errorHandler(new Vc("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),t}addMessageEventListener(e,t){const{messageType:r,listener:n}=e,i=this.messageListeners.get(r);if(i){const e=i.get(t);e?e.push(n):i.set(t,[n])}else this.messageListeners.set(r,new Map([[t,[n]]]))}}const Qc=function(){const e={name:Hc.IFRAME_NAME};return new Zc(e)},eu=async function(e,t,r){const n=Hc.getSDKBaseUrlForEnv(r);e.connect({origin:n,window:t.contentWindow},t.id),await e.sendMessage("INITIALIZE",{env:r})},tu=/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/,ru=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];function nu(e){return"string"==typeof e&&e.length>0}const iu={build(e,t){const r=Qc(),n=new Uc;return Promise.resolve(Object.freeze({addEventListener:function(e,t){n.addEventListener(e,t)},captureAuthorization:async function(i){let o;try{const s=function(e){if(!e.idempotencyKey)throw new kc("idempotencyKey is invalid");if(!e.applicationId)throw new kc("applicationId is invalid");if(!e.locationId)throw new kc("locationId is invalid");if(null===e.total||!("total"in e))throw new kc("total needs to be provided");if("object"!=typeof e.total)throw new kc("total needs to be a struct with amount and currencyCode");if("number"!=typeof e.total.amount)throw new kc("total.amount needs to be a number");if(!nu(e.total.currencyCode))throw new kc("total.currencyCode needs to be valid");const t={applicationId:e.applicationId,idempotencyKey:e.idempotencyKey,locationId:e.locationId,total:e.total};if("CHARGE"!==e.intent&&"RECURRING_CHARGE"!==e.intent)throw new kc("intent needs to be one of CHARGE or RECURRING_CHARGE");if("CHARGE"===e.intent){if("bankNonce"in e&&"bankAccountId"in e)throw new kc("only one of bankNonce or bankAccountId needs to be provided");if("bankNonce"in e&&nu(e.bankNonce))return{...t,bankNonce:e.bankNonce,kind:"ONE_TIME_BANK_NONCE"};if("bankAccountId"in e&&nu(e.bankAccountId))return{...t,bankAccountId:e.bankAccountId,kind:"ONE_TIME_BANK_ACCOUNT_ID"};throw new kc("one of bankNonce or bankAccountId needs to be provided")}{if(!e.bankAccountId)throw new kc("bankAccountId needs to be provided for recurring payments");if("WEEKLY"!==e.cadence&&"MONTHLY"!==e.cadence)throw new kc("Unsupported cadence. Must be one of: WEEKLY, MONTHLY");if(!e.startDate)throw new kc("Invalid startDate");const r=function(e){const t=function(e){const t=e.match(tu);if(!t)throw new kc("Date did not match the YYYY-MM-DD format");const[r,n,i,o]=t.map(Number);return new Date(n,i-1,o)}(e);if(function(e){const t=`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`,r=new Date(`${t}T00:00:00-08:00`),n=new Date(r.getTime());return n.setDate(n.getDate()+1),{endDate:n,endDateMillis:n.getTime(),startDate:r,startDateMillis:r.getTime()}}(t).endDateMillis<Date.now())throw new kc("Start date is already over");return{day:t.getDate(),month:t.getMonth()+1,weekday:ru[t.getDay()],year:t.getFullYear()}}(e.startDate);return{...t,bankAccountId:e.bankAccountId,cadence:e.cadence,kind:"RECURRING",startDate:r}}}(i);o=await Bc(e,t),await eu(r,o,e);const a=await r.request("CAPTURE_AUTHORIZATION",s);"success"===a.kind?n.dispatchEvent({token:a.token,type:"signed"}):n.dispatchEvent({type:"canceled"})}catch(e){n.dispatchEvent({error:e,type:"error"})}o&&Fc(o)}}))}};var ou=["bankAccountDetails"];function su(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function au(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cu(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var uu={build(e){var{env:t,transactionId:r,session:n,context:i,onSigned:o,onCanceled:s,onError:a}=e;function c(){var e;return e=function*(e){var c=yield iu.build(t,qn.VERSION);i.metricsHandler.logEvent("ACH_AUTH:START");var{bankAccountDetails:u}=e,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,ou);c.addEventListener("signed",(function(e){o(e.token,u),i.metricsHandler.logEvent("ACH_AUTH:OK")})),c.addEventListener("canceled",(function(){i.metricsHandler.logEvent("ACH_AUTH:CANCEL"),s()})),c.addEventListener("error",(function(e){var{error:t}=e;t instanceof kc?a(new ii(t.message)):(a(new Ti("authorizing the payment")),i.errorLogger.captureException(t)),i.metricsHandler.logEvent("ACH_AUTH:ERROR")})),yield c.captureAuthorization(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?su(Object(r),!0).forEach((function(t){au(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):su(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({applicationId:n.applicationId,idempotencyKey:r,locationId:n.locationId},l))},c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){cu(o,n,i,s,a,"next",e)}function a(e){cu(o,n,i,s,a,"throw",e)}s(void 0)}))},c.apply(this,arguments)}return Object.freeze({run:function(e){return c.apply(this,arguments)}})}},lu=function(){var e=document.createElement("div");return e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100%",e.style.zIndex="3",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.opacity="0",document.body.appendChild(e),e.style.transition="opacity ".concat("cubic-bezier(0.26, 0.1, 0.48, 1)"," ").concat("0.24s"),setTimeout((function(){e.style.opacity="1"})),new Promise((function(t){setTimeout((function(){t(e)}),240)}))},du=function(e){e&&(e.style.transition="opacity ".concat("cubic-bezier(0.52, 0, 0.74, 0)"," ").concat("0.16s"),setTimeout((function(){e.style.opacity="0"})),setTimeout((function(){e.remove()}),160))};class hu{constructor(e){this.id=Ac(),this.context=e}request(e,t){return this.context.messenger.request(e,{body:t,featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession()})}initializeMessageBus(e){var t=this,r=function(e){t.context.messenger.onMessage({listener(t){e(t)},messageType:"".concat(n,":").concat(t.id)})};for(var[n,i]of Object.entries(e))r(i)}}class pu extends Error{constructor(e,t,r){super(`error loading script ${e}: ${t} ${r?r.toString():""}`),this.name="ScriptLoaderError",Object.setPrototypeOf(this,pu.prototype)}}const fu={};function gu(e){delete fu[e],document.getElementById(e)?.remove()}function vu(e,t){const r=t();if(void 0!==r)return Promise.resolve(r);if(e.id in fu)return fu[e.id];const n=document.createElement("script");for(const t in e){const r=e[t];void 0!==r&&n.setAttribute(t,r)}return fu[e.id]=new Promise(((r,i)=>{n.onload=()=>{const n=t();void 0===n?(gu(e.id),i(new pu(e.src,"location returned undefined"))):r(n)},n.onerror=(t,r,n,o,s)=>{gu(e.id),i(new pu(e.src,"Unknown error occurred",s))}})),document.body.appendChild(n),fu[e.id]}function mu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yu(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eu(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function _u(){var e;return e=function*(e,t,r,n){try{var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mu(Object(r),!0).forEach((function(t){yu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"square-payments-".concat(e,"-script")},t);return yield vu(i,(()=>{var e;return"google.payments"===r?null===(e=window.google)||void 0===e?void 0:e.payments:window[r]}))}catch(e){throw n.captureException(e),new mi(mc)}},_u=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Eu(o,n,i,s,a,"next",e)}function a(e){Eu(o,n,i,s,a,"throw",e)}s(void 0)}))},_u.apply(this,arguments)}var bu={load:function(e,t,r,n){return _u.apply(this,arguments)}};function Iu(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var Su=new Set(["ITEM_ERROR"]),Ou=new Set(["en","es"]),wu=["US"];function Cu(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Au(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Cu(o,n,i,s,a,"next",e)}function a(e){Cu(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Tu=(e,t)=>Au((function*(){var r=new hu(e),n=function(e,t,r,n){var i;function o(){var s;return s=function*(){var o=yield function(e,t){var r=e.getSession();if(void 0===r.locationId||""===r.locationId)throw new Ti("locationId not defined when creating OAuth Plaid Link Session");var n=c.windowNavigationLanguage.slice(0,2),i={createOAuthPlaidLinkSessionRequest:{clientId:r.applicationId,languageCode:n,locationId:r.locationId,redirectUri:""}};return t.request("CREATE_OAUTH_PLAID_LINK_SESSION",i)}(t,r);return function(r){return new Promise(((o,s)=>{var[a]=c.windowNavigationLanguage.split("-");Ou.has(a)||(a="en");var{errorLogger:u,metricsHandler:l,isTestMerchant:d}=t,h="sandbox";"production"!==qn.env||d||(h="production"),i=e.create({clientName:"Square, Inc.",countryCodes:wu,env:h,language:a,onEvent:(e,t)=>{e!==Rn.ERROR||Su.has(t.error_type)||u.captureException(new To("PlaidErrorEvent: ".concat(JSON.stringify(t)),Fi.ACH)),n.onEvent(e,t)},onExit:(e,t)=>{e&&(l.logEvent("EXTERNAL_SESSION:ERROR"),Su.has(e.error_type)||u.captureException(new To("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(JSON.stringify(t)),Fi.ACH))),o({kind:"canceled"})},onSuccess:(e,t)=>{if(0===t.accounts.length){l.logEvent("EXTERNAL_SESSION:ERROR");var n=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(t)));return u.captureException(n),void s(n)}l.logEvent("EXTERNAL_SESSION:OK"),o({gringottsSessionToken:r.gringottsSessionToken,kind:"success",publicToken:e,selectedBankAccountId:t.accounts[0].id})},product:["auth"],token:r.plaidLinkToken}),l.logEvent("EXTERNAL_SESSION:START"),i.open()}))}(o)},o=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=s.apply(e,t);function o(e){Iu(i,r,n,o,a,"next",e)}function a(e){Iu(i,r,n,o,a,"throw",e)}o(void 0)}))},o.apply(this,arguments)}return{beginFlow:function(){return o.apply(this,arguments)},destroy:function(){i&&(i.exit({force:!0}),i.destroy(),i=void 0)}}}(yield bu.load("plaid-link",{src:"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},"Plaid",e.errorLogger),e,r,{onEvent:t});function i(){return i=Au((function*(e){var t=yield n.beginFlow();if("success"===t.kind){var r=yield function(e,t,r,n){return o.apply(this,arguments)}(e.accountHolderName,t.publicToken,t.selectedBankAccountId,t.gringottsSessionToken);return r}return{status:Vi.CANCEL}})),i.apply(this,arguments)}function o(){return(o=Au((function*(t,n,i,o){yield e.waitForProofOfWorkCompletion();var s=e.getSession(),a={accountHolderName:t,gringottsSessionToken:o,plaidPublicToken:n,selectedPlaidBankAccountId:i},c={bankNonceRequest:{clientId:s.applicationId,instanceId:s.instanceId,locationId:s.locationId,paymentMethodTrackingId:e.getPaymentMethodTrackingId(),plaidLinkData:a,sessionId:s.sessionId,websdkVersion:qn.VERSION}};try{var u=yield r.request("REQUEST_ACH_BANK_NONCE",c);return e.setPaymentMethodTrackingId(u.paymentMethodTrackingId),{accountDetails:u.accountDetails,bankNonce:u.bankNonce,status:Vi.OK}}catch(e){throw e instanceof Ai?e:new Ai([Do])}}))).apply(this,arguments)}return Object.freeze({destroy:function(){n.destroy()},run:function(e){return i.apply(this,arguments)}})}))();function Pu(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Nu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Pu(o,n,i,s,a,"next",e)}function a(e){Pu(o,n,i,s,a,"throw",e)}s(void 0)}))}}class Ru extends Lc{constructor(e,t){var r;super(e),this.methodType=Fi.ACH,this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1;try{!function(e){if(po(e)){var t;try{t=new URL(e)}catch(t){throw new ai("redirectURI",e,"Must be a valid URI")}if([...t.searchParams.values()].length>0)throw new ai("redirectURI",e,"URI must not contain query parameters");return!0}throw new ai("redirectURI","".concat(e),"Must be a valid URI")}(null==t?void 0:t.redirectURI)}catch(e){this.metricsHandler.logEvent("INVALID_REDIRECT_URI",Sc(e))}try{!function(e){if(po(e)){if(e.length>50)throw new ai("transactionId",e,"String must be between 1 and 50 characters");return!0}throw new ai("transactionId","".concat(e),"String must be between 1 and 50 characters")}(null==t?void 0:t.transactionId)}catch(e){this.metricsHandler.logEvent("INVALID_TRANSACTION_ID",Sc(e))}this.transactionId=null!==(r=null==t?void 0:t.transactionId)&&void 0!==r?r:Ac()}initialize(){var e=this;return Nu((function*(){var t=e.dispatchPlaidEvent.bind(e);e.plaidNonceFlow=yield Tu(e.context,t),e.achAuthFlow=uu.build({context:e.context,env:qn.env,onCanceled:e.dispatchCancelResult.bind(e),onError:e.dispatchError.bind(e),onSigned:e.dispatchSuccessfulTokenResult.bind(e),session:e.session,transactionId:e.transactionId})}))()}tokenize(e){var t=this;return Nu((function*(){try{if(t.throwIfDestroyed(),t.tokenizeInProgress)throw new Ai([xc]);if(void 0===e||"string"!=typeof e.accountHolderName||""===e.accountHolderName.trim())throw new Gn;var r=t.context.getFeatureFlagValues().can_use_ach_auth;if(!function(e,t){switch(t){case"NO_SUPPORT":return Lu(e);case"SUPPORTED":case"LEGACY":return!0;case"REQUIRED":return!Lu(e);default:return!1}}(e,r))throw new ii("Invalid parameter format for ACH tokenize");if(!t.hasEventListener(Rn.ON_TOKENIZATION)){var n="Add event listener for '".concat(Rn.ON_TOKENIZATION,"' before calling tokenize.");console.error("".concat(n," This will result in an error when using the Plaid OAuth flow."))}if(void 0===t.achAuthFlow||void 0===t.plaidNonceFlow)throw new Ti("Must call initialize() before tokenize() call");if(t.tokenizeInProgress=!0,t.handleFirstInteraction(),function(e){return Du(e)&&"RECURRING_CHARGE"===e.intent}(e))return t.veil=yield lu(),void(yield t.achAuthFlow.run({bankAccountId:e.bankAccountId,cadence:e.cadence,intent:e.intent,startDate:e.startDate,total:e.total}));if(function(e){return Du(e)&&"CHARGE"===e.intent}(e)&&void 0!==e.bankAccountId&&""!==e.bankAccountId)return t.veil=yield lu(),void(yield t.achAuthFlow.run({bankAccountId:e.bankAccountId,intent:e.intent,total:e.total}));Lu(e)?(t.context.metricsHandler.logEvent("ACH_LEGACY:START"),console.warn("You need to add two new parameters to ach.tokenize(), intent and total, before January 29, 2025 to continue processing ACH payments with the Web Payments SDK. Please complete these steps ASAP to prevent failed ACH payments: https://developer.squareup.com/docs/web-payments/add-ach#step-2-get-the-payment-token-from-the-ach-payment-method")):t.veil=yield lu();var i=yield t.plaidNonceFlow.run(e);if(Lu(e)||"LEGACY"===r)switch(t.context.metricsHandler.logEvent("ACH_LEGACY:OK"),i.status){case Vi.OK:var o=ku(i.bankNonce,i.accountDetails);return t.dispatchTokenizationEvent(o),t.resetFirstInteraction(),o;case Vi.CANCEL:var s=xu();return t.dispatchTokenizationEvent(s),s;default:throw new Ti("Unexpected tokenize flow status")}return void(yield t.runAchAuthFlowBasedOnPlaidResult(i,e))}catch(e){throw t.dispatchError(e),e}finally{t.tokenizeInProgress=!1,du(t.veil)}}))()}destroy(){var e;return this.status=Pc.DESTROYED,this.metricsHandler.logEvent("DESTROYED"),null===(e=this.plaidNonceFlow)||void 0===e||e.destroy(),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}runAchAuthFlowBasedOnPlaidResult(e,t){var r=this;return Nu((function*(){if(e.status===Vi.CANCEL)r.dispatchTokenizationEvent(xu());else switch(t.intent){case"CHARGE":yield r.achAuthFlow.run({bankAccountDetails:e.accountDetails,bankNonce:e.bankNonce,intent:t.intent,total:t.total});break;case"STORE":r.dispatchSuccessfulTokenResult(e.bankNonce,e.accountDetails);break;default:throw new ii("Unsupported intent ".concat(t.intent,". Must be one of: CHARGE, STORE, RECURRING_CHARGE"))}}))()}resetFirstInteraction(){this.wasFirstInteractionCalled=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK"))}dispatchCancelResult(){this.dispatchTokenizationEvent(xu())}dispatchSuccessfulTokenResult(e,t){this.resetFirstInteraction();var r=ku(e,t);this.dispatchTokenizationEvent(r)}dispatchError(e){this.dispatchEvent(Rn.ON_TOKENIZATION,{error:e})}dispatchPlaidEvent(e,t){this.dispatchEvent(e,t)}dispatchTokenizationEvent(e){this.dispatchEvent(Rn.ON_TOKENIZATION,{tokenResult:e})}}function Du(e){return"intent"in e}function Lu(e){return!("intent"in e)}function xu(){return{status:Vi.CANCEL}}function ku(e,t){var r={status:Vi.OK,token:e};return t&&(r.details={bankAccount:t,method:Fi.ACH}),r}var Mu,ju,Uu,Hu,Bu=[Wn,Yn,Kn,Xn],Fu=new Set(["DIV","SPAN"]),qu=new Set(["DIV","SPAN"]),Vu=new Set(["DIV","SPAN","BUTTON"]);function Gu(e,t){var r;if(function(e){return"string"==typeof e}(e)){var n=document.querySelector(e);if(!n)throw new ei(e);r=n}else{if(!(e instanceof HTMLElement))throw new bi(e,t);if(r=e,!document.contains(r))throw new ei(r)}if(!t.has(r.nodeName))throw new bi(r,t);return r}function zu(e){return Gu(e,Fu)}function $u(e){return Gu(e,Vu)}function Wu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wu(Object(r),!0).forEach((function(t){Ku(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ku(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xu(e,t){if("object"!=typeof e)return{isValid:!1,missingFields:[]};var r=[];return{isValid:Object.entries(t).map((t=>{var[n,i]=t;if("object"==typeof i){var o=Xu("object"==typeof e[n]?e[n]:{},i);return o.missingFields.forEach((e=>{var[t,i]=e;r.push(["".concat(n,".").concat(t),i])})),o.isValid}return n in e&&typeof e[n]===i||(r.push([n,i]),!1)})).every(Boolean),missingFields:r}}function Ju(e,t,r){if(!Array.isArray(e))return{isValid:!1,missingFields:[[t,"Array"]]};var n=e.reduce(((e,n)=>{var i=Xu({[t]:n},{[t]:r}),o=Object.fromEntries(i.missingFields);return{isValid:e.isValid&&i.isValid,missingFieldsMap:Yu(Yu({},e.missingFieldsMap),o)}}),{isValid:!0,missingFieldsMap:{}});return{isValid:n.isValid,missingFields:Object.entries(n.missingFieldsMap)}}!function(e){e.SHIPPING_ADDRESS_UNRECOGNIZED="SHIPPING_ADDRESS_UNRECOGNIZED",e.SHIPPING_ADDRESS_UNSUPPORTED="SHIPPING_ADDRESS_UNSUPPORTED",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"}(Mu||(Mu={})),function(e){e.BADGE="badge",e.LOCKUP="lockup"}(ju||(ju={})),function(e){e.BLACK="black",e.WHITE="white",e.MINT="mint"}(Uu||(Uu={})),function(e){e.UPDATE="update"}(Hu||(Hu={})),r(488),r(6104);var Zu="".concat(qn.ASSET_URL,"/afterpay.css"),Qu="sq-afterpay-styles",el="b8a38183b2e5959390488e48f9b109f6a73fd53c",tl={development:"https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(el),production:"https://portal.afterpay.com/afterpay.js?merchant_key=".concat(el),sandbox:"https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(el),staging:"https://portal.stage.afterpay-beta.com/afterpay.js?merchant_key=".concat(el),test:"https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(el)},rl={development:"https://js-sandbox.squarecdn.com/square-marketplace.js",production:"https://js.squarecdn.com/square-marketplace.js",sandbox:"https://js-sandbox.squarecdn.com/square-marketplace.js",staging:"https://portal.stage.afterpay-beta.com/square-marketplace.js",test:"https://js-sandbox.squarecdn.com/square-marketplace.js"},nl={[Dn.BLACK]:{[Ln.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg",[Ln.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg",[Ln.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"},[Dn.MINT]:{[Ln.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg",[Ln.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg",[Ln.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}},il={[Dn.BLACK]:{[Ln.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg",[Ln.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg",[Ln.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"},[Dn.MINT]:{[Ln.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg",[Ln.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg",[Ln.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}},ol=new Set(["US","CA","AU","NZ"]);function sl(e,t){var r=0;return e.forEach((e=>{r+=vo(e,t)})),go(r,t)}function al(e,t){return sl(e.map((e=>e.amount)),t)}var cl=function(e){return{area1:e.city,countryCode:e.countryCode,line1:e.addressLines[0],line2:e.addressLines[1],name:"".concat(e.givenName," ").concat(e.familyName),phoneNumber:e.phone,postcode:e.postalCode,region:e.state}},ul=function(e,t){return e.map((e=>({amount:{amount:e.amount,currency:t},displayName:e.label})))},ll=function(e,t){return e.map((e=>({imageUrl:e.imageUrl,name:e.label,pageUrl:e.productUrl,price:{amount:e.amount,currency:t},quantity:1,sku:e.id})))},dl=function(e,t){return e.shippingOptions.map((e=>{var r;return{description:"",id:e.id,name:e.label,orderAmount:{amount:e.total.amount,currency:t.currencyCode},shippingAmount:{amount:e.amount,currency:t.currencyCode},taxAmount:{amount:al(null!==(r=e.taxLineItems)&&void 0!==r?r:[],t.currencyCode),currency:t.currencyCode}}}))},hl=function(e){if(e.requestShippingContact&&void 0!==e.lineItems&&e.lineItems.length>0){var t=al(e.lineItems,e.currencyCode);return e.discounts&&(t=sl([t,(r=e.discounts,n=e.currencyCode,"-".concat(al(r,n)))],e.currencyCode)),{amount:t,currency:e.currencyCode}}var r,n;return{amount:sl([e.total.amount],e.currencyCode),currency:e.currencyCode}},pl=function(e){return{amount:e.shippingAmount.amount,id:e.id,label:e.name}},fl=function(e){var t,r,n=[];return[e.address1,e.address2].forEach((e=>{void 0!==e&&n.push(e)})),e.name&&([t,r]=e.name.split(/\s(?=\S+$)/)),{addressLines:n,city:e.suburb,countryCode:e.countryCode,familyName:r,givenName:t,phone:e.phoneNumber,postalCode:e.postcode,state:e.state}};function gl(e,t){var r={[t]:{addressLines:"object",city:"string",countryCode:"string",familyName:"string",givenName:"string",postalCode:"string",state:"string"}};return Xu({[t]:e},r)}var vl=function(e){return gl(e,"shippingContact")};function ml(e){var[t,r]=e.split("-");return ol.has(r)}var yl=function(e,t){return ml(t)?nl[e]:il[e]},El=function(e){return ml(e)?"afterpay-brand.svg":"clearpay-brand.svg"};function _l(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var bl=[25,50,75,100];class Il{constructor(e,t){this.attached=!1,this.req=e,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),this.context=t,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var{today:r,weeks:n}=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget;this.periodText=[r,"2 ".concat(n),"4 ".concat(n),"6 ".concat(n)],t.addLocaleChangedListener((()=>{this.locale=this.context.getSession().locale,this.update()})),e.addEventListener(Hu.UPDATE,(()=>{this.update()}))}attach(e,t){var r,n=this;return(r=function*(){n.element=e,Ja.addStyleElement(Zu,Qu,n.resolveStylePromise,n.rejectStylePromise);try{yield n.stylesLoadedPromise}catch(e){throw new Ti("attaching the Afterpay Checkout Widget")}var r=n.buildAmounts().map((e=>fo(e,n.currencyCode,n.locale))),i=!1;t&&t.includeBranding&&(i=!0);var o=El(n.locale),s='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(qn.staticAsset(o),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(n.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(r.map(((e,t)=>'\n              <div id="ap-payment-container-'.concat(t,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function(e){var t=12,r=2*Math.PI*6,n=r*bl[e]/100;return'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(t,'"\n          stroke-dasharray="').concat(n," ").concat(r,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')}(t),'\n                </div>\n                <p id="ap-payment-amount-').concat(t,'" class="sq-ap__amount">').concat(e,'</p>\n                <p class="sq-ap__period">').concat(n.periodText[t],"</p>\n              </div>\n            "))).join(""),"\n        </div>\n      </div>\n    ");n.element.insertAdjacentHTML("afterbegin",s),n.attached=!0},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function s(e){_l(o,n,i,s,a,"next",e)}function a(e){_l(o,n,i,s,a,"throw",e)}s(void 0)}))})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var t=El(this.locale);e.src=qn.staticAsset(t)}this.buildAmounts().map((e=>fo(e,this.currencyCode,this.locale))).forEach(((e,t)=>{var r,n=null===(r=this.element)||void 0===r?void 0:r.querySelector("#ap-payment-amount-".concat(t));n&&(n.innerHTML=e)}))}}buildAmounts(){var e=vo(this.req.total.amount,this.req.currencyCode),t=e/4;switch(e%4){case 0:return Sl(t,0);case 1:return Sl(t,1);case 2:return Sl(t,-2);case 3:return Sl(t,-1);default:return[]}}}function Sl(e,t){var r=Array.from({length:3}).fill(Math.round(e));return r.push(e+t),r}function Ol(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(r),!0).forEach((function(t){Cl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ol(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cl(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Al(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Tl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Al(o,n,i,s,a,"next",e)}function a(e){Al(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Pl=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),Nl=new Set(["AUD","GBP","USD","CAD","EUR"]),Rl={[Dn.BLACK]:"#000",[Dn.MINT]:"#b2fce4"};class Dl extends Lc{constructor(e,t,r,n,i){if(super(n),this.methodType=Fi.AFTERPAY_CLEARPAY,this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=t,this.req=r,this.paymentRequestLockController=i,this.paymentMessenger=new hu(this.context),this.total=this.totalMoney(),void 0===this.session.locationId||""===this.session.locationId)throw new mi(gc,"locationId");this.locationID=this.session.locationId,this.req.addEventListener("update",(()=>{delete this.checkoutTokenResponse,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()}))}attach(e,t){var r=this;return Tl((function*(){var n;r.throwIfDestroyedOrAlreadyAttached(),r.status=Pc.ATTACHED,r.metricsHandler.logEvent("ATTACH:START"),r.metricsHandler.logEvent("CONFIGURED",t);try{n=$u(e)}catch(e){throw r.metricsHandler.logEvent("ATTACH:ERROR","good"),r.status=Pc.DETACHED,e}if(!0!==(null==t?void 0:t.useCustomButton)){var i,o,s=document.createElement("div");n.appendChild(s);var a=s.attachShadow({mode:"open"});try{yield Ja.addStyleElementToTarget(Zu,Qu,a)}catch(e){throw r.status=Pc.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","bad"),new Ti("attaching Afterpay")}var c=null!==(i=null==t?void 0:t.buttonColor)&&void 0!==i?i:Dn.BLACK,u=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:Ln.BuyNowWithAfterpay;if(!["black","mint"].includes(c))throw r.status=Pc.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","bad"),new ai("buttonColor",c);var l=yl(c,r.session.locale)[u];if(!l)throw r.status=Pc.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","bad"),new ai("buttonType",u);var d=document.createElement("button");d.setAttribute("type","button"),d.setAttribute("class","sq-ap__button"),d.style.backgroundColor=Rl[c],d.style.backgroundImage="url(".concat(qn.staticAsset(l),")"),a.append(d)}r.buyNowOption=(null==t?void 0:t.finalCtaButtonType)===xn.BUY_NOW,r.initializeAfterpayPopup(n),r.metricsHandler.logEvent("ATTACH:OK","good"),r.element=n,r.onTokenizeHandlerAdded&&r.element.addEventListener("click",Tl((function*(){yield r.openPaymentModal()})))}))()}attachMessaging(e,t){return this.throwIfDestroyed(),function(e){Gu(e,qu)}(e),this.afterpayMessagingLibrary.createPlacements({attributes:{amount:Number(this.req.total.amount),badgeTheme:null==t?void 0:t.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:null==t?void 0:t.modalLinkStyle,modalTheme:null==t?void 0:t.modalTheme,size:null==t?void 0:t.size},targetSelector:e}),Promise.resolve()}attachCheckoutWidget(e,t){var r=this;return Tl((function*(){if(!Nl.has(r.req.currencyCode))throw new Jn("Currency is not supported by Afterpay. Valid currencies are: ".concat([...Nl].join(", ")));var n=new Il(r.req,r.context),i=$u(e);yield n.attach(i,t)}))()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ao(this.session.locale);Pl.has(t)||(t="en_US"),this.afterpayMessagingLibrary.launchModal(wl(wl({},e),{},{locale:t}))}onTokenize(e){var t,r=this;this.throwIfDestroyed(),this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach((e=>{var{result:t,error:r}=e;this.emitTokenizationResult(t,r)})),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(t=this.element)||void 0===t||t.addEventListener("click",Tl((function*(){yield r.openPaymentModal()}))),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return Tl((function*(){if(e.throwIfDestroyedOrNotAttached(),e.onTokenizeHandlerAdded)throw new zn;var t,r,n=new Promise(((e,n)=>{t=e,r=n}));return e.onTokenizeCallbacks=[function(e,n){void 0===n?void 0!==e?t(e):r(new Ai([Ro.UNKNOWN])):r(n)}],yield e.openPaymentModal(),n}))()}destroy(){return this.status===Pc.DESTROYED?Promise.resolve(!1):(this.detachElement(Pc.DESTROYED,"DESTROYED"),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(Pc.DETACHED,"DETACHED"),Promise.resolve(!0)}internalSetCheckoutToken(){var e=this;return Tl((function*(){try{var t=yield e.paymentMessenger.request("REQUEST_AFTERPAY_CHECKOUT_HANDLER",e.buildCheckoutPayload());return e.checkoutTokenResponse=t,e.checkoutTokenResponse.token}catch(t){var r=t;throw ho(t,[...Bu,pi,ti,Jn])||(e.errorLogger.captureException(t),r=new Ti("tokenizing with Afterpay")),r}}))()}commenceCheckout(e){var t=this;return Tl((function*(){if(t.wasFirstInteractionCalled||(t.wasFirstInteractionCalled=!0,t.metricsHandler.logEvent("FIRST_INTERACTION:OK")),t.metricsHandler.logEvent("EXTERNAL_SESSION:START"),t.paymentRequestLockController.lock(t),void 0!==t.checkoutTokenResponse&&new Date(t.checkoutTokenResponse.expires)>new Date)e.resolve(t.checkoutTokenResponse.token);else try{var r=yield t.internalSetCheckoutToken();e.resolve(r)}catch(r){t.paymentRequestLockController.unlock(t),t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR");var n=Ic(r);t.emitTokenizationResult(void 0,n),e.reject(n.message)}}))()}completeCheckout(e){var t=this;return Tl((function*(){try{if(function(e){return"SUCCESS"===e.status&&void 0!==e.orderToken}(e)){yield t.context.waitForProofOfWorkCompletion();var r=yield t.paymentMessenger.request("REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",t.buildInstantWalletTokenPayload(e.orderToken,t.total));t.metricsHandler.logEvent("EXTERNAL_SESSION:OK");var n={details:{method:Fi.AFTERPAY_CLEARPAY,shipping:{contact:{email:r.afterpayData.email}}},status:Vi.OK,token:r.token};r.billingContact&&(n.details.billing=r.billingContact),r.shippingContact&&(n.details.shipping={contact:r.shippingContact}),delete t.checkoutTokenResponse,t.emitTokenizationResult(n)}else t.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),t.emitTokenizationResult({status:Vi.CANCEL})}catch(e){var i;t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),e instanceof Ai?i=e:(t.errorLogger.captureException(e),i=new Ti("tokenizing Afterpay")),t.emitTokenizationResult(void 0,i)}t.paymentRequestLockController.unlock(t)}))()}onShippingOptionChange(e){this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.total.amount=vo(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(Hn.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:pl(e)},(e=>{}))}onShippingAddressChange(e,t){if(!this.req.hasEventListener(Hn.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new $n("PaymentRequest",Hn.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),t.reject(Mu.SERVICE_UNAVAILABLE),void this.afterpayLibrary.close();var r=this.req;this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.req.dispatchEvent(Hn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:fl(e)},(e=>{if(void 0===e.error)if(e.shippingErrors)t.reject(Mu.SHIPPING_ADDRESS_UNRECOGNIZED);else{var n=dl(e,r);t.resolve(n)}else t.reject(Mu.SHIPPING_ADDRESS_UNSUPPORTED)}))}emitTokenizationResult(e,t){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({error:t,result:e}):this.onTokenizeCallbacks.forEach((r=>{r(e,t)}))}buildInstantWalletTokenPayload(e,t){return{afterpayData:{afterpayToken:e,buyerAmount:t},clientID:this.session.applicationId,instanceID:this.session.instanceId,locationID:this.locationID,paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact,sessionID:this.session.sessionId,websdkVersion:qn.VERSION}}buildCheckoutPayload(){var e,t={amount:hl(this.req),applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl};if(this.req.lineItems&&(t.items=ll(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(t.discounts=ul(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact?e=this.req.shippingContact:this.req.pickupContact&&(e=this.req.pickupContact),void 0!==e){var r=vl(e);if(!r.isValid)throw new ti(r.missingFields);t.shipping=cl(e)}return t}totalMoney(){return{amount:vo(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return Tl((function*(){e.afterpayLibrary.open();var t=yield new Promise(((t,r)=>{e.commenceCheckout({reject:r,resolve:t})}));e.afterpayLibrary.transfer(wl({token:t},e.transferOptions))}))()}initializeAfterpayPopup(e){var t=this.commenceCheckout.bind(this),r=this.completeCheckout.bind(this),n=document.createElement("div");n.id="sq-afterpay-dummy-element-".concat(Ac()),n.style.visibility="hidden",e.appendChild(n),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact},this.req.requestShippingContact||this.req.pickupContact||(this.transferOptions.addressMode="NO_ADDRESS");var i,o,s={addressMode:this.transferOptions.addressMode,countryCode:this.req.countryCode,onCommenceCheckout:(o=Tl((function*(e){yield t(e)})),function(e){return o.apply(this,arguments)}),onComplete:(i=Tl((function*(e){var{data:t}=e;yield r(t)})),function(e){return i.apply(this,arguments)}),shippingOptionRequired:this.req.requestShippingContact,target:"#".concat(n.id)};this.req.requestShippingContact?(s.onShippingAddressChange=this.onShippingAddressChange.bind(this),s.onShippingOptionChange=this.onShippingOptionChange.bind(this)):this.req.pickupContact&&(this.transferOptions.pickup=!0),this.afterpayLibrary.initializeForPopup(s),e.removeChild(n)}detachElement(e,t){this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.element=null,this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],this.status=e,this.metricsHandler.logEvent(t)}}var Ll=function(e){var t=e.getFeatureFlagValues().use_new_afterpay_script,r=function(e,t,r){var n=t?rl:tl,i=n.sandbox;return"staging"===e&&(i=n.staging),"production"!==e||r||(i=n.production),i}(qn.env,t,e.isTestMerchant);return Promise.all([bu.load("afterpay",{src:r},"AfterPay",e.errorLogger),bu.load("afterpay-messaging",{src:"https://js.afterpay.com/afterpay-1.x.js"},"Afterpay",e.errorLogger)])},xl=function(e,t){var r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},Object.entries(e).forEach((e=>{var[t,n]=e;"style"===t?Object.entries(n).forEach((e=>{var[t,n]=e;r.style.setProperty(t,n,"important")})):r.setAttribute(t,n)})),t?t.appendChild(r):document.body.appendChild(r)}))},kl=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},Ml=[Ei,wi,Si,Oi,Ci],jl=[Si,Oi,wi,Ci,yi,_i],Ul=[Ai,Ei,bc],Hl=["top","right","bottom","left"],Bl="sq-focus",Fl="sq-error",ql=".".concat(Bl),Vl=".".concat(Fl),Gl={ASPECT_RATIO:/^\d+\/\d+$/,HEX:/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,NEGATIVE_EM:/^-\d*\.?\d+em$/,NEGATIVE_PERCENT:/^\d*\.?\d+%$/,NEGATIVE_PT:/^-\d*\.?\d+pt$/,NEGATIVE_PX:/^-\d*\.?\d+px$/,POSITIVE_EM:/^\d*\.?\d+em$/,POSITIVE_PERCENT:/^\d*\.?\d+%$/,POSITIVE_PT:/^\d*\.?\d+pt$/,POSITIVE_PX:/^\d*\.?\d+px$/,POSITIVE_RESOLUTION:/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,RGB:/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,RGBA:/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/},zl=/\s(?![^(]*\))/,$l=new Set(["screen","all","print","speech"]),Wl=new Set(["and"]),Yl=new Set(["not","only"]),Kl=new Set(["portrait","landscape"]),Xl=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),Jl=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),Zl=new Set([100,200,300,400,500,600,700,800,900]),Ql=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),ed=new Set(["normal"]),td=new Set(["smaller","larger"]),rd=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),nd=new Set(["none","antialiased","subpixel-antialiased"]),id=new Set(["grayscale","auto"]),od=new Set(["none"]);function sd(e){return e.split(/, ?(?![^(]*\))/).every((e=>function(e){if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),r=0;if("inset"===t[0]&&(t.shift(),r+=1),"inset"===t[t.length-1]){if(r>0)return!1;t.pop()}for(var n=0;n<2;n+=1){var i=t.shift();if(void 0===i||!hd(i))return!1}switch(t.length){case 0:return!0;case 1:return gd(t[0])||fd(t[0]);case 2:return fd(t[0])&&(gd(t[1])||pd(t[1]));case 3:return fd(t[0])&&pd(t[1])&&gd(t[2]);default:return!1}}(e)))}function ad(e){return["border-box","content-box"].includes(e)}function cd(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||Ad(e)||Nd(e)}(e)))}function ud(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(ld)}function ld(e){return 0===Number(e)||Ad(e)||Nd(e)}function dd(e){return 0===Number(e)||Ad(e)||Nd(e)||Td(e)||Rd(e)}function hd(e){return 0===Number(e)||Cd(e)||Pd(e)}function pd(e){return 0===Number(e)||Cd(e)||Pd(e)}function fd(e){return 0===Number(e)||Ad(e)||Nd(e)}function gd(e){return function(e){return Jl.has(e.toLowerCase())}(e)||function(e){return Gl.HEX.test(e)}(e)||function(e){return Gl.RGB.test(e)}(e)||function(e){return Gl.RGBA.test(e)}(e)}function vd(e){return function(e){return Xl.has(e.toLowerCase())}(e)||function(e){return td.has(e.toLowerCase())}(e)||Ad(e)||Dd(e)||Nd(e)||Ld(e)}function md(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),rd.has(t);var t}))}function yd(e){var t=Number(e);return Number.isNaN(t)?Ql.has(e.toLowerCase()):Zl.has(t)}function Ed(e){return"normal"===e||Pd(e)||function(e){return Dd(e)||function(e){return Gl.NEGATIVE_PT.test(e)}(e)}(e)||Cd(e)}function _d(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||ed.has(e)||Nd(e)||Ad(e)||Dd(e)||Ld(e)}function bd(e){return nd.has(e)}function Id(e){return id.has(e)}function Sd(e){return od.has(e)}function Od(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return Ad(e)||Nd(e)||Ld(e)||0===Number(e)}(e)))}function wd(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[r,n]=t.split(/: */);switch(r){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return Ad(n)||Nd(n)||Ld(n);case"resolution":case"min-resolution":case"max-resolution":return function(e){return Gl.POSITIVE_RESOLUTION.test(e)}(n);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return Gl.ASPECT_RATIO.test(e)}(n);case"color":case"color-index":case"monochrome":return void 0===n;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(n);case"orientation":return function(e){return Kl.has(e)}(n);default:return!1}}function Cd(e){return Ad(e)||Td(e)}function Ad(e){return Gl.POSITIVE_PX.test(e)}function Td(e){return Gl.NEGATIVE_PX.test(e)}function Pd(e){return Nd(e)||Rd(e)}function Nd(e){return Gl.POSITIVE_EM.test(e)}function Rd(e){return Gl.NEGATIVE_EM.test(e)}function Dd(e){return Gl.POSITIVE_PT.test(e)}function Ld(e){return Gl.POSITIVE_PERCENT.test(e)}var xd=function(e,t){var r=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return gd;case"-webkit-box-shadow":case"box-shadow":return sd;case"box-sizing":return ad;case"font-family":return md;case"font-size":return vd;case"font-weight":return yd;case"letter-spacing":return Ed;case"line-height":return _d;case"padding":return Od;case"-webkit-font-smoothing":return bd;case"-moz-osx-font-smoothing":return Id;case"display":return Sd;case"border-radius":return cd;case"border-width":return ud;case"top":case"bottom":case"left":case"right":return dd;case"width":return function(e){return""!==e};default:return}})(e);return r&&r(t)||function(e){return["unset","inherit","revert","initial"].includes(e)}(t)?t:""},kd=function(e){return!!(t=e).startsWith("@media")&&t.slice(7,t.length).split(/, */).every((e=>{var t=e.split(zl);if(0===t.length)return!1;var r=0;if(!t[0].startsWith("(")){var n=0;if(Yl.has(t[0])&&(n=1),t.length===n+1)return $l.has(t[n]);if(!$l.has(t[n])||!Wl.has(t[n+1]))return!1;r=2+n}if((t.length-r)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(r)))if(!(Number(i)%2==0?wd(o):Wl.has(o)))return!1;return!0}));var t};function Md(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r.length>0&&!r.includes(e))throw new Si(e);var i=co(e),o=xd(i,t);if(0===o.length)throw new Oi(e,t);return n&&(o+=" !important"),lo(i,o)}function jd(e,t,r){var n,i=[],o=[],s=new Set(null!==(n=e.excludeProperties)&&void 0!==n?n:[]);for(var[a,c]of Object.entries(t))if(!s.has(a))try{i.push(Md(a,null!=c?c:"",r))}catch(e){(e instanceof Si||e instanceof Oi)&&o.push(e)}if(o.length>0)throw new Ci(o);return Object.fromEntries(e.toSelectors.map((function(e){return[e,i]})))}function Ud(e,t,r){var n={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:s,toProperty:a,toSelectors:c,transformPropertyValue:u}=e,l=t[o];if(po(l)){var d=u?u(l):l;try{var h=Md(null!=a?a:o,d,void 0!==a?[...r,a]:r,s);c.forEach((e=>{e in n||(n[e]=[]),n[e].push(h)}))}catch(e){(e instanceof Si||e instanceof Oi)&&i.push(e)}}})),i.length>0)throw new Ci(i);return n}var Hd=function(e,t){var r=t.split(" ");switch(r.length){case 1:return r[0];case 2:switch(e){case"top":case"bottom":return r[0];default:return r[1]}case 3:switch(e){case"top":return r[0];case"bottom":return r[2];default:return r[1]}case 4:switch(e){case"top":return r[0];case"right":return r[1];case"bottom":return r[2];case"left":return r[3];default:return""}default:return""}},Bd=function e(t,r,n){var i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=[],a=[...Object.keys(r.selectorMappings),...Object.keys(null!==(i=r.selectorPropertyMappings)&&void 0!==i?i:{})],c=new Set(a),u=new Set(Object.values(n));Object.keys(t).forEach((e=>{u.has(e)||function(e,t){return!t&&kd(e)}(e,o)||s.push(new wi(e))}));var l={};function d(e){for(var[t,r]of Object.entries(e))t in l||(l[t]=[]),l[t].push(...r)}for(var h of c){var p,f,g,v,m=t[h],y=null!==(p=r.allowedAttributes[h])&&void 0!==p?p:[],E=null!==(f=r.selectorMappings[h])&&void 0!==f?f:[],_=null!==(g=null===(v=r.selectorPropertyMappings)||void 0===v?void 0:v[h])&&void 0!==g?g:[];if(m){try{d(jd(E,m,y))}catch(e){e instanceof Ci&&s.push(...e.errors)}try{d(Ud(_,m,y))}catch(e){e instanceof Ci&&s.push(...e.errors)}}}if(Object.keys(t).filter((e=>!c.has(e)&&kd(e))).forEach((i=>{try{var o=e(t[i],r,n,!0);l[i]=[o]}catch(e){e instanceof Ci&&s.push(...e.errors)}})),s.length>0)throw new Ci(s);return function(e){var t=[];for(var[r,n]of Object.entries(e))n&&n.length>0&&t.push("\n      ".concat(r," { ").concat(n.join(" ")," }\n      "));return t.join("")}(l)},Fd="sq-card-iframe-container",qd="sq-card-wrapper",Vd="sq-card-component",Gd="sq-card-message",zd="sq-card-message-error",$d="sq-card-message-no-error",Wd="sq-visible",Yd=".".concat(qd),Kd=".".concat(Vd),Xd=".".concat(Fd),Jd="".concat(Yd).concat(ql),Zd="".concat(Yd).concat(Vl),Qd="".concat(Yd," ").concat(Kd),eh="".concat(Yd," ").concat(Xd),th="".concat(Jd," ").concat(Xd),rh="".concat(Zd," ").concat(Xd),nh=".sq-card-message-error::before",ih=".sq-card-message-no-error::before",oh="".concat(Xd).concat("::before"),sh=["borderWidth"];function ah(e){var t=["".concat(e).concat(Vl," ").concat(oh),"".concat(e).concat(ql," ").concat(oh)];return Hl.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(r=e,function(e){var t=Hd(r,e);return t.startsWith("0")?t:"-".concat(t)})};var r}))}function ch(e,t){return Bd(e,function(e){var t="#".concat(e);return{allowedAttributes:{[Cn.CARD_COMPONENT]:Gi,[Cn.CARD_COMPONENT_FOCUS]:zi,[Cn.CARD_COMPONENT_ERROR]:zi,[Cn.CARD_INPUT_HELPER_TEXT]:$i,[Cn.CARD_INPUT_HELPER_ICON]:Wi,[Cn.CARD_INPUT_ERROR_TEXT]:$i,[Cn.CARD_INPUT_ERROR_ICON]:Wi},selectorMappings:{[Cn.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(eh)]},[Cn.CARD_COMPONENT_FOCUS]:{excludeProperties:sh,toSelectors:["".concat(t).concat(th)]},[Cn.CARD_COMPONENT_ERROR]:{excludeProperties:sh,toSelectors:["".concat(t).concat(rh)]},[Cn.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-no-error")]},[Cn.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(ih)]},[Cn.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-error")]},[Cn.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(nh)]}},selectorPropertyMappings:{[Cn.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(eh)]}],[Cn.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat(oh),"".concat(t).concat(Qd)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(eh)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var r=Hd(t,e);return"0"===r&&(r="0px"),r})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...ah(t)],[Cn.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat(Vl," ").concat(oh)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Vl," ").concat(oh)]}],[Cn.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(ql," ").concat(oh)]},{property:"borderWidth",toSelectors:["".concat(t).concat(ql," ").concat(oh)]}],[Cn.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(nh)]}],[Cn.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(ih)]}]}}}(t),Cn)}class uh{constructor(e){var{applePayMerchantIdentifier:t,cashAppPayMerchantIdentifier:r,merchantName:n,applicationId:i,avt:o,hostname:s,locationId:a,instanceId:c,sessionId:u,sourceUrl:l,locale:d}=e;this.applicationId=i,this.locationId=a,this._sessionId=u,this.instanceId=c,this.applePayMerchantIdentifier=t,this.cashAppPayMerchantIdentifier=r,this.merchantName=n,this.hostname=s,this.sourceUrl=l,this._locale=d,this.avt=o}get sessionId(){return this._sessionId}get powCounter(){return this._powCounter}setSessionId(e){this._sessionId=e,this._serialized=void 0}setTranslationOverrides(e){this._translationOverrides=e,this._serialized=void 0}setLocale(e){this._locale=e,this._serialized=void 0}setPowCounter(e){this._powCounter=e,this._serialized=void 0}serializationHasChanged(){return void 0===this._serialized}serialize(){var e,t;return this._serialized||(this._serialized={applePayMerchantIdentifier:null!==(e=this.applePayMerchantIdentifier)&&void 0!==e?e:"",applicationId:this.applicationId,avt:this.avt,cashAppPayMerchantIdentifier:null!==(t=this.cashAppPayMerchantIdentifier)&&void 0!==t?t:"",hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,merchantName:this.merchantName,sessionId:this._sessionId,sourceUrl:this.sourceUrl},void 0!==this._translationOverrides&&(this._serialized.translationOverrides=this._translationOverrides),void 0!==this._powCounter&&(this._serialized.powCounter=this._powCounter)),this._serialized}}function lh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function dh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){lh(o,n,i,s,a,"next",e)}function a(e){lh(o,n,i,s,a,"throw",e)}s(void 0)}))}}function hh(){return hh=dh((function*(e,t){var r=new Promise(((e,r)=>{var n=setTimeout((function(){var e;window.removeEventListener("message",i),r(((e=new Error("Web Payments SDK was unable to be initialized in time")).type="InitializationTimeoutError",e))}),1e4),i=function r(i){"main-iframe:loaded"===i.data&&i.origin===qn.ASSET_BASE_URL&&(clearTimeout(n),window.removeEventListener("message",r),t.addBreadcrumb({message:"Processed main-iframe:loaded message"}),e())};window.addEventListener("message",i)})),n=function(e,t){return ph.apply(this,arguments)}(e,t),[i,o]=yield Promise.all([n,r]);return i})),hh.apply(this,arguments)}function ph(){return(ph=dh((function*(e,t){var r=yield xl({frameborder:"0",height:"0",scrolling:"no",src:e,style:{border:"none",display:"block",visibility:"hidden"},width:"0"});return t.addBreadcrumb({message:"main iframe loaded"}),r}))).apply(this,arguments)}var fh={build:function(e,t){return hh.apply(this,arguments)},getIframeSrc:function(e){var t=new URL(qn.IFRAME_SRC);return Object.entries(e).forEach((e=>{var[r,n]=e;t.searchParams.set(r,n)})),t.toString()}};class gh extends Zc{constructor(e){super({errorSerializer:{deserialize:e=>e instanceof Error?e:Oc(e),serialize:e=>e instanceof Vn?wc(e):e},name:e})}setErrorLogger(e){this.setErrorHandler((function(t){e.captureException(t)}))}}function vh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function mh(){var e;return e=function*(e,t,r,n){var i=new gh(n);return i.setErrorLogger(t),i.connect({origin:qn.ASSET_URL,window:e.contentWindow},e.id),yield i.sendMessage("INITIALIZE",r),i},mh=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){vh(o,n,i,s,a,"next",e)}function a(e){vh(o,n,i,s,a,"throw",e)}s(void 0)}))},mh.apply(this,arguments)}var yh={build:function(e,t,r,n){return mh.apply(this,arguments)}};function Eh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function _h(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Eh(o,n,i,s,a,"next",e)}function a(e){Eh(o,n,i,s,a,"throw",e)}s(void 0)}))}}function bh(e){return Ih.apply(this,arguments)}function Ih(){return(Ih=_h((function*(e){var t;if(c.supportsCryptoDigest){var r=(new TextEncoder).encode(e),n=yield crypto.subtle.digest("SHA-256",r);t=new Uint8Array(n)}else{var i=new(yield vu({crossorigin:"anonymous",id:"square-sha256",integrity:"sha256-4wDf1MFeUObkJyxW9pU1Vs6xVxFFeuND/SlfPgCEW8E=",src:"".concat(qn.ASSET_URL,"/sha256.js")},(()=>window.Square?window.Square._utils.Sha256:void 0)));i.update(e),t=yield i.digest()}return Array.from(t).map((e=>e.toString(16).padStart(2,"0"))).join("")}))).apply(this,arguments)}function Sh(){return(Sh=_h((function*(e,t,r){var n=0,i="",o=r.join(",");do{n+=1;var s="".concat(e,":").concat(n,":").concat(o);i=yield bh(s)}while(!i.startsWith(t));return n}))).apply(this,arguments)}r(8033),r(9964),r(3025),r(6852),r(5437),r(2181),r(2637);var Oh={compute:function(e,t,r){return Sh.apply(this,arguments)}};function wh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ch(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ah={block_insecure_contexts:!1,can_use_ach_auth:"NO_SUPPORT",can_use_interac:!1,can_use_override_strings:!1,client_log_level:"NONE",client_side_encryption:"NO",one_shot_authentication_eligibility:!1,record_error_metrics:!1,use_new_afterpay_script:!1};function Th(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ph(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Th(o,n,i,s,a,"next",e)}function a(e){Th(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Nh=/^-?[0-9]+(\.[0-9]+)?$/;function Rh(){return Rh=Ph((function*(e,t,r,n){var{applicationId:i,locationId:o,hostname:s,sourceUrl:a}=e;t.logEvent({event:"INITIALIZATION:START",eventSource:"WebSDK"});var u,l,d=n.getCurrentLocale();try{u=yield function(e,t,r,n,i){return Lh.apply(this,arguments)}(i,o,s,d,r)}catch(e){var h=(l=e)instanceof Error&&"type"in l&&"InitializationTimeoutError"===l.type?"good":"bad";if(t.logEvent({event:"INITIALIZATION:ERROR",eventSource:"WebSDK",sloStatus:h}),"bad"===h&&r.captureException(e),Fo(e))throw new Ti("initializing the payment method");throw e}try{var{avt:p,sessionId:f,applePartnerInternalMerchantIdentifier:g,cashAppPayMerchantIdentifier:v,merchantName:m,instanceId:y,paymentMethodSupportDetail:E,featureFlagValues:_,isTestMerchant:b,powPrefix:I}=yield u.request("REQUEST_HYDRATION",{body:{applicationId:i,hostname:s,locationId:o}}),S=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wh(Object(r),!0).forEach((function(t){Ch(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Ah);for(var[r,n]of Object.entries(Ah)){var i=r;if(i in e){var o=e[i];t[i]="boolean"==typeof n?"true"===o:o}}return t}(_);if(S.block_insecure_contexts&&!0!==c.isSecureContext)throw new vi;t.setAvt(p);var O=new uh({applePayMerchantIdentifier:g,applicationId:i,avt:p,cashAppPayMerchantIdentifier:v,hostname:s,instanceId:y,locale:d,locationId:o,merchantName:m,sessionId:f,sourceUrl:a}),w=Promise.resolve(void 0);return void 0!==I&&(w=function(e,t,r,n,i,o,s){return Dh.apply(this,arguments)}(i,o,f,y,I,t,r)),t.setFeatureFlagValues(S),t.logEvent({event:"INITIALIZATION:OK",eventSource:"WebSDK",sloStatus:"good"},y,f),{featureFlagValues:S,isTestMerchant:b,localeStrings:n,messenger:u,paymentMethodSupportDetail:E,proofOfWorkComputePromise:w,session:O}}catch(e){if(t.logEvent({event:"INITIALIZATION:ERROR",eventSource:"WebSDK",sloStatus:"WebSdkEmbedError"===Ic(e).name?"good":"bad"}),Fo(e))throw new Ti("initializing the payment method");throw e}})),Rh.apply(this,arguments)}function Dh(){return(Dh=Ph((function*(e,t,r,n,i,o,s){o.logEvent({event:"PROOF_OF_WORK:START",eventSource:"WebSDK"},n,r);var a=[e,t,n];try{var c=yield Oh.compute(r,i,a);return o.logEvent({event:"PROOF_OF_WORK:OK",eventSource:"WebSDK"},n,r),c}catch(e){s.captureException(e),o.logEvent({event:"PROOF_OF_WORK:ERROR",eventSource:"WebSDK"},n,r)}}))).apply(this,arguments)}function Lh(){return(Lh=Ph((function*(e,t,r,n,i){var o=yield fh.build(fh.getIframeSrc({applicationId:e,hostname:r}),i);return yield yh.build(o,i,{applicationId:e,hostname:r,locale:n,locationId:t})}))).apply(this,arguments)}function xh(e){return"total"in e}function kh(e){return"amount"in e&&"currencyCode"in e}function Mh(e){return"STORE"===e.intent}var jh={extractAmountFromVerificationDetails:function(e){return kh(e)?e.amount:Mh(e)?"":go(e.total.amount,e.total.currencyCode)},extractCurrencyCodeFromVerificationDetails:function(e){return kh(e)?e.currencyCode:Mh(e)?"":e.total.currencyCode},initializePayment:function(e,t,r,n){return Rh.apply(this,arguments)},isLegacyCardVerificationDetails:xh,validateOsaVerificationDetails:function(e,t){var r=[];return null===e||"object"!=typeof e?(r.push(new _c(t,"details","object")),r):(null!==e.billingContact&&"object"==typeof e.billingContact||r.push(new _c(t,"details.billingContact","object")),null!==e.intent&&"string"==typeof e.intent&&["CHARGE","CHARGE_AND_STORE","STORE"].includes(e.intent)||r.push(new _c(t,"details.intent","string")),Mh(e)?function(e,t){"amount"in e&&t.push(new ii("details.intent field `STORE` does not support attribute details.amount")),"total"in e&&t.push(new ii("details.intent field `STORE` does not support attribute details.total")),"currencyCode"in e&&t.push(new ii("details.intent field `STORE` does not support attribute details.currencyCode"))}(e,r):xh(e)?function(e,t,r){var n;"number"==typeof(null===(n=e.total)||void 0===n?void 0:n.amount)&&"string"==typeof e.total.currencyCode||r.push(new _c(t,"details.total","object"))}(e,t,r):function(e,t,r){"string"!=typeof e.amount?r.push(new _c(t,"details.amount","string")):Nh.test(e.amount)||r.push(new ii("Invalid format for details.amount.")),"string"!=typeof e.currencyCode&&r.push(new _c(t,"details.currencyCode","string"))}(e,t,r),"boolean"!=typeof e.customerInitiated&&r.push(new _c(t,"details.customerInitiated","boolean")),"boolean"!=typeof e.sellerKeyedIn&&r.push(new _c(t,"details.sellerKeyedIn","boolean")),r)},validateVerificationDetails:function(e,t){var r=[];return null!==e.billingContact&&"object"==typeof e.billingContact||r.push(new _c(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE","CHARGE_AND_STORE"].includes(e.intent)||r.push(new _c(t,"details.intent","string")),"CHARGE"!==e.intent&&"CHARGE_AND_STORE"!==e.intent||(e.amount&&"string"==typeof e.amount||r.push(new _c(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||r.push(new _c(t,"details.currencyCode","string"))),r}};function Uh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uh(Object(r),!0).forEach((function(t){Bh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bh(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function qh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Fh(o,n,i,s,a,"next",e)}function a(e){Fh(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Vh="emptyMessage",Gh=[wn.CARD_NUMBER,wn.EXPIRATION_DATE,wn.CVV,wn.POSTAL_CODE];function zh(e,t){return void 0!==t?{status:Vi.OK,token:"".concat(e,"#").concat(t)}:{status:Vi.OK,token:e}}function $h(e){return"".concat("single-card-wrapper","-").concat(e)}function Wh(e,t){var r=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=ch(e,$h(t))}function Yh(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(!(r in t))throw new si(r);if(!t[r](n))throw new ai(r,n)}))}var Kh,Xh=class extends Lc{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Fi.CARD,this.postalCountry="US",this.onResize=this.onResize.bind(this),this.id=Ac(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new hu(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),Yh(t),this.initialOptions=t,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}configure(){var e=arguments,t=this;return qh((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.throwIfDestroyedOrNotAttached(),Yh(r),t.metricsHandler.logEvent("CONFIG_UPDATED",r),void 0!==r.includeInputLabels&&(t.inputLabelsIncluded=Boolean(r.includeInputLabels),t.onResize()),void 0!==r.style&&Wh(r.style,t.id);try{yield t.paymentMessenger.request("configure",{includeInputLabels:t.inputLabelsIncluded,postalCode:r.postalCode,style:r.style,type:t.methodType})}catch(e){if(ho(e,Ml))throw e;throw t.errorLogger.captureException(e),new Ti("configuring the Card Element")}}))()}attach(e){var t=this;return qh((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=Pc.ATTACHED,t.metricsHandler.logEvent("ATTACH:START"),t.metricsHandler.logEvent("CONFIGURED",t.initialOptions);try{r=zu(e)}catch(e){throw t.metricsHandler.logEvent("ATTACH:ERROR","good"),t.status=Pc.DETACHED,e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){t.status=Pc.DETACHED;var n=function(e){return ho(e,jl)}(e);if(t.metricsHandler.logEvent("ATTACH:ERROR",n?"good":"bad"),n||e instanceof Ti)throw e;throw t.errorLogger.captureException(e),new Ti("attaching the Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(Pc.DETACHED,"DETACHED")}destroy(){var e=this;return qh((function*(){if(e.status===Pc.DESTROYED)return!1;var t=yield e.detachElement(Pc.DESTROYED,"DESTROYED");return e.context.removeLocaleChangedListener(e.updateCardDetailText),t}))()}focus(e){var t=this;return qh((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(wn).includes(e))throw new oi(e);t.metricsHandler.logEvent("FOCUSED",e);try{return yield t.paymentMessenger.request("setFocus",{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return qh((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request("clear")}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent("CLEAR"),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(e,t){var r=this;return qh((function*(){var n=r.context.getFeatureFlagValues().one_shot_authentication_eligibility;if(!n&&void 0!==e){var{applicationId:i,locationId:o}=r.context.getSession(),s=Object.entries(e).filter((e=>{var[t,r]=e;return void 0!==r})).map((e=>{var[t]=e;return t}));r.errorLogger.captureException(function(e,t,r){var n={detail:"Application ID: ".concat(e,", Location ID: ").concat(t,", Parameters: ").concat(r.toString()),message:"Tokenization parameters were provided by a developer not allowlisted by the websdk/one-shot-authentication-eligibility feature flag",type:"VALIDATION_ERROR"};return new Ai([n])}(i,o,s))}n&&void 0!==e&&function(e){var t=jh.validateOsaVerificationDetails(e,"tokenize");if(t.length>0)throw new bc(t)}(e);var a=void 0!==t&&t.trim().length>0;if(n&&a&&function(e){if("string"!=typeof e)throw new bc([new _c("tokenize","cofToken","cofToken must be a string")])}(t),a||r.throwIfDestroyedOrNotAttached(),r.tokenizeInProcess)throw new Ai([xc]);try{var c,u,l;if(a?(u=t,l=zh(t)):(r.tokenizeInProcess=!0,yield r.context.waitForProofOfWorkCompletion(),c=yield r.paymentMessenger.request("requestCardNonceIfValidForm",{type:r.methodType}),r.tokenizeInProcess=!1,r.context.setPaymentMethodTrackingId(c.paymentMethodTrackingId),u=(l=function(e){var{card:t,billingContact:r,cardNonce:n}=e;return{details:{billing:r,card:t,method:Fi.CARD},status:Vi.OK,token:n}}(c)).token),n&&void 0!==e&&void 0!==u){var d=yield r.verifyBuyer(e,u,!0);a&&(l=zh(t,d.token))}return l}catch(e){if(e instanceof ko)return{errors:e.errors,status:Vi.INVALID};throw ho(e,Ul)?e:(r.errorLogger.captureException(e),Mo())}finally{r.tokenizeInProcess=!1}}))()}recalculateSize(){this.throwIfDestroyedOrNotAttached(),this.metricsHandler.logEvent("RECALCULATED_SIZE"),this.onResize()}setError(e){var t=this;return qh((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(wn).includes(e))throw new oi(e);t.metricsHandler.logEvent("SET_ERROR",e);try{return yield t.paymentMessenger.request("setError",{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return qh((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request("loadCardsForm",{configuration:Hh(Hh({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}verifyBuyer(e,t,r){var n=this;return qh((function*(){var i=!0===r?"OSA_VERIFICATION":"VERIFICATION";try{n.context.metricsHandler.logEvent("".concat(i,":START"));var o={amount:jh.extractAmountFromVerificationDetails(e),billingContact:e.billingContact,currencyCode:jh.extractCurrencyCodeFromVerificationDetails(e),customerInitiated:e.customerInitiated,intent:e.intent,sellerKeyedIn:e.sellerKeyedIn};if("squareProduct"in e){var s=e;o.squareProduct=s.squareProduct}var a=yield n.context.analyticsBackend.verifyBuyer(t,o);return n.context.metricsHandler.logEvent("".concat(i,":OK")),a}catch(e){if(n.context.metricsHandler.logEvent("".concat(i,":ERROR")),Qn(e))throw new Zn(e);throw"UnexpectedAnalyticsClientError"!==Ic(e).name&&n.errorLogger.captureException(e),Mo()}}))()}buildErrorMessage(e){switch(e){case wn.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case wn.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case wn.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case wn.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];default:return""}}buildHelperMessage(e){switch(e){case wn.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case wn.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case wn.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case wn.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];default:return""}}updateCardDetailText(){var e,t,r,n;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:Vh,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(zd),this.cardDetail.classList.add($d)):(e=null!==(n=Gh.find((e=>this.errorList.has(e))))&&void 0!==n?n:Vh,t=this.buildErrorMessage(e),this.cardDetail.classList.add(zd),this.cardDetail.classList.remove($d)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(Wd):this.cardDetail.classList.remove(Wd))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;void 0!==this.focusedInput&&null!==this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Bl)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Fl))}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case On.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Fl);break;case On.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case On.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(Bl);break;case On.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}handleSetPostalCountry(e){var{data:t}=e;this.postalCountry=t.payload.body.postalCountry}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={cardBrandChanged:e,errorClassAdded:e,errorClassRemoved:e,escape:e,focusClassAdded:e,focusClassRemoved:e,postalCodeChanged:e,setPostalCountry:this.handleSetPostalCountry.bind(this),submit:e};this.paymentMessenger.initializeMessageBus(t)}buildCardIframe(e){return xl({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:qn.SINGLE_CARD_IFRAME,width:"100%"},e)}hideCardElement(){var e;null===(e=this.wrapperElement)||void 0===e||e.setAttribute("hidden","")}showCardElement(){var e;null===(e=this.wrapperElement)||void 0===e||e.removeAttribute("hidden")}buildCardElement(e){var t=this;return qh((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=$h(t.id),t.wrapperElement.classList.add(qd),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Gd),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(Fd),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Vd),t.wrapperElement.appendChild(t.cardDetail),Ja.addStyleElement(qn.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&Wh(t.initialOptions.style,t.id)}))()}onResize(e){var t;if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,void 0===this.currentResizeTimeout)){var r=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};r(null!==(t=this.lastResizeWidth)&&void 0!==t?t:0),this.currentResizeTimeout=window.setTimeout((()=>{var e;r(null!==(e=this.lastResizeWidth)&&void 0!==e?e:0),this.currentResizeTimeout=void 0}),100)}}detachElement(e,t){var r=this;return qh((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request("destroy");return r.element&&(kl(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}};class Jh extends Vn{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,Jh.prototype)}}function Zh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Qh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Zh(o,n,i,s,a,"next",e)}function a(e){Zh(o,n,i,s,a,"throw",e)}s(void 0)}))}}function ep(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(r),!0).forEach((function(t){rp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ep(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rp(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.CUSTOMER_INTERACTION="CUSTOMER_INTERACTION",e.CUSTOMER_DISMISSED="CUSTOMER_DISMISSED",e.CUSTOMER_REQUEST_APPROVED="CUSTOMER_REQUEST_APPROVED",e.CUSTOMER_REQUEST_DECLINED="CUSTOMER_REQUEST_DECLINED",e.CUSTOMER_REQUEST_FAILED="CUSTOMER_REQUEST_FAILED"}(Kh||(Kh={}));var np=new Set(["USD"]),ip="cash_app_pay_v1_element";class op extends Lc{constructor(e,t,r,n,i){if(super(n),this.methodType=Fi.CASH_APP_PAY,this.wasFirstInteractionCalled=!1,this.isMobile=!1,this.CashAppPayInstance=e,this.req=t,this.context=n,this.paymentRequestLockController=i,this.paymentMessenger=new hu(this.context),this.tokenizeValidator=function(){return Promise.resolve(!0)},this.clickEventHandler=()=>{this.beginAuthorizationFlow()},!po(this.session.locationId))throw new mi(gc,"locationId");if(!po(this.session.cashAppPayMerchantIdentifier))throw new mi(gc,"merchantId");if(!np.has(this.req.currencyCode))throw new li("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...np].join(", ")));var o=vo(this.req.total.amount,this.req.currencyCode);if(o<1)throw new li("".concat(this.req.total.amount," is an invalid payment amount. Total amount should be greater than 0"));if(!r.redirectURL)throw new di;var s=tp({actions:{payment:{amount:{currency:this.req.currencyCode,value:o},scopeId:this.session.cashAppPayMerchantIdentifier}}},r);e.customerRequest(s).catch((e=>{this.errorLogger.captureException(e),this.customerRequestFailedEvent()})),this.cashAppEventHandler={[Kh.CUSTOMER_INTERACTION]:e=>this.registerExternalEventStart(e),[Kh.CUSTOMER_DISMISSED]:()=>{this.dispatchEvent("customerDismissed",null)},[Kh.CUSTOMER_REQUEST_APPROVED]:e=>this.customerRequestApprovedEvent(e),[Kh.CUSTOMER_REQUEST_DECLINED]:()=>this.customerRequestDeclinedEvent(),[Kh.CUSTOMER_REQUEST_FAILED]:()=>this.customerRequestFailedEvent()},Object.keys(Kh).forEach((e=>this.CashAppPayInstance.addEventListener(e,this.cashAppEventHandler[e]))),this.paymentRequestLockController.lock(this)}attach(e,t,r){var n=this;return Qh((function*(){n.throwIfDestroyedOrAlreadyAttached(),n.metricsHandler.logEvent("ATTACH:START");var i,o=t,s=!1===o;void 0!==o&&!s&&"values"in o&&(null!==(i=o.theme)&&void 0!==i||(o.theme=o.values));var a=function(e){if(void 0===e||!1===e)return{isValid:!0,missingFields:[]};var t={};return Object.keys(e).forEach((function(e){ss.has(e)&&(t[e]="string")})),Xu(e,t)}(o);if(!a.isValid)throw n.metricsHandler.logEvent("ATTACH:ERROR","good"),new ci(a.missingFields);var c=function(e){var t=[],r=!0;if(void 0===e||!1===e)return{isValid:r,missingFields:t};var n={shape:ys,size:ms,theme:Es,width:_s},i=JSON.parse(Os(e));return Object.entries(i).forEach((function(e){var[i,o]=e;o===Zo&&(r=!1,t.push([i,[...n[i]].join(",")]))})),{isValid:r,missingFields:t}}(o);if(!c.isValid)throw n.metricsHandler.logEvent("ATTACH:ERROR","good"),new ui(c.missingFields);if(r&&(n.tokenizeValidator=r),"function"!=typeof n.tokenizeValidator)throw n.metricsHandler.logEvent("ATTACH:ERROR","good"),new hi;void 0===o||s||n.metricsHandler.logEvent("CONFIGURED",o),n.status=Pc.ATTACHED,n.element=s?$u(e):zu(e);try{var u=document.createElement("div");u.id=ip,s?n.element.before(u):n.element.appendChild(u);var l="#".concat(ip);n.renderController=yield n.CashAppPayInstance.render(l,{button:o,manage:!1}),n.element.addEventListener("click",n.clickEventHandler),n.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){throw n.metricsHandler.logEvent("ATTACH:ERROR","bad"),n.status=Pc.DETACHED,e}}))()}destroy(){return this.status===Pc.DESTROYED?Promise.resolve(!1):(this.detachElement(Pc.DESTROYED,"DESTROYED"),this.paymentRequestLockController.unlock(this),this.CashAppPayInstance.restart(),Object.keys(Kh).forEach((e=>this.CashAppPayInstance.removeEventListener(e,this.cashAppEventHandler[e]))),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(Pc.DETACHED,"DETACHED"),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}customerRequestApprovedEvent(e){var t=this;return Qh((function*(){var r=yield t.createNonce(e);t.dispatchEvent("ontokenization",{tokenResult:r})}))()}customerRequestDeclinedEvent(){var e={status:Vi.CANCEL};this.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),this.dispatchEvent("ontokenization",{tokenResult:e})}customerRequestFailedEvent(){var e={errors:[new Ti("tokenizing Cash App Pay")],status:Vi.ERROR};this.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),this.dispatchEvent("ontokenization",{tokenResult:e})}createNonce(e){var t=this;return Qh((function*(){var{customerProfile:{cashtag:r},grants:n,referenceId:i}=e,o=n.payment,{total:{amount:s},currencyCode:a}=t.req;try{if(!o)throw new Jh;yield t.context.waitForProofOfWorkCompletion();var c=yield t.paymentMessenger.request("REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN",{applicationId:t.session.applicationId,cashAppPayData:{cashtag:r,grantId:o.grantId,isMobile:t.isMobile,referenceId:i,totalAmount:{amount:s,currency:a}},clientID:t.session.applicationId,instanceID:t.session.instanceId,locationID:t.session.locationId,paymentMethodTrackingID:t.context.getPaymentMethodTrackingId(),requestBillingContact:t.req.requestBillingContact,requestShippingContact:t.req.requestShippingContact,sessionID:t.session.sessionId,websdkVersion:qn.VERSION});return t.metricsHandler.logEvent("EXTERNAL_SESSION:OK"),{details:{cashAppPay:{cashtag:r,referenceId:i},method:Fi.CASH_APP_PAY},status:Vi.OK,token:c.token}}catch(e){var u;return t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),e instanceof Ai?u=e:(t.errorLogger.captureException(e),u=new Ti("tokenizing CashAppPay")),{errors:[u],status:Vi.ERROR}}}))()}beginAuthorizationFlow(){var e=this;return Qh((function*(){if(e.throwIfDestroyedOrNotAttached(),!e.renderController)throw new Ti("Could not begin Cash App Pay authorization flow");e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:VALIDATING");try{(yield e.tokenizeValidator())?(e.renderController.begin(),e.metricsHandler.logEvent("CASH_APP_PAY_AUTH:START")):e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:INVALID")}catch(t){throw e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:ERROR"),t}}))()}registerExternalEventStart(e){this.metricsHandler.logEvent("EXTERNAL_SESSION:START"),this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK")),this.isMobile=e.isMobile,this.dispatchEvent("customerInteraction",tp({},e))}detachElement(e,t){this.renderController&&this.renderController.destroy();var r=document.getElementById(ip);r&&r.remove(),this.element&&this.element.removeEventListener("click",this.clickEventHandler),this.status=e,this.metricsHandler.logEvent(t)}}function sp(){return(sp=Qh((function*(e){var t="https://kit.cashstaging.app/v1/pay.js",r="SQ_SELLER";return"sandbox"===qn.env||"production"===qn.env&&e.isTestMerchant?(t="https://sandbox.kit.cash.app/v1/pay.js",r="CAS-CI_SQ_SELLER_SANDBOX"):"production"===qn.env&&(t="https://kit.cash.app/v1/pay.js",r="CA-CI_SQ_SELLER"),(yield bu.load("cash-app-pay",{src:t},"CashApp",e.errorLogger)).pay({clientId:r})}))).apply(this,arguments)}var ap={initialize:function(e){return sp.apply(this,arguments)}},cp=[Si,Oi,wi,Ci,yi];function up(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?up(Object(r),!0).forEach((function(t){dp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):up(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dp(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function pp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){hp(o,n,i,s,a,"next",e)}function a(e){hp(o,n,i,s,a,"throw",e)}s(void 0)}))}}var fp=[An.GIFT_CARD_NUMBER];class gp extends Lc{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Fi.GIFT_CARD,this.onResize=this.onResize.bind(this),this.id=Ac(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new hu(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),yp(t),this.initialOptions=t,this.errorList=new Set,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e){var t=this;return pp((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=Pc.ATTACHED,t.metricsHandler.logEvent("ATTACH:START"),t.metricsHandler.logEvent("CONFIGURED",t.initialOptions);try{r=zu(e)}catch(e){throw t.metricsHandler.logEvent("ATTACH:ERROR","good"),t.status=Pc.DETACHED,e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){t.status=Pc.DETACHED;var n=function(e){return ho(e,cp)}(e),i=n?"good":"bad";if(t.metricsHandler.logEvent("ATTACH:ERROR",i),n||e instanceof Ti)throw e;throw t.errorLogger.captureException(e),new Ti("attaching the Gift Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(Pc.DETACHED,"DETACHED")}destroy(){return this.status===Pc.DESTROYED?Promise.resolve(!1):this.detachElement(Pc.DESTROYED,"DESTROYED")}configure(e){var t=this;return pp((function*(){t.throwIfDestroyedOrNotAttached(),yp(e),void 0!==e.includeInputLabels&&(t.inputLabelsIncluded=Boolean(e.includeInputLabels),t.onResize()),void 0!==e.style&&mp(e.style,t.id),t.metricsHandler.logEvent("CONFIG_UPDATED",e);try{yield t.paymentMessenger.request("giftCardConfigure",{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:t.methodType})}catch(e){if(ho(e,Ml))throw e;throw t.errorLogger.captureException(e),new Ti("configuring the Gift Card Element")}}))()}focus(e){var t=this;return pp((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(An).includes(e))throw new oi(e);t.metricsHandler.logEvent("FOCUSED",e);try{return yield t.paymentMessenger.request("giftCardSetFocus",{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return pp((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request("giftCardClear")}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent("CLEAR"),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return pp((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new Ai([xc]);e.tokenizeInProcess=!0,yield e.context.waitForProofOfWorkCompletion();try{var t=yield e.paymentMessenger.request("giftCardRequestCardNonceIfValidForm",{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),function(e){var{card:t,cardNonce:r}=e;return{details:{giftCard:t,method:Fi.GIFT_CARD},status:Vi.OK,token:r}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof ko)return{errors:t.errors,status:Vi.INVALID};throw ho(t,Ul)?t:(e.errorLogger.captureException(t),Mo())}}))()}setError(e){var t=this;return pp((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(An).includes(e))throw new oi(e);t.metricsHandler.logEvent("SET_ERROR",e);try{return yield t.paymentMessenger.request("giftCardSetError",{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return pp((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request("loadGiftCardsForm",{configuration:lp(lp({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}buildCardElement(e){var t=this;return pp((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=vp(t.id),t.wrapperElement.classList.add(qd),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Gd),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(Fd),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Vd),t.wrapperElement.appendChild(t.cardDetail),Ja.addStyleElement(qn.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&mp(t.initialOptions.style,t.id)}))()}buildCardIframe(e){return xl({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:qn.GIFT_CARD_IFRAME,width:"100%"},e)}hideCardElement(){var e;null===(e=this.wrapperElement)||void 0===e||e.setAttribute("hidden","")}showCardElement(){var e;null===(e=this.wrapperElement)||void 0===e||e.removeAttribute("hidden")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&void 0===this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}}updateCardDetailText(){var e,t,r,n;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:"emptyMessage",t=this.buildHelperMessage(e),this.cardDetail.classList.remove(zd),this.cardDetail.classList.add($d)):(e=null!==(n=fp.find((e=>this.errorList.has(e))))&&void 0!==n?n:fp[0],t=this.buildErrorMessage(e),this.cardDetail.classList.add(zd),this.cardDetail.classList.remove($d)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(Wd):this.cardDetail.classList.remove(Wd))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case Tn.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Fl);break;case Tn.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case Tn.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(Bl);break;case Tn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}removeFocusClass(){setTimeout((()=>{var e;void 0!==this.focusedInput&&null!==this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Bl)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Fl))}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={cardBrandChanged:e,errorClassAdded:e,errorClassRemoved:e,escape:e,focusClassAdded:e,focusClassRemoved:e,submit:e};this.paymentMessenger.initializeMessageBus(t)}buildErrorMessage(e){return e===An.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError:""}buildHelperMessage(e){return e===An.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber:""}detachElement(e,t){var r=this;return pp((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request("giftCardDestroy");return r.element&&(kl(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}}function vp(e){return"".concat("gift-card-wrapper","-").concat(e)}function mp(e,t){var r=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=ch(e,vp(t))}function yp(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(!(r in t))throw new si(r);if(!t[r](n))throw new ai(r,n)}))}class Ep extends Vn{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,Ep.prototype)}}function _p(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}class bp extends Cc{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,t,r){var n,i=this;return(n=function*(){if(e in i.listeners){var n=new Yi(e,t),o=[...i.listeners[e]],s=function*(){var t,i;try{t=a(n)}catch(t){throw new ni(e,Sc(t))}if(t instanceof Promise)try{i=yield fn((()=>t),3e4,new Ep(e))}catch(t){if(t instanceof Ep)throw t;throw new ni(e,Sc(t))}else i=t;r&&r(i)};for(var a of o)yield*s()}},function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){_p(o,r,i,s,a,"next",e)}function a(e){_p(o,r,i,s,a,"throw",e)}s(void 0)}))})()}}var Ip={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Sp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Op(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sp(Object(r),!0).forEach((function(t){wp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wp(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Cp,Ap,Tp,Pp,Np,Rp,Dp,Lp={amount:"string",label:"string"},xp={amount:"string",id:"string",label:"string"},kp={};function Mp(e,t){var r,n,i,o,{lineItems:s,taxLineItems:a,discounts:c,shippingLineItems:u}=e,l=!1,d=[],h=s,p=a,f=u,g=jp(c);return void 0===t||void 0===s&&void 0===a&&void 0===u&&void 0===g||(null!==(r=h)&&void 0!==r||(h=t.lineItems),null!==(n=p)&&void 0!==n||(p=t.taxLineItems),null!==(i=g)&&void 0!==i||(g=jp(t.discounts)),null!==(o=f)&&void 0!==o||(f=t.shippingLineItems)),[h,p,g,f].forEach((e=>{void 0!==e&&(l=!0,d.push(...e))})),l?d:void 0}function jp(e){return void 0===e?e:e.map((e=>Op(Op({},e),{},{amount:"-".concat(e.amount)})))}function Up(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Hp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Up(o,n,i,s,a,"next",e)}function a(e){Up(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fp(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class qp{constructor(e,t,r){this.eventTarget=new bp,this.metricsBuffer=[],this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=r,Gp(this)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bp(Object(r),!0).forEach((function(t){Fp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,discounts:this.discounts,lineItems:this.lineItems,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingLineItems:this.shippingLineItems,shippingOptions:this.shippingOptions,taxLineItems:this.taxLineItems,total:this.total},e),r=new qp(t,this.localeStrings,this.updateLock);return Gp(r),!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),void 0!==e.countryCode&&(this._countryCode=e.countryCode),void 0!==e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(Hu.UPDATE,r),this.logMetrics("CONFIG_UPDATED",t),!0)}addEventListener(e,t){switch(uo(qi).includes(e)&&this.logMetrics("EVENT_LISTENER_ADDED",e),e){case qi.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case qi.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;case Hu.UPDATE:this.updateEventListener(t);break;case Hn.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(t);break;case Hn.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(t);break;default:throw new _c("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,r){return this.eventTarget.dispatchEvent(e,t,(t=>{if(uo(Hn).includes(e)){var n=function(e){if(void 0!==e.error)return{isValid:!0,missingFields:[]};if(void 0!==e.shippingErrors)return{isValid:!0,missingFields:[]};if(void 0===e.shippingOptions)return{isValid:!1,missingFields:[["paymentRequestUpdate.shippingOptions","array"]]};var t=Ju(e.shippingOptions,"shippingOptions",{amount:"string",id:"string",label:"string",total:"object"});if(!t.isValid)return t;for(var r of e.shippingOptions){if(!(t=Xu({"shippingOptions.total":r.total},{"shippingOptions.total":Lp})).isValid)return t;if(void 0!==r.taxLineItems&&!(t=Ju(r.taxLineItems,"shippingOptions.taxLineItems",Lp)).isValid)return t}return{isValid:!0,missingFields:[]}}(t);if(!n.isValid)throw new ri(n.missingFields);r(t)}else{var i=function(e){var{lineItems:t,discounts:r,taxLineItems:n,shippingLineItems:i,shippingErrors:o,shippingOptions:s,error:a,total:c}=e;if(t){var u=Ju(t,"lineItem",Lp);if(!u.isValid)return u}if(r){var l=Ju(r,"discounts",Lp);if(!l.isValid)return l}if(n){var d=Ju(n,"taxLineItems",Lp);if(!d.isValid)return d}if(i){var h=Ju(i,"shippingLineItems",Lp);if(!h.isValid)return h}if(s){var p=Ju(s,"shippingOption",xp);if(!p.isValid)return p}if(c){var f=Xu({total:c},{total:Lp});if(!f.isValid)return f}if(void 0!==a&&"string"!=typeof a)return{isValid:!1,missingFields:[["error","string"]]};if(o){var g=Xu(o,kp);if(!g.isValid)return g}return{isValid:!0,missingFields:[]}}(t);if(!i.isValid)throw new ri(i.missingFields);r(t)}}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setMetricsHandler(e){this.metricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach((t=>{var[r,n]=t;e.logEvent(r,n)})),this.metricsBuffer=[])}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(qi.SHIPPING_CONTACT_CHANGED,function(){var r=Hp((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.contactError}}}));return function(e){return r.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(qi.SHIPPING_OPTION_CHANGED,function(){var r=Hp((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Hn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,function(){var r=Hp((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("AfterpayShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingOptionEventListener(e){this.eventTarget.addEventListener(Hn.AFTERPAY_SHIPPING_OPTION_CHANGED,(t=>{e(t.detail.contactOrOption)}))}updateEventListener(e){this.eventTarget.addEventListener(Hu.UPDATE,(t=>{e(t.detail)}))}logMetrics(e,t){this.metricsHandler?this.metricsHandler.logEvent(e,t):this.metricsBuffer.push([e,t])}}function Vp(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}function Gp(e){var{isValid:t,missingFields:r}=Xu(e,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}}),n=[];if(e.countryCode in Ip||n.push("Country code '".concat(e.countryCode,"' is not a valid ISO country code.")),!t||n.length>0)throw new ti(r,n)}function zp(e,t){return new Intl.NumberFormat(c.windowNavigationLanguage,{currency:t,style:"currency"}).format(Number.parseFloat(e))}function $p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$p(Object(r),!0).forEach((function(t){Yp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yp(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.Final="FINAL",e.Estimated="ESTIMATED",e.Unknown="NOT_CURRENTLY_KNOWN"}(Cp||(Cp={})),function(e){e.INITIALIZE="INITIALIZE",e.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",e.SHIPPING_ADDRESS="SHIPPING_ADDRESS",e.SHIPPING_OPTION="SHIPPING_OPTION"}(Ap||(Ap={})),function(e){e.FULL="FULL",e.MIN="MIN"}(Tp||(Tp={})),function(e){e.CARD="CARD"}(Pp||(Pp={})),function(e){e.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(Np||(Np={})),function(e){e.SUCCESS="SUCCESS"}(Rp||(Rp={})),function(e){e.TEST="TEST",e.PRODUCTION="PRODUCTION"}(Dp||(Dp={}));var Kp=["PAN_ONLY","CRYPTOGRAM_3DS"],Xp=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"];function Jp(e){return{label:e.label,price:e.amount,status:!0===e.pending?Cp.Estimated:Cp.Final,type:"LINE_ITEM"}}function Zp(e,t){var r=null!=t?t:e;return r?r.map((e=>Jp(e))):[]}function Qp(e,t){return t.map((t=>function(e,t){return{description:zp(t.amount,e),id:t.id,label:t.label}}(e,t)))}function ef(e,t,r,n){var i=null!=n?n:r;if(i&&i.length>0){var o={shippingOptions:Qp(e,i)};return i.some((e=>e.id===t))&&(o.defaultSelectedOptionId=t),o}}function tf(e,t){return null==t?void 0:t.find((t=>t.id===e))}function rf(e,t,r,n,i,o){var{countryCode:s,currencyCode:a,total:c,lineItems:u,taxLineItems:l,discounts:d,requestBillingContact:h,requestShippingContact:p,shippingOptions:f}=t,g=Vp(t),v=Boolean(p||g),m=Wp(Wp({},e),{},{emailRequired:Boolean(h),merchantInfo:i,shippingAddressRequired:v,shippingOptionRequired:g,transactionInfo:{countryCode:s,currencyCode:a,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:n}});if(u&&u.length>0&&(m.transactionInfo.displayItems=Zp([],Mp({discounts:d,lineItems:u,taxLineItems:l},t))),v&&(m.shippingAddressParameters={phoneNumberRequired:!0}),g){var y=ef(a,o,[],f);y&&(m.shippingOptionParameters=y)}return r.length>0&&(m.callbackIntents=r),m}function nf(e,t){var r=[];return void 0!==e.error&&r.push({intent:t,message:e.error,reason:Bi.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[n,i]=e;r.push({intent:t,message:"".concat(n,": ").concat(i),reason:Bi.SHIPPING_ADDRESS_INVALID})})),r}function of(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?of(Object(r),!0).forEach((function(t){af(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):of(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function af(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cf(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function uf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){cf(o,n,i,s,a,"next",e)}function a(e){cf(o,n,i,s,a,"throw",e)}s(void 0)}))}}var lf=["#google"];class df extends Lc{constructor(e,t,r,n,i){var o;super(r),this.methodType=Fi.GOOGLE_PAY,this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.validateConfiguration(),this.paymentRequestLockController=i,this.req=t,this.merchantInfo=n,this.element=null,this.paymentMethodMessenger=new hu(r),Vp(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var r=[],n=Vp(e)&&t.includes(qi.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes(qi.SHIPPING_CONTACT_CHANGED);return n?r.push(Ap.SHIPPING_ADDRESS,Ap.SHIPPING_OPTION):i&&r.push(Ap.SHIPPING_ADDRESS),(!c.isAndroid()||n||i)&&r.push(Ap.PAYMENT_AUTHORIZATION),r}(this.req,this.handlers);var s,a,u,l,d=function(e,t,r,n){var i=Dp.TEST;"production"!==qn.env||e.isTestMerchant||(i=Dp.PRODUCTION);var o={environment:i,merchantInfo:n},s=t.includes(Ap.SHIPPING_OPTION)||t.includes(Ap.SHIPPING_ADDRESS);if(!c.isAndroid()||s){var a={onPaymentAuthorized:()=>({transactionState:Rp.SUCCESS})};s&&(a.onPaymentDataChanged=r),o.paymentDataCallbacks=a}return o}(r,this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(d),this.isReadyToPayRequest=(s=this.session.applicationId,a=this.req.requestBillingContact,u=this.context.getFeatureFlagValues().can_use_interac,l=[...Xp],u&&l.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:Kp,allowedCardNetworks:l,billingAddressParameters:{format:a?Tp.FULL:Tp.MIN,phoneNumberRequired:Boolean(a)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:s},type:Np.PAYMENT_GATEWAY},type:Pp.CARD}],apiVersion:2,apiVersionMinor:0})}get handlers(){var e=[];return this.req.hasEventListener(qi.SHIPPING_OPTION_CHANGED)&&e.push(qi.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(qi.SHIPPING_CONTACT_CHANGED)&&e.push(qi.SHIPPING_CONTACT_CHANGED),e}attach(e,t){var r=this;return uf((function*(){var n,i,o;r.throwIfDestroyedOrAlreadyAttached(),r.status=Pc.ATTACHED;var s=null!==(n=null==t?void 0:t.buttonColor)&&void 0!==n?n:ji.DEFAULT,a=null!==(i=null==t?void 0:t.buttonSizeMode)&&void 0!==i?i:Ui.STATIC,c=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:Hi.LONG;r.metricsHandler.logEvent("ATTACH:START"),r.metricsHandler.logEvent("CONFIGURED",t);try{r.element=$u(e)}catch(e){throw r.status=Pc.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","good"),e}r.isReadyToPay=yield r.checkIfReadyToPay("ATTACH:ERROR",!0);try{var u=r.googlePayClient.createButton({buttonColor:s,buttonSizeMode:a,buttonType:c,onClick:()=>{}});r.element.appendChild(u),r.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){throw r.status=Pc.DETACHED,r.maybeHandleDeveloperError(e,"createButton","ATTACH:ERROR",!0),new mi(yc)}}))()}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(Pc.DETACHED,"DETACHED"),Promise.resolve(!0)}destroy(){return this.status===Pc.DESTROYED?Promise.resolve(!1):(this.detachElement(Pc.DESTROYED,"DESTROYED"),Promise.resolve(!0))}tokenize(){var e=this;return uf((function*(){var t,r;e.throwIfDestroyed(),e.handleFirstInteraction(),e.metricsHandler.logEvent("EXTERNAL_SESSION:START"),e.isReadyToPay=null!==(t=e.isReadyToPay)&&void 0!==t?t:yield e.checkIfReadyToPay("EXTERNAL_SESSION:ERROR",!1),e.paymentRequestLockController.lock(e);try{r=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent("EXTERNAL_SESSION:OK")}catch(t){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),function(e){return null!==e&&"object"==typeof e&&"statusCode"in e}(t)&&"CANCELED"===t.statusCode)return e.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),{status:Vi.CANCEL};throw e.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),e.errorLogger.captureException(e.asInternalError(t),{context:"loadPaymentData"}),new Ti("tokenizing Google Pay.")}var{token:n,details:i}=yield e.requestGooglePayCardNonce(r);return{details:i,status:Vi.OK,token:n}}))()}validateConfiguration(){var e=lf.join(", ");if(document.querySelectorAll(e).length>0)throw new Ii(this.methodType,e)}checkIfReadyToPay(e,t){var r=this;return uf((function*(){var n=!1;try{var{result:i}=yield r.googlePayClient.isReadyToPay(r.isReadyToPayRequest);(n=i)||r.metricsHandler.logEvent(e,t?"good":void 0)}catch(n){r.maybeHandleDeveloperError(n,"isReadyToPay",e,t)}if(n){var o=r.callbackIntents.length>0?Cp.Unknown:Cp.Final;try{return r.googlePayClient.prefetchPaymentData(rf(r.isReadyToPayRequest,r.req,r.callbackIntents,o,r.merchantInfo,r.selectedShippingOptionId)),n}catch(n){r.maybeHandleDeveloperError(n,"prefetchPaymentData",e,t)}}throw new mi(pc)}))()}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(rf(this.isReadyToPayRequest,this.req,this.callbackIntents,Cp.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case Ap.INITIALIZE:case Ap.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case Ap.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new To("Unknown callbackTrigger: ".concat(e.callbackTrigger),Fi.GOOGLE_PAY)),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return uf((function*(){var r;t.selectedShippingOptionId=null===(r=e.shippingOptionData)||void 0===r?void 0:r.id;var{updatedOptionRequest:n,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(n,i)}))()}dispatchShippingOptionChanged(e,t){var r=this,n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(qi.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var i=tf(e,t);return i?this.status===Pc.DESTROYED?Promise.resolve({optionErrors:[{intent:Ap.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Bi.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent(qi.SHIPPING_OPTION_CHANGED,{contactOrOption:i},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",sf(sf({},t),{},{eventName:qi.SHIPPING_OPTION_CHANGED})),r.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),e({optionErrors:nf(t,Ap.SHIPPING_OPTION),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return uf((function*(){var{updatedContactRequest:r,contactErrors:n}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(r,n);var i,{shippingOptions:o}=t;r.shippingOptions?(o=r.shippingOptions,t.selectedShippingOptionId=r.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:s,optionErrors:a}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=sf(sf({},r),s),u=[...n,...a];return t.paymentDataChangedComplete(c,u)}))()}dispatchShippingContactChanged(e){var t=this,r={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var i;void 0!==e.shippingAddress&&this.handlers.includes(qi.SHIPPING_CONTACT_CHANGED)?this.status!==Pc.DESTROYED?this.req.dispatchEvent(qi.SHIPPING_CONTACT_CHANGED,{contactOrOption:(i=e.shippingAddress,{city:i.locality,countryCode:i.countryCode,postalCode:i.postalCode,state:i.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",sf(sf({},e),{},{eventName:qi.SHIPPING_CONTACT_CHANGED})),t.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),n({contactErrors:nf(e,Ap.SHIPPING_ADDRESS),updatedContactRequest:e})})):n({contactErrors:[{intent:Ap.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Bi.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):n(r)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var r=function(e,t,r,n){var i,{total:o,countryCode:s,currencyCode:a}=t,c=r,u=Jp(null!==(i=e.total)&&void 0!==i?i:o),l={countryCode:s,currencyCode:a,totalPrice:u.price,totalPriceLabel:u.label,totalPriceStatus:u.status},d=Zp(Mp(t),Mp(e,t));d.length>0&&(l.displayItems=d);var h={newTransactionInfo:l},p=ef(a,n,c,e.shippingOptions);return p&&(h.newShippingOptionParameters=p),h}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(r.error=t[0]),r}requestGooglePayCardNonce(e){var t=this;return uf((function*(){var r=tf(t.selectedShippingOptionId,t.shippingOptions);yield t.context.waitForProofOfWorkCompletion();try{var n=yield t.paymentMethodMessenger.request("REQUEST_GOOGLE_PAY_CARD_NONCE",e);return t.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:Fi.GOOGLE_PAY},token:n};return i&&(s.details.shipping={contact:i},t&&(s.details.shipping.option=t)),o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(n,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof Ai||t.errorLogger.captureException(e),e}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK"))}detachElement(e,t){this.element&&(this.element.innerHTML=""),this.status=e,this.metricsHandler.logEvent(t)}asInternalError(e){return e instanceof Error?e:new To(JSON.stringify(e),this.methodType)}maybeHandleDeveloperError(e,t,r,n){var i=function(e){if(e instanceof Error)return"SecurityError"===e.name?new mi(vc):void 0;var t=e;return"DEVELOPER_ERROR"===t.statusCode&&t.statusMessage.includes("secure context")?new mi(fc):void 0}(e),o=void 0!==i?"good":"bad";if(this.metricsHandler.logEvent(r,n?o:void 0),void 0!==i)throw i;this.errorLogger.captureException(this.asInternalError(e),{context:t})}}function hf(){return(hf=uf((function*(e,t){return{authJwt:(yield e.request("GENERATE_GOOGLE_PAY_AUTH_TOKEN",{session:t})).token,merchantId:"05498866192997955200",merchantName:t.merchantName}}))).apply(this,arguments)}var pf,ff=function(e){var t=function(e,t){return hf.apply(this,arguments)}(e.messenger,e.getSession()),r=bu.load("google-link",{src:"https://pay.google.com/gp/p/js/pay.js"},"google.payments",e.errorLogger);return Promise.all([r,t])};class gf{constructor(){this.lockSet=new Set}get isLocked(){return this.lockSet.size>0}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}}function vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vf(Object(r),!0).forEach((function(t){yf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yf(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.PENDING="pending",e.FINAL="final"}(pf||(pf={}));var Ef={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},_f=["visa","masterCard","jcb","discover","amex"];function bf(e){var t;return{amount:e.amount,label:e.label,type:null!==(t=e.pending)&&void 0!==t&&t?pf.PENDING:pf.FINAL}}function If(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function Sf(e,t){return t?bf(t):e}function Of(e,t){return t?t.map(bf):e}function wf(e,t){return t?t.map(If):e}function Cf(e){for(var t=3;t>0&&!e.supportsVersion(t);)t-=1;return t}function Af(e){var{addressLines:t,locality:r,administrativeArea:n,postalCode:i,countryCode:o,givenName:s,familyName:a,emailAddress:c,phoneNumber:u}=e;return{addressLines:t,city:r,countryCode:null==o?void 0:o.toUpperCase(),email:c,familyName:a,givenName:s,phone:u,postalCode:i,state:n}}function Tf(e){var{amount:t,identifier:r,label:n}=e;return{amount:t,id:r,label:n}}function Pf(e,t,r){return{errors:(n=e,i=[],void 0!==n.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",n.error)),n.shippingErrors&&Object.entries(n.shippingErrors).forEach((e=>{var t,[r,n]=e,o=null!==(t=Ef[r])&&void 0!==t?t:"postalAddress";i.push(new window.ApplePayError("shippingContactInvalid",o,n))})),i),newLineItems:Of(t.lineItems,Mp(e,r)),newShippingMethods:wf(t.shippingMethods,e.shippingOptions),newTotal:Sf(t.total,e.total)};var n,i}function Nf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nf(Object(r),!0).forEach((function(t){Df(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Df(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lf(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function xf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Lf(o,n,i,s,a,"next",e)}function a(e){Lf(o,n,i,s,a,"throw",e)}s(void 0)}))}}class kf extends Error{}class Mf extends Lc{constructor(e,t,r){if(super(t),this.methodType=Fi.APPLE_PAY,this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new hu(this.context),this.paymentRequestLockController=r,this.req=e,void 0===window.ApplePaySession)throw new mi(dc);var n=!1;try{n=window.ApplePaySession.canMakePayments()}catch(e){if("SecurityError"===Ic(e).name)throw new mi(vc);throw e}if(!n)throw new mi(hc);this.SessionHandle=window.ApplePaySession,this.validateConfiguration()}tokenize(){var e=this;return xf((function*(){var t=Lc.withErrorCapture(e.tokenizeWrapped.bind(e),e.errorLogger,"Apple Pay");return yield t()}))()}tokenizeWrapped(){var e=this;return xf((function*(){if(e.handleFirstInteraction(),e.throwIfDestroyed(),e.sessionInProgress)throw new Ai([xc]);e.applePayPaymentRequest=function(e,t){var r=[..._f];null!=t&&t&&r.push("interac");var n,i,o={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:Of([],Mp(e)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:wf([],e.shippingOptions),supportedNetworks:r,total:bf(e.total)};return e.shippingContact&&(o.shippingContact={addressLines:(n=e.shippingContact).addressLines,administrativeArea:n.state,country:Ip[null!==(i=n.countryCode)&&void 0!==i?i:""],countryCode:n.countryCode,emailAddress:n.email,familyName:n.familyName,givenName:n.givenName,locality:n.city,phoneNumber:n.phone,postalCode:n.postalCode}),e.requestBillingContact&&(o.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(o.requiredShippingContactFields=["postalAddress","name","email","phone"]),o}(e.req,e.context.getFeatureFlagValues().can_use_interac);var t=new e.SessionHandle(Cf(e.SessionHandle),e.applePayPaymentRequest),r=e.shippingContactChanged.bind(e);t.onshippingcontactselected=t=>{r(t.shippingContact,e.applePayPaymentRequest)};var n=e.shippingOptionChanged.bind(e);t.onshippingmethodselected=t=>{n(t.shippingMethod,e.applePayPaymentRequest)};var i=new Promise(((e,r)=>{t.oncancel=()=>{r(new kf)}})),o=new Promise(((r,n)=>{t.onvalidatemerchant=function(){var t=xf((function*(t){try{var i=yield e.requestApplePayMerchantValidity(t.validationURL,e.applePayPaymentRequest);r(i)}catch(e){n(e)}}));return function(e){return t.apply(this,arguments)}}()})),s=new Promise(((r,n)=>{t.onpaymentauthorized=function(){var t=xf((function*(t){try{var i=yield e.requestApplePayCardNonce(t);r(i)}catch(e){n(e)}}));return function(e){return t.apply(this,arguments)}}()}));e.currentSession=t,e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent("EXTERNAL_SESSION:START"),t.begin();try{var a=yield Promise.race([o,i]);t.completeMerchantValidation(a);var{token:c,details:u}=yield Promise.race([s,i]);return e.metricsHandler.logEvent("EXTERNAL_SESSION:OK"),{details:u,status:Vi.OK,token:c}}catch(t){if(t instanceof kf)return e.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),{status:Vi.CANCEL};throw e.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),t}finally{e.deleteApplePaySession()}}))()}destroy(){return this.currentSession&&(this.currentSession.abort(),this.deleteApplePaySession()),this.status=Pc.DESTROYED,this.metricsHandler.logEvent("DESTROYED"),Promise.resolve(!0)}validateConfiguration(){var e=this.session;if(void 0===e.applePayMerchantIdentifier||""===e.applePayMerchantIdentifier)throw new mi(gc,"applePayMerchantIdentifier");if(void 0===e.locationId||""===e.locationId)throw new mi(gc,"locationId")}requestApplePayCardNonce(e){var t=this;return xf((function*(){var r;yield t.context.waitForProofOfWorkCompletion();var n={applepayData:e.payment},i=null!==(r=t.selectedShippingMethod)&&void 0!==r?r:t.getDefaultShippingMethod();try{var o=yield t.paymentMethodMessenger.request("REQUEST_APPLE_PAY_CARD_NONCE",n);return t.getApplePaySession().completePayment(t.SessionHandle.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(o.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:Fi.APPLE_PAY},token:n};if(i){var a={contact:i};t&&(a.option=Tf(t)),s.details.shipping=a}return o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(o,i)}catch(e){throw t.getApplePaySession().completePayment(t.SessionHandle.STATUS_FAILURE),e}}))()}requestApplePayMerchantValidity(e,t){var r=this;return xf((function*(){var n,i=t.total.label,o=r.session,s={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{n=yield r.paymentMethodMessenger.request("REQUEST_APPLE_PAY_MERCHANT_VALIDITY",s)}catch(e){throw r.getApplePaySession().abort(),e}try{return JSON.parse(n.session)}catch(e){throw r.getApplePaySession().abort(),e}}))()}shippingContactChanged(e,t){var r=Cf(this.SessionHandle)>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener(qi.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(qi.SHIPPING_CONTACT_CHANGED,{contactOrOption:Af(e)},(e=>{this.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",Rf(Rf({},e),{},{eventName:qi.SHIPPING_CONTACT_CHANGED})),this.handleShippingContactUpdate(r,e)})):this.handleShippingContactUpdate(r)}handleShippingContactUpdate(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null===(t=r.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===n&&null!==i&&(n=Tf(i)),void 0!==n&&this.req.hasEventListener(qi.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=If(n),this.req.dispatchEvent(qi.SHIPPING_OPTION_CHANGED,{contactOrOption:n},(t=>{this.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",Rf(Rf({},t),{},{eventName:qi.SHIPPING_OPTION_CHANGED})),e(Rf(Rf({},r),t))}))):e(r)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var r=Cf(this.SessionHandle)>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener(qi.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(qi.SHIPPING_OPTION_CHANGED,{contactOrOption:Tf(e)},r):r({})}updateApplePayPaymentRequest(e){this.applePayPaymentRequest.total=e.newTotal,e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),function(e){return"newShippingMethods"in e}(e)&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){return t=>{var r=Pf(t,e,this.req);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.getApplePaySession().completeShippingContactSelection(r)}}updateApplePayShippingContactLegacy(e){return t=>{var r=function(e,t,r,n){return mf({status:n},Pf(e,t,r))}(t,e,this.req,this.SessionHandle.STATUS_SUCCESS);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.getApplePaySession().completeShippingContactSelection(r.status,r.newShippingMethods,r.newTotal,r.newLineItems)}}updateApplePayShippingMethodV3(e){return t=>{var r=function(e,t,r){return{newLineItems:Of(t.lineItems,Mp(e,r)),newTotal:Sf(t.total,e.total)}}(t,e,this.req);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.getApplePaySession().completeShippingMethodSelection(r)}}updateApplePayShippingMethodLegacy(e){return t=>{var r=function(e,t,r,n){return mf({status:n},Pf(e,t,r))}(t,e,this.req,this.SessionHandle.STATUS_SUCCESS);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.getApplePaySession().completeShippingMethodSelection(r.status,r.newTotal,r.newLineItems)}}getDefaultShippingMethod(){var{shippingMethods:e}=this.applePayPaymentRequest;return e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}deleteApplePaySession(){delete this.currentSession,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent("FIRST_INTERACTION:OK"),this.wasFirstInteractionCalled=!0)}getApplePaySession(){if(void 0===this.currentSession)throw new Ti("getting Apple Pay Session");return this.currentSession}}var jf=function(e,t,r,n,i){return new Dl(e,t,r,n,i)},Uf=function(e,t,r){return new Mf(e,t,r)},Hf=function(e,t,r,n,i){return new op(e,t,r,n,i)},Bf=function(e,t,r,n,i){return new df(e,t,r,n,i)};function Ff(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function qf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ff(o,n,i,s,a,"next",e)}function a(e){Ff(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Vf(e,t){var{paymentMethodSupportDetail:r}=t,n=t.getSession();if(void 0===n.locationId||0===n.locationId.length)throw new mi(gc,"locationId");if(null!=r&&r[e]&&!r[e].IsSupported){var{UnsupportedReasonType:i}=r[e],o=yc;throw void 0!==i&&i in lc&&(o=Ec[i]),new mi(o)}}function Gf(e){if(!(e instanceof qp))throw new ti([["paymentRequest","PaymentRequest"]])}function zf(e,t,r,n){var i=t instanceof Error&&r.some((e=>t instanceof e));return e.metricsHandler.logEvent("BUILD:ERROR",i?"good":"bad"),i?t:(e.errorLogger.captureException(t),new Ti(n))}class $f{constructor(e,t,r){this.localeStrings=new Xo(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=r,this.paymentRequestLockMap=new WeakMap,this.paymentsNumCalls=1}overrideStrings(e){var t=this;return qf((function*(){try{var r=yield t.getPaymentContext("WebSDK");if(!r.getFeatureFlagValues().can_use_override_strings)throw new fi("overrideStrings");r.metricsHandler.logEvent("OVERRIDE_STRINGS",e),r.setTranslationOverrides(e)}catch(e){if(Fo(e))throw t.errorLogger.captureException(e),new Ti("overriding the strings");throw e}}))()}setLocale(e){var t=this;return qf((function*(){try{var r=yield t.getPaymentContext("WebSDK");return r.metricsHandler.logEvent("SET_LOCALE",e),r.setLocale(e)}catch(e){if(Fo(e))throw t.errorLogger.captureException(e),new Ti("setting the locale");throw e}}))()}verifyBuyer(e,t){var r=this;return qf((function*(){var n=[];if(r.paymentOptions.locationId&&0!==r.paymentOptions.locationId.length||n.push(new _c("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||n.push(new _c("verifyBuyer","source","string")),null===t||"object"!=typeof t?n.push(new _c("verifyBuyer","details","object")):n.push(...jh.validateVerificationDetails(t,"verifyBuyer")),n.length>0)throw new bc(n);var i=yield r.getPaymentContext("WebSDK");try{i.metricsHandler.logEvent("VERIFICATION:START");var o=yield i.analyticsBackend.verifyBuyer(e,t);return i.metricsHandler.logEvent("VERIFICATION:OK"),o}catch(e){if(i.metricsHandler.logEvent("VERIFICATION:ERROR"),Qn(e))throw new Zn(e);throw"UnexpectedAnalyticsClientError"!==Ic(e).name&&r.errorLogger.captureException(e),new Ti("verifying buyer")}}))()}card(e){var t=this;return qf((function*(){var r=yield t.getPaymentContext("Card");r.metricsHandler.logEvent("BUILD:START");try{var n=new Xh(r,e);return r.metricsHandler.logEvent("BUILD:OK","good"),n}catch(e){throw zf(r,e,[si,ai],"initializing card")}}))()}paymentRequest(e){var t=new gf,r=new qp(e,this.localeStrings,t);return this.paymentRequestLockMap.set(r,t),this.getPaymentContext("Payment Request").then((t=>{var{metricsHandler:n}=t;r.setMetricsHandler(n),n.logEvent("CONFIGURED",e)})),r}googlePay(e){var t=this;return qf((function*(){var r=yield t.getPaymentContext("Google Pay");r.metricsHandler.logEvent("BUILD:START");try{Vf(tc.GOOGLE_PAY,r),function(){if("undefined"==typeof ShadowRoot)throw new mi(pc)}(),Gf(e);var n=t.getPaymentRequestLock(e),[i,o]=yield ff(r),s=Bf(i,e,r,o,n);return r.metricsHandler.logEvent("BUILD:OK","good"),s}catch(e){throw zf(r,e,[Ii,ti,mi],"initializing googlePay")}}))()}applePay(e){var t=this;return qf((function*(){var r=yield t.getPaymentContext("Apple Pay");r.metricsHandler.logEvent("BUILD:START");try{Vf(tc.APPLE_PAY,r),Gf(e);var n=t.getPaymentRequestLock(e),i=Uf(e,r,n);return r.metricsHandler.logEvent("BUILD:OK","good"),i}catch(e){throw zf(r,e,[ti,mi],"initializing applePay")}}))()}ach(e){var t=this;return qf((function*(){var r=yield t.getPaymentContext("ACH");r.metricsHandler.logEvent("BUILD:START");try{Vf(tc.ACH,r);var n=new Ru(r,e);return yield n.initialize(),r.metricsHandler.logEvent("BUILD:OK","good"),n}catch(e){throw zf(r,e,[ai,mi],"initializing ach")}}))()}giftCard(e){var t=this;return qf((function*(){var r=yield t.getPaymentContext("Gift Card");r.metricsHandler.logEvent("BUILD:START");try{var n=new gp(r,e);return r.metricsHandler.logEvent("BUILD:OK","good"),n}catch(e){throw zf(r,e,[si,ai],"initializing giftcard")}}))()}afterpayClearpay(e){var t=this;return qf((function*(){var r=yield t.getPaymentContext("Afterpay");r.metricsHandler.logEvent("BUILD:START");try{Vf(tc.AFTERPAY,r),Gf(e);var n=t.getPaymentRequestLock(e),[i,o]=yield Ll(r),s=jf(i,o,e,r,n);return yield s.internalSetCheckoutToken(),r.metricsHandler.logEvent("BUILD:OK","good"),s}catch(e){throw zf(r,e,[zn,Jn,Wn,pi,ti,mi],"initializing afterpay")}}))()}cashAppPay(e,t){var r=this;return qf((function*(){var n=yield r.getPaymentContext("Cash App Pay V1");n.metricsHandler.logEvent("BUILD:START");try{Vf(tc.CASH_APP_PAY_V1,n),Gf(e);var i=r.getPaymentRequestLock(e),o=yield ap.initialize(n),s=Hf(o,e,t,n,i);return n.metricsHandler.logEvent("BUILD:OK","good"),s}catch(e){throw zf(n,e,[li,di,ti,mi],"initializing cashAppPay")}}))()}markPaymentsReuse(){this.paymentsNumCalls+=1,this.metrics.logEvent({errorMessage:JSON.stringify({paymentsNumCalls:this.paymentsNumCalls}),event:"PAYMENTS_REUSE",eventSource:"WebSDK"})}getPaymentContext(e){var t=this;return qf((function*(){var{featureFlagValues:r,messenger:n,session:i,paymentMethodSupportDetail:o,proofOfWorkComputePromise:s,isTestMerchant:a}=yield t.initializePaymentMethod(),c={instanceId:i.instanceId,sessionId:i.sessionId};void 0!==i.avt&&(t.errorLogger.setUser(i.avt),c.avt=i.avt),t.errorLogger.setCustomTags(c);var u,l=Ac(),d=new Tc(t.metrics,i,e,l);t.contextEventTarget||(t.contextEventTarget=new Cc),void 0===t.analyticsBackend&&(t.analyticsBackend=new nc(i.applicationId,i.locationId,null!==(u=i.avt)&&void 0!==u?u:"",n));var h=new uc(t.errorLogger,n,d,i,o,t.localeStrings,t.contextEventTarget,r,a,t.analyticsBackend,s);return t.errorLogger.setRecordErrorMetrics(h.getFeatureFlagValues().record_error_metrics),h}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=jh.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var r=new Ti("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(r),r}return t}}var Wf=new Map,Yf={_utils:{},errors:Go,payments:function(e,t){var r,n="".concat(e,"-").concat(null!=t?t:""),i=Wf.get(n);if(void 0!==i)return i.markPaymentsReuse(),i;if(!(r=c.windowLocation).hostname.endsWith("localhost")&&"https:"!==r.protocol)throw new vi;if(!c.isSupported())throw new gi;if(function(e){if(!function(e){return!(e.length<22||e.length>37)&&Zi.test(e)&&!Qi.test(e)}(e))throw new Ki;var t=e.match(/^[\w-]{22}$/),r=e.startsWith("sq0idp-"),n=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||r||n||i))throw new Ki;if(r&&!to())throw new Xi("production",qn.env);if(n&&!eo("sandbox"))throw new Xi("sandbox",qn.env)}(e),null!=t&&"string"!=typeof t)throw new Ji;var{hostname:o,origin:s}=c.windowLocation,a=new mo({applicationId:e,applicationUrl:s,source:"web-payments-sdk-public",useGlobalHandlers:!1}),u={applicationId:e,hostname:o,locationId:null!=t?t:"",sourceUrl:s},l=new Xs(a,{applicationId:e,hostname:o,locationId:null!=t?t:""});l.logEvent({event:"LOAD:OK",eventSource:"WebSDK"});var d=new $f(u,l,a);return Wf.set(n,d),d}};"Square"in window?Object.assign(window.Square,Yf):window.Square=Yf})();
//# debugId=810e8bd3-b1e8-5347-aa42-86cebcf61b5f
